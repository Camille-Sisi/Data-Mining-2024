<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 14 Modèles de régression : application sur le RP 2019 | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 14 Modèles de régression : application sur le RP 2019 | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 14 Modèles de régression : application sur le RP 2019 | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="12-Clustering-application.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération de la base de données</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>1.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="1.2" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#quelles-informations-intéressantes-dans-cette-base"><i class="fa fa-check"></i><b>1.2</b> Quelles informations intéressantes dans cette base ?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#sélectionner-un-champ-réduit-de-la-base-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Sélectionner un champ réduit de la base, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html"><i class="fa fa-check"></i><b>4</b> Récapitulatig séance 1 - Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#ce-quon-a-appris"><i class="fa fa-check"></i><b>4.1</b> Ce qu’on a appris</a></li>
<li class="chapter" data-level="4.2" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#enregistrement-des-tables"><i class="fa fa-check"></i><b>4.2</b> Enregistrement des tables</a></li>
</ul></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-résidant-à-paris"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la population résidant à Paris</a></li>
<li class="chapter" data-level="5.2" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-active-résidant-à-paris"><i class="fa fa-check"></i><b>5.2</b> Caractéristiques de la population active résidant à Paris</a></li>
<li class="chapter" data-level="5.3" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-des-logements-parisiens"><i class="fa fa-check"></i><b>5.3</b> Caractéristiques des logements parisiens</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-Fonctions.html"><a href="06-Fonctions.html#principes-généraux-dune-fonction"><i class="fa fa-check"></i><b>6.1</b> Principes généraux d’une fonction</a></li>
<li class="chapter" data-level="6.2" data-path="06-Fonctions.html"><a href="06-Fonctions.html#exemples-de-fonctions"><i class="fa fa-check"></i><b>6.2</b> Exemples de fonctions</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Data Mining - Data Visualization</b></span></li>
<li class="chapter" data-level="7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html"><i class="fa fa-check"></i><b>7</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>7.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>7.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="7.1.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>7.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="7.1.3" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>7.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="7.1.4" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>7.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="7.1.5" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>7.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="7.1.6" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>7.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="7.1.7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>7.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="7.1.8" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>7.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="7.1.9" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>7.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>7.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html"><i class="fa fa-check"></i><b>8</b> Data Mining et Data Visualization en pratique</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>8.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="8.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>8.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#distribution-du-prix-au-m2-pour-les-appartements-parisiens-selon-lannée"><i class="fa fa-check"></i><b>8.2.1</b> Distribution du prix au m2 pour les appartements parisiens, selon l’année</a></li>
<li class="chapter" data-level="8.2.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-arrondissement-de-paris"><i class="fa fa-check"></i><b>8.2.2</b> Comparaison des montants moyen et médian du prix au m2, par arrondissement de Paris</a></li>
<li class="chapter" data-level="8.2.3" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#evolution-du-prix-médian-au-m2-des-ventes-dappartements-à-paris"><i class="fa fa-check"></i><b>8.2.3</b> Evolution du prix médian au m2 des ventes d’appartements à Paris</a></li>
<li class="chapter" data-level="8.2.4" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-arrondissements"><i class="fa fa-check"></i><b>8.2.4</b> Top 5 du prix au m2 des ventes d’appartements selon les arrondissements</a></li>
<li class="chapter" data-level="8.2.5" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>8.2.5</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Séances 4 et 5 : Data Visualization - Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="9" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>9</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>9.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>9.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="9.1.2" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>9.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>9.2</b> La réactivité</a></li>
<li class="chapter" data-level="9.3" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>9.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>10</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>10.1</b> Application vide</a></li>
<li class="chapter" data-level="10.2" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>10.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="10.3" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>10.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="10.4" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>10.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="10.5" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>10.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#applications-plus-poussées-sur-shiny"><i class="fa fa-check"></i><b>11</b> Applications plus poussées sur Shiny</a>
<ul>
<li class="chapter" data-level="11.1" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#application-avec-un-tableau-et-un-graphique-sur-une-autre-base-de-données"><i class="fa fa-check"></i><b>11.1</b> Application avec un tableau et un graphique sur une autre base de données</a></li>
<li class="chapter" data-level="11.2" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>11.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="11.3" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#introduction-dune-réactivité-sur-les-inputs-contexte-réactif"><i class="fa fa-check"></i><b>11.3</b> Introduction d’une réactivité sur les inputs (contexte réactif)</a></li>
</ul></li>
<li class="part"><span><b>Séance 6 : Data Mining - Clustering</b></span></li>
<li class="chapter" data-level="12" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html"><i class="fa fa-check"></i><b>12</b> Clustering : aspects théoriques</a>
<ul>
<li class="chapter" data-level="12.1" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html#la-classification-ascendante-hiérarchique-cah"><i class="fa fa-check"></i><b>12.1</b> La classification ascendante hiérarchique (CAH)</a></li>
<li class="chapter" data-level="12.2" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html#la-méthode-des-centres-mobiles-et-sa-variante-les-k-means"><i class="fa fa-check"></i><b>12.2</b> La méthode des centres mobiles et sa variante, <em>les K-means</em></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html"><i class="fa fa-check"></i><b>13</b> Clustering : application sur le RP 2019</a>
<ul>
<li class="chapter" data-level="13.1" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#choix-des-variables-et-préparation-du-tableau-final"><i class="fa fa-check"></i><b>13.1</b> Choix des variables et préparation du tableau final</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#variable-socio-professionnelle-caractérisant-la-personne-de-référence-du-ménage"><i class="fa fa-check"></i><b>13.1.1</b> Variable socio-professionnelle caractérisant la personne de référence du ménage</a></li>
<li class="chapter" data-level="13.1.2" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#création-du-tableau-de-contingence"><i class="fa fa-check"></i><b>13.1.2</b> Création du tableau de contingence</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#la-méthode-de-la-cah-appliquée-à-nos-données"><i class="fa fa-check"></i><b>13.2</b> La méthode de la CAH appliquée à nos données</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#constitution-des-classes"><i class="fa fa-check"></i><b>13.2.1</b> Constitution des classes</a></li>
<li class="chapter" data-level="13.2.2" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#visualisation-sur-la-carte-des-communes-et-départements"><i class="fa fa-check"></i><b>13.2.2</b> Visualisation sur la carte des communes et départements</a></li>
<li class="chapter" data-level="13.2.3" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#interprétation"><i class="fa fa-check"></i><b>13.2.3</b> Interprétation</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="12-Clustering-application.html"><a href="12-Clustering-application.html#la-méthode-des-k-means-appliquée-à-nos-données"><i class="fa fa-check"></i><b>13.3</b> La méthode des <em>k-means</em> appliquée à nos données</a></li>
</ul></li>
<li class="part"><span><b>Séance 7 : Régressions/Prédictions</b></span></li>
<li class="chapter" data-level="14" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html"><i class="fa fa-check"></i><b>14</b> Modèles de régression : application sur le RP 2019</a>
<ul>
<li class="chapter" data-level="14.1" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#la-création-des-bases-dapprentissage-et-de-test"><i class="fa fa-check"></i><b>14.1</b> La création des bases d’apprentissage et de test</a></li>
<li class="chapter" data-level="14.2" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#un-modèle-à-visée-principale-explicative-la-régression-logistique"><i class="fa fa-check"></i><b>14.2</b> Un modèle à visée principale explicative : la régression logistique</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#le-modèle-initial"><i class="fa fa-check"></i><b>14.2.1</b> Le modèle initial</a></li>
<li class="chapter" data-level="14.2.2" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#lévaluation-du-modèle-et-la-recherche-éventuelle-dun-meilleur-modèle"><i class="fa fa-check"></i><b>14.2.2</b> L’évaluation du modèle et la recherche éventuelle d’un “meilleur” modèle</a></li>
<li class="chapter" data-level="14.2.3" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#le-modèle-final-et-linterprétation-des-résultats"><i class="fa fa-check"></i><b>14.2.3</b> Le modèle final et l’interprétation des résultats</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#un-modèle-à-visée-principale-prédictive-labre-de-décision"><i class="fa fa-check"></i><b>14.3</b> Un modèle à visée principale prédictive : l’abre de décision</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#le-modèle-initial-1"><i class="fa fa-check"></i><b>14.3.1</b> Le modèle initial</a></li>
<li class="chapter" data-level="14.3.2" data-path="13-Modeles-regression.html"><a href="13-Modeles-regression.html#lévaluation-du-modèle"><i class="fa fa-check"></i><b>14.3.2</b> L’évaluation du modèle</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c13-Modeles-regression" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Section 14</span> Modèles de régression : application sur le RP 2019<a href="13-Modeles-regression.html#c13-Modeles-regression" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<p>On cherche maintenant à expliquer un phénomène ou une variable par rapport à d’autres. On va ici s’intéresser au fait d’être en couple plutôt que de ne pas l’être.<br />
On va repartir de la base RP, en réduisant le champ à Paris et aux 18 ans ou plus.</p>
<div id="la-création-des-bases-dapprentissage-et-de-test" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> La création des bases d’apprentissage et de test<a href="13-Modeles-regression.html#la-création-des-bases-dapprentissage-et-de-test" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On crée notre base de travail en ne prenant que les variables qui nous intéressent et le champ le plus pertinent pour cette analyse. La fonction <code>relevel()</code> permet d’indiquer la modalité de référence que l’on veut dans les régressions futures, ici pour la régression logistique.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="13-Modeles-regression.html#cb178-1" tabindex="-1"></a>dt_reg <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> </span>
<span id="cb178-2"><a href="13-Modeles-regression.html#cb178-2" tabindex="-1"></a>  <span class="fu">filter</span>(DEPT<span class="sc">==</span><span class="st">&quot;75&quot;</span> <span class="sc">&amp;</span> <span class="sc">!</span>AGER20 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>,<span class="st">&quot;5&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;14&quot;</span>,<span class="st">&quot;17&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb178-3"><a href="13-Modeles-regression.html#cb178-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(AGER20 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;19&quot;</span>, <span class="st">&quot;24&quot;</span>) <span class="sc">~</span> <span class="st">&quot;18-24ans&quot;</span>,</span>
<span id="cb178-4"><a href="13-Modeles-regression.html#cb178-4" tabindex="-1"></a>                                   AGER20 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;29&quot;</span>,<span class="st">&quot;39&quot;</span>, <span class="st">&quot;54&quot;</span>) <span class="sc">~</span> <span class="st">&quot;25-54ans&quot;</span>,</span>
<span id="cb178-5"><a href="13-Modeles-regression.html#cb178-5" tabindex="-1"></a>                                   AGER20 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;64&quot;</span>,<span class="st">&quot;79&quot;</span>, <span class="st">&quot;80&quot;</span>) <span class="sc">~</span> <span class="st">&quot;55ansouplus&quot;</span>)),</span>
<span id="cb178-6"><a href="13-Modeles-regression.html#cb178-6" tabindex="-1"></a>         <span class="at">couple =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(COUPLE <span class="sc">==</span> <span class="st">&quot;1&quot;</span> <span class="sc">~</span> <span class="st">&quot;oui&quot;</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non&quot;</span>)),</span>
<span id="cb178-7"><a href="13-Modeles-regression.html#cb178-7" tabindex="-1"></a>         <span class="at">couple =</span> <span class="fu">relevel</span>(couple, <span class="at">ref=</span><span class="st">&quot;non&quot;</span>),</span>
<span id="cb178-8"><a href="13-Modeles-regression.html#cb178-8" tabindex="-1"></a>         <span class="at">immigres =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(IMMI<span class="sc">==</span><span class="st">&quot;1&quot;</span> <span class="sc">~</span><span class="st">&quot;oui&quot;</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non&quot;</span>)),</span>
<span id="cb178-9"><a href="13-Modeles-regression.html#cb178-9" tabindex="-1"></a>         <span class="at">sexe =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(SEXE <span class="sc">==</span> <span class="st">&quot;1&quot;</span> <span class="sc">~</span> <span class="st">&quot;homme&quot;</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;femme&quot;</span>)),</span>
<span id="cb178-10"><a href="13-Modeles-regression.html#cb178-10" tabindex="-1"></a>         <span class="at">sexe =</span> <span class="fu">relevel</span>(sexe, <span class="at">ref=</span><span class="st">&quot;homme&quot;</span>),</span>
<span id="cb178-11"><a href="13-Modeles-regression.html#cb178-11" tabindex="-1"></a>         <span class="at">emploi =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(TACT <span class="sc">==</span> <span class="st">&quot;11&quot;</span> <span class="sc">~</span> <span class="st">&quot;en_emploi&quot;</span>,</span>
<span id="cb178-12"><a href="13-Modeles-regression.html#cb178-12" tabindex="-1"></a>                                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non_emploi&quot;</span>)),</span>
<span id="cb178-13"><a href="13-Modeles-regression.html#cb178-13" tabindex="-1"></a>         <span class="at">emploi =</span> <span class="fu">relevel</span>(emploi, <span class="at">ref=</span><span class="st">&quot;non_emploi&quot;</span>),</span>
<span id="cb178-14"><a href="13-Modeles-regression.html#cb178-14" tabindex="-1"></a>         chômage <span class="ot">=</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(TACT <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">~</span> <span class="st">&quot;au_chômage&quot;</span>, </span>
<span id="cb178-15"><a href="13-Modeles-regression.html#cb178-15" tabindex="-1"></a>                                       <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non_chômage&quot;</span>)),</span>
<span id="cb178-16"><a href="13-Modeles-regression.html#cb178-16" tabindex="-1"></a>         chômage <span class="ot">=</span> <span class="fu">relevel</span>(chômage, <span class="at">ref=</span><span class="st">&quot;non_chômage&quot;</span>),</span>
<span id="cb178-17"><a href="13-Modeles-regression.html#cb178-17" tabindex="-1"></a>         <span class="at">diplome=</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(DIPL <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;01&quot;</span>, <span class="st">&quot;02&quot;</span>, <span class="st">&quot;03&quot;</span>, <span class="st">&quot;11&quot;</span>, <span class="st">&quot;12&quot;</span>, </span>
<span id="cb178-18"><a href="13-Modeles-regression.html#cb178-18" tabindex="-1"></a>                                                  <span class="st">&quot;13&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Peu_pas_dipl&quot;</span>,</span>
<span id="cb178-19"><a href="13-Modeles-regression.html#cb178-19" tabindex="-1"></a>                                      DIPL <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;14&quot;</span>, <span class="st">&quot;15&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac&quot;</span>,</span>
<span id="cb178-20"><a href="13-Modeles-regression.html#cb178-20" tabindex="-1"></a>                                      DIPL <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;16&quot;</span>, <span class="st">&quot;17&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac+2-3-4&quot;</span>,</span>
<span id="cb178-21"><a href="13-Modeles-regression.html#cb178-21" tabindex="-1"></a>                                      DIPL <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;18&quot;</span>, <span class="st">&quot;19&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Bac+5ou+&quot;</span>)),</span>
<span id="cb178-22"><a href="13-Modeles-regression.html#cb178-22" tabindex="-1"></a>         <span class="at">diplome =</span> <span class="fu">relevel</span>(diplome, <span class="at">ref=</span><span class="st">&quot;Peu_pas_dipl&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb178-23"><a href="13-Modeles-regression.html#cb178-23" tabindex="-1"></a>  <span class="fu">select</span>(age, couple, immigres, sexe, emploi, chômage, diplome) </span>
<span id="cb178-24"><a href="13-Modeles-regression.html#cb178-24" tabindex="-1"></a></span>
<span id="cb178-25"><a href="13-Modeles-regression.html#cb178-25" tabindex="-1"></a><span class="co"># On peut éventuellement étudier en statistiques descriptives les liens entre la</span></span>
<span id="cb178-26"><a href="13-Modeles-regression.html#cb178-26" tabindex="-1"></a><span class="co"># variable d&#39;intérêt &quot;couple&quot; et les autres variables avec le code suivant :</span></span>
<span id="cb178-27"><a href="13-Modeles-regression.html#cb178-27" tabindex="-1"></a><span class="co"># dt_reg %&gt;% group_by(couple) %&gt;% </span></span>
<span id="cb178-28"><a href="13-Modeles-regression.html#cb178-28" tabindex="-1"></a><span class="co">#   count(diplome) %&gt;% pivot_wider(names_from = diplome, values_from = &quot;n&quot;,</span></span>
<span id="cb178-29"><a href="13-Modeles-regression.html#cb178-29" tabindex="-1"></a><span class="co">#                                  names_prefix = &quot;diplome_&quot;) %&gt;%</span></span>
<span id="cb178-30"><a href="13-Modeles-regression.html#cb178-30" tabindex="-1"></a><span class="co">#   adorn_totals(c(&quot;row&quot;,&#39;col&#39;)) %&gt;% adorn_percentages(&quot;col&quot;) %&gt;%</span></span>
<span id="cb178-31"><a href="13-Modeles-regression.html#cb178-31" tabindex="-1"></a><span class="co">#   adorn_pct_formatting(digits=2)</span></span></code></pre></div>
<p>De manière traditionnelle, dans les modèles de prédiction ou <em>machine learning</em>, on n’applique pas le modèle sur l’ensemble de la base de données mais d’abord sur un échantillon dit d’apprentissage puis on le “teste” sur l’échantillon restant. On va donc ici suivre ce schéma et diviser notre base de données en deux pour avoir un échantillon d’apprentissage ou d’entraînement, et un autre test.<br />
On utilise pour cela la fonction <code>sample</code> (mais d’autres fonctions existent) en lui spécifiant la façon de diviser la base avec l’argument <code>prob=</code> : ici on choisit de diviser notre base selon un rapport 70% <em>vs</em> 30%, autrement dit notre base d’apprentissage comprendra 70% des données de la base initiale, alors que la base de test comprendra les 30% restants. On pourrait procéder à un rapport du type 80% <em>vs</em> 20%, ou 75% <em>vs</em> 25%, etc.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="13-Modeles-regression.html#cb179-1" tabindex="-1"></a><span class="co"># On choisit la façon de diviser notre base et on l&#39;applique en créant 2 bases</span></span>
<span id="cb179-2"><a href="13-Modeles-regression.html#cb179-2" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="fu">nrow</span>(dt_reg), <span class="at">replace=</span><span class="cn">TRUE</span>, <span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.70</span>,<span class="fl">0.3</span>))</span>
<span id="cb179-3"><a href="13-Modeles-regression.html#cb179-3" tabindex="-1"></a>dt_reg_train <span class="ot">&lt;-</span> dt_reg[sample, ]</span>
<span id="cb179-4"><a href="13-Modeles-regression.html#cb179-4" tabindex="-1"></a>dt_reg_test  <span class="ot">&lt;-</span> dt_reg[<span class="sc">!</span>sample, ]</span>
<span id="cb179-5"><a href="13-Modeles-regression.html#cb179-5" tabindex="-1"></a></span>
<span id="cb179-6"><a href="13-Modeles-regression.html#cb179-6" tabindex="-1"></a><span class="co"># On regarde quelle est la taille de nos deux bases</span></span>
<span id="cb179-7"><a href="13-Modeles-regression.html#cb179-7" tabindex="-1"></a><span class="fu">dim</span>(dt_reg_train)</span></code></pre></div>
<pre><code>[1] 497765      7</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="13-Modeles-regression.html#cb181-1" tabindex="-1"></a><span class="fu">dim</span>(dt_reg_test)</span></code></pre></div>
<pre><code>[1] 213555      7</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="13-Modeles-regression.html#cb183-1" tabindex="-1"></a><span class="co"># On vérifie que les proportions de notre variable d&#39;intérêt sont assez proches</span></span>
<span id="cb183-2"><a href="13-Modeles-regression.html#cb183-2" tabindex="-1"></a><span class="co"># entre les deux bases</span></span>
<span id="cb183-3"><a href="13-Modeles-regression.html#cb183-3" tabindex="-1"></a>dt_reg_train <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(couple) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb183-4"><a href="13-Modeles-regression.html#cb183-4" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="idyefoqncm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#idyefoqncm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#idyefoqncm thead, #idyefoqncm tbody, #idyefoqncm tfoot, #idyefoqncm tr, #idyefoqncm td, #idyefoqncm th {
  border-style: none;
}

#idyefoqncm p {
  margin: 0;
  padding: 0;
}

#idyefoqncm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#idyefoqncm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#idyefoqncm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#idyefoqncm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#idyefoqncm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#idyefoqncm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#idyefoqncm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#idyefoqncm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#idyefoqncm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#idyefoqncm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#idyefoqncm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#idyefoqncm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#idyefoqncm .gt_spanner_row {
  border-bottom-style: hidden;
}

#idyefoqncm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#idyefoqncm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#idyefoqncm .gt_from_md > :first-child {
  margin-top: 0;
}

#idyefoqncm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#idyefoqncm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#idyefoqncm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#idyefoqncm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#idyefoqncm .gt_row_group_first td {
  border-top-width: 2px;
}

#idyefoqncm .gt_row_group_first th {
  border-top-width: 2px;
}

#idyefoqncm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#idyefoqncm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#idyefoqncm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#idyefoqncm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#idyefoqncm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#idyefoqncm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#idyefoqncm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#idyefoqncm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#idyefoqncm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#idyefoqncm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#idyefoqncm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#idyefoqncm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#idyefoqncm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#idyefoqncm .gt_left {
  text-align: left;
}

#idyefoqncm .gt_center {
  text-align: center;
}

#idyefoqncm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#idyefoqncm .gt_font_normal {
  font-weight: normal;
}

#idyefoqncm .gt_font_bold {
  font-weight: bold;
}

#idyefoqncm .gt_font_italic {
  font-style: italic;
}

#idyefoqncm .gt_super {
  font-size: 65%;
}

#idyefoqncm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#idyefoqncm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#idyefoqncm .gt_indent_1 {
  text-indent: 5px;
}

#idyefoqncm .gt_indent_2 {
  text-indent: 10px;
}

#idyefoqncm .gt_indent_3 {
  text-indent: 15px;
}

#idyefoqncm .gt_indent_4 {
  text-indent: 20px;
}

#idyefoqncm .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="couple">couple</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="couple" class="gt_row gt_center">non</td>
<td headers="n" class="gt_row gt_right">256895</td>
<td headers="percent" class="gt_row gt_right">51.6%</td></tr>
    <tr><td headers="couple" class="gt_row gt_center">oui</td>
<td headers="n" class="gt_row gt_right">240870</td>
<td headers="percent" class="gt_row gt_right">48.4%</td></tr>
    <tr><td headers="couple" class="gt_row gt_center">Total</td>
<td headers="n" class="gt_row gt_right">497765</td>
<td headers="percent" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="13-Modeles-regression.html#cb184-1" tabindex="-1"></a>dt_reg_test <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(couple) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb184-2"><a href="13-Modeles-regression.html#cb184-2" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="unqwwppraq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#unqwwppraq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#unqwwppraq thead, #unqwwppraq tbody, #unqwwppraq tfoot, #unqwwppraq tr, #unqwwppraq td, #unqwwppraq th {
  border-style: none;
}

#unqwwppraq p {
  margin: 0;
  padding: 0;
}

#unqwwppraq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#unqwwppraq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#unqwwppraq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#unqwwppraq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#unqwwppraq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#unqwwppraq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#unqwwppraq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#unqwwppraq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#unqwwppraq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#unqwwppraq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#unqwwppraq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#unqwwppraq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#unqwwppraq .gt_spanner_row {
  border-bottom-style: hidden;
}

#unqwwppraq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#unqwwppraq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#unqwwppraq .gt_from_md > :first-child {
  margin-top: 0;
}

#unqwwppraq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#unqwwppraq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#unqwwppraq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#unqwwppraq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#unqwwppraq .gt_row_group_first td {
  border-top-width: 2px;
}

#unqwwppraq .gt_row_group_first th {
  border-top-width: 2px;
}

#unqwwppraq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#unqwwppraq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#unqwwppraq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#unqwwppraq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#unqwwppraq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#unqwwppraq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#unqwwppraq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#unqwwppraq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#unqwwppraq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#unqwwppraq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#unqwwppraq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#unqwwppraq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#unqwwppraq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#unqwwppraq .gt_left {
  text-align: left;
}

#unqwwppraq .gt_center {
  text-align: center;
}

#unqwwppraq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#unqwwppraq .gt_font_normal {
  font-weight: normal;
}

#unqwwppraq .gt_font_bold {
  font-weight: bold;
}

#unqwwppraq .gt_font_italic {
  font-style: italic;
}

#unqwwppraq .gt_super {
  font-size: 65%;
}

#unqwwppraq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#unqwwppraq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#unqwwppraq .gt_indent_1 {
  text-indent: 5px;
}

#unqwwppraq .gt_indent_2 {
  text-indent: 10px;
}

#unqwwppraq .gt_indent_3 {
  text-indent: 15px;
}

#unqwwppraq .gt_indent_4 {
  text-indent: 20px;
}

#unqwwppraq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="couple">couple</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="couple" class="gt_row gt_center">non</td>
<td headers="n" class="gt_row gt_right">110040</td>
<td headers="percent" class="gt_row gt_right">51.5%</td></tr>
    <tr><td headers="couple" class="gt_row gt_center">oui</td>
<td headers="n" class="gt_row gt_right">103515</td>
<td headers="percent" class="gt_row gt_right">48.5%</td></tr>
    <tr><td headers="couple" class="gt_row gt_center">Total</td>
<td headers="n" class="gt_row gt_right">213555</td>
<td headers="percent" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Les deux bases présentent une répartition couple/non couple très proche : à Paris, environ 48% de la population est en couple.</p>
</div>
<div id="un-modèle-à-visée-principale-explicative-la-régression-logistique" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Un modèle à visée principale explicative : la régression logistique<a href="13-Modeles-regression.html#un-modèle-à-visée-principale-explicative-la-régression-logistique" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La fonction <code>glm</code> du package <strong><code>stats</code></strong> (à installer avant appel dans la librarie) est principalement utilisée pour modéliser différents types de régression : l’argument <code>family=binomial("logit")</code> permet d’utiliser un modèle logit.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="13-Modeles-regression.html#cb185-1" tabindex="-1"></a><span class="co"># install.packages(&quot;stats&quot;)</span></span>
<span id="cb185-2"><a href="13-Modeles-regression.html#cb185-2" tabindex="-1"></a><span class="fu">library</span>(stats)</span></code></pre></div>
<div id="le-modèle-initial" class="section level3 hasAnchor" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> Le modèle initial<a href="13-Modeles-regression.html#le-modèle-initial" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On crée le modèle en spécifiant la variable d’intérêt puis les variables explicatives ou l’ensemble des variables présentes dans la base si nous avons déjà procédé à une sélection des variables : c’est le cas ici donc c’est pour cela que l’on indique juste un “.” après le “~”, sinon on devrait écrire les variables une par une, ou les sctoker dans une liste et appeler la liste.</p>
<p>Même si ce type modèle doit permettre essentiellement d’expliquer un phénomène, ici être en couple par rapport à ne pas l’être, on peut l’utiliser aussi pour prédire les données. C’est pourquoi nous appliquons d’abord le logit sur la base (réduite) d’apprentissage.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="13-Modeles-regression.html#cb186-1" tabindex="-1"></a>logit_1 <span class="ot">&lt;-</span> <span class="fu">glm</span> (couple <span class="sc">~</span> ., <span class="at">data=</span>dt_reg_train, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="st">&quot;logit&quot;</span>))</span>
<span id="cb186-2"><a href="13-Modeles-regression.html#cb186-2" tabindex="-1"></a><span class="fu">summary</span>(logit_1)</span></code></pre></div>
<pre><code>
Call:
glm(formula = couple ~ ., family = binomial(&quot;logit&quot;), data = dt_reg_train)

Coefficients:
                   Estimate Std. Error  z value Pr(&gt;|z|)    
(Intercept)       -2.238207   0.015545 -143.981  &lt; 2e-16 ***
age25-54ans        2.058519   0.014127  145.712  &lt; 2e-16 ***
age55ansouplus     2.205362   0.014189  155.430  &lt; 2e-16 ***
immigresoui        0.327726   0.007185   45.614  &lt; 2e-16 ***
sexefemme         -0.371729   0.006059  -61.347  &lt; 2e-16 ***
emploien_emploi    0.318353   0.008236   38.656  &lt; 2e-16 ***
chômageau-chômage -0.215653   0.013132  -16.422  &lt; 2e-16 ***
diplomeBac        -0.045683   0.010469   -4.364 1.28e-05 ***
diplomeBac+2-3-4   0.207416   0.008971   23.120  &lt; 2e-16 ***
diplomeBac+5ou+    0.420498   0.008480   49.590  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 689465  on 497764  degrees of freedom
Residual deviance: 629614  on 497755  degrees of freedom
AIC: 629634

Number of Fisher Scoring iterations: 4</code></pre>
<p>Toutes les variables sont significatives.</p>
<!--On peut ensuite évaluer la significativité globale du modèle, : -->
<p>On va donc l’appliquer maintenant à la base test, en créant des indicateurs mesurant le taux de prédiction ou au contraire d’erreur.</p>
<p>Le modèle <code>predict</code> permet d’abord d’abord de calculer la probabilité d’être en couple pour chaque individu, l’argument <code>type="response"</code> permettant d’appliquer le modèle logistique. Il est plus intéressant d’avoir la probabilité d’une variable de type qualitative, “oui”/“non” comme la variable d’intérêt du modèle, il faut donc procéder à une transformation aboutissant à une nouvelle variable (on considère alors que si la probabilité est strictement supérieure à 0.50 alors cela équivaut à une modalité “oui”). Enfin, on crée une matrice de confusion qui est en réalité un tableau croisé entre les valeurs observées et les prédicitions du modèle ; et on calcule un taux d’erreur en rapportant la somme des éléments hors diagonale principale à la somme des observations totales (de la matrice donc).</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="13-Modeles-regression.html#cb188-1" tabindex="-1"></a><span class="co"># Modèle de prédiction pour récupérer les probabilités individuelles d&#39;être en couple</span></span>
<span id="cb188-2"><a href="13-Modeles-regression.html#cb188-2" tabindex="-1"></a>pred.proba <span class="ot">&lt;-</span> <span class="fu">predict</span>(logit_1, <span class="at">newdata =</span> dt_reg_test, <span class="at">type=</span><span class="st">&quot;response&quot;</span>)</span>
<span id="cb188-3"><a href="13-Modeles-regression.html#cb188-3" tabindex="-1"></a></span>
<span id="cb188-4"><a href="13-Modeles-regression.html#cb188-4" tabindex="-1"></a><span class="co"># On transforme les probas en variable qualitative</span></span>
<span id="cb188-5"><a href="13-Modeles-regression.html#cb188-5" tabindex="-1"></a>pred.moda <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">case_when</span>(pred.proba<span class="sc">&gt;</span><span class="fl">0.5</span> <span class="sc">~</span> <span class="st">&quot;oui&quot;</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non&quot;</span>))</span>
<span id="cb188-6"><a href="13-Modeles-regression.html#cb188-6" tabindex="-1"></a></span>
<span id="cb188-7"><a href="13-Modeles-regression.html#cb188-7" tabindex="-1"></a><span class="co"># On crée la matrice de confusion</span></span>
<span id="cb188-8"><a href="13-Modeles-regression.html#cb188-8" tabindex="-1"></a>matrice_conf <span class="ot">&lt;-</span> <span class="fu">table</span>(dt_reg_test<span class="sc">$</span>couple, pred.moda)</span>
<span id="cb188-9"><a href="13-Modeles-regression.html#cb188-9" tabindex="-1"></a>matrice_conf</span></code></pre></div>
<pre><code>     pred.moda
        non   oui
  non 60318 49722
  oui 32131 71384</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="13-Modeles-regression.html#cb190-1" tabindex="-1"></a><span class="co"># On calcule le taux d&#39;erreur</span></span>
<span id="cb190-2"><a href="13-Modeles-regression.html#cb190-2" tabindex="-1"></a>tx_erreur <span class="ot">&lt;-</span> (matrice_conf[<span class="dv">2</span>,<span class="dv">1</span>]<span class="sc">+</span>matrice_conf[<span class="dv">1</span>,<span class="dv">2</span>])<span class="sc">/</span><span class="fu">sum</span>(matrice_conf)</span>
<span id="cb190-3"><a href="13-Modeles-regression.html#cb190-3" tabindex="-1"></a>tx_erreur <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 38.32877</code></pre>
<p>On voit que parmi la modalité observée “non” de la base de données, le modèle prédit 59 825 non soit 55% de cette modalité, c’est la majorité mais cela ne semble pas non plus très élevé ; la prédiction est meilleure si on regarde la modalité “oui”, puisque 71 564 observations, soit 69% de cette modalité, se retrouvent bien en “oui”. Le taux d’erreur de 38% montre bien que le modèle ne prédit pas hyper bien.</p>
<p>Une autre façon de faire est après les deux premières étapes réécrites ici, d’ajouter la variable de prédiction à la table initiale est de créer une nouvelle variable qui indique si on a bien une correspondance entre les modalités des deux variables : l’initiale et celle prédite. Cela nous donnc donc le taux d’erreur calculé au-dessus, on retrouve bien 38,4% de correspondances inexactes.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="13-Modeles-regression.html#cb192-1" tabindex="-1"></a><span class="co"># Modèle de prédiction pour récupérer les probabilités individuelles d&#39;être en couple</span></span>
<span id="cb192-2"><a href="13-Modeles-regression.html#cb192-2" tabindex="-1"></a><span class="co">#pred.proba &lt;- predict(logit_1, newdata = dt_reg_test, type=&quot;response&quot;)</span></span>
<span id="cb192-3"><a href="13-Modeles-regression.html#cb192-3" tabindex="-1"></a></span>
<span id="cb192-4"><a href="13-Modeles-regression.html#cb192-4" tabindex="-1"></a><span class="co"># On transforme les probas en variable qualitative</span></span>
<span id="cb192-5"><a href="13-Modeles-regression.html#cb192-5" tabindex="-1"></a><span class="co">#pred.moda &lt;- factor(case_when(pred.proba&gt;0.5 ~ &quot;oui&quot;, TRUE ~ &quot;non&quot;))</span></span>
<span id="cb192-6"><a href="13-Modeles-regression.html#cb192-6" tabindex="-1"></a></span>
<span id="cb192-7"><a href="13-Modeles-regression.html#cb192-7" tabindex="-1"></a><span class="co"># On ajoute la variable de prédiction dans la table test initiale</span></span>
<span id="cb192-8"><a href="13-Modeles-regression.html#cb192-8" tabindex="-1"></a>dt_reg_test_bis <span class="ot">&lt;-</span> <span class="fu">cbind.data.frame</span>(dt_reg_test, <span class="at">var_predict=</span>pred.moda)</span>
<span id="cb192-9"><a href="13-Modeles-regression.html#cb192-9" tabindex="-1"></a><span class="co"># et on créer une variable indiquant ou non la correspondance entre</span></span>
<span id="cb192-10"><a href="13-Modeles-regression.html#cb192-10" tabindex="-1"></a><span class="co"># les modalités des deux variables</span></span>
<span id="cb192-11"><a href="13-Modeles-regression.html#cb192-11" tabindex="-1"></a>dt_reg_test_bis <span class="sc">%&gt;%</span> </span>
<span id="cb192-12"><a href="13-Modeles-regression.html#cb192-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predict_OK=</span><span class="fu">as.factor</span>(<span class="fu">case_when</span>(couple<span class="sc">==</span><span class="st">&quot;oui&quot;</span> <span class="sc">&amp;</span> var_predict<span class="sc">==</span><span class="st">&quot;oui&quot;</span> <span class="sc">~</span> <span class="st">&quot;oui&quot;</span>, </span>
<span id="cb192-13"><a href="13-Modeles-regression.html#cb192-13" tabindex="-1"></a>                                        couple<span class="sc">==</span><span class="st">&quot;non&quot;</span> <span class="sc">&amp;</span> var_predict<span class="sc">==</span><span class="st">&quot;non&quot;</span> <span class="sc">~</span> <span class="st">&quot;oui&quot;</span>,</span>
<span id="cb192-14"><a href="13-Modeles-regression.html#cb192-14" tabindex="-1"></a>                                        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;non&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb192-15"><a href="13-Modeles-regression.html#cb192-15" tabindex="-1"></a>  <span class="fu">tabyl</span>(predict_OK) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 3 × 3
  predict_OK      n percent
  &lt;fct&gt;       &lt;dbl&gt; &lt;chr&gt;  
1 non         81853 38.3%  
2 oui        131702 61.7%  
3 Total      213555 -      </code></pre>
</div>
<div id="lévaluation-du-modèle-et-la-recherche-éventuelle-dun-meilleur-modèle" class="section level3 hasAnchor" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> L’évaluation du modèle et la recherche éventuelle d’un “meilleur” modèle<a href="13-Modeles-regression.html#lévaluation-du-modèle-et-la-recherche-éventuelle-dun-meilleur-modèle" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On peut améliorer le modèle en recherchant celui qui est le “meilleur” en faisant une sélection sur les variables, plus précisément en demandant au modèle de choisir les variables les plus explicatives, car peut-être que certaines ne sont pas nécessaires à l’explication du modèle (dans notre cas, nous avons néanmoins vu que toutes les variables étaient significatives donc a priori utiles dans le modèle).</p>
<p>Pour une sélection “pas à pas”, il faut utiliser le package <strong><code>MASS</code></strong> et la fonction <code>stepAIC</code> car c’est à travers le critère AIC (“Akaike Information Criterion”,) que le modèle va chercher à être “meilleur” : plus il sera faible, meilleur il sera. On va d’abord faire cette sélection de façon “descendante” c’est-à-dire en partant du modèle initial “logit_1” ici : on part du modèle avec l’ensemble des variables et on en supprime une au fur et à mesure pour voir si le modèle est “meilleur”.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="13-Modeles-regression.html#cb194-1" tabindex="-1"></a><span class="co"># install.packages(&quot;MASS)</span></span>
<span id="cb194-2"><a href="13-Modeles-regression.html#cb194-2" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb194-3"><a href="13-Modeles-regression.html#cb194-3" tabindex="-1"></a>logit_backward <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(logit_1, </span>
<span id="cb194-4"><a href="13-Modeles-regression.html#cb194-4" tabindex="-1"></a>                          <span class="at">scope=</span><span class="fu">list</span>(<span class="at">lower=</span><span class="st">&quot;couple ~ 1&quot;</span>, </span>
<span id="cb194-5"><a href="13-Modeles-regression.html#cb194-5" tabindex="-1"></a>                          <span class="at">upper=</span><span class="st">&quot;couple ~ age +  immigres + sexe + emploi + chômage + </span></span>
<span id="cb194-6"><a href="13-Modeles-regression.html#cb194-6" tabindex="-1"></a><span class="st">                          diplome&quot;</span>),</span>
<span id="cb194-7"><a href="13-Modeles-regression.html#cb194-7" tabindex="-1"></a>                          <span class="at">direction=</span><span class="st">&quot;backward&quot;</span>)</span></code></pre></div>
<pre><code>Start:  AIC=629633.9
couple ~ age + immigres + sexe + emploi + chômage + diplome

           Df Deviance    AIC
&lt;none&gt;          629614 629634
- chômage   1   629885 629903
- emploi    1   631112 631130
- immigres  1   631710 631728
- diplome   3   633114 633128
- sexe      1   633394 633412
- age       2   665926 665942</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="13-Modeles-regression.html#cb196-1" tabindex="-1"></a>logit_backward</span></code></pre></div>
<pre><code>
Call:  glm(formula = couple ~ age + immigres + sexe + emploi + chômage + 
    diplome, family = binomial(&quot;logit&quot;), data = dt_reg_train)

Coefficients:
      (Intercept)        age25-54ans     age55ansouplus        immigresoui  
         -2.23821            2.05852            2.20536            0.32773  
        sexefemme    emploien_emploi  chômageau-chômage         diplomeBac  
         -0.37173            0.31835           -0.21565           -0.04568  
 diplomeBac+2-3-4    diplomeBac+5ou+  
          0.20742            0.42050  

Degrees of Freedom: 497764 Total (i.e. Null);  497755 Residual
Null Deviance:      689500 
Residual Deviance: 629600   AIC: 629600</code></pre>
<p>La sortie n’affiche que le “meilleur” modèle, et c’est donc bien celui qu’on avait mis avec l’ensemble des variables.</p>
<p>Pour une sélection des variables de façon “ascendante”, en partant d’un modèle sans variable puis on ajoute une à une les variables. On utilise la même fonction mais en changeant les paramètres et en créant un modèle “vide” avant :</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="13-Modeles-regression.html#cb198-1" tabindex="-1"></a>logit_0 <span class="ot">&lt;-</span> <span class="fu">glm</span>(couple <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data=</span>dt_reg_train, <span class="at">family=</span><span class="fu">binomial</span>(<span class="st">&quot;logit&quot;</span>))</span>
<span id="cb198-2"><a href="13-Modeles-regression.html#cb198-2" tabindex="-1"></a>logit_forward <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(logit_0, </span>
<span id="cb198-3"><a href="13-Modeles-regression.html#cb198-3" tabindex="-1"></a>                         <span class="at">scope=</span><span class="fu">list</span>(<span class="at">lower=</span><span class="st">&quot;couple ~ 1&quot;</span>, </span>
<span id="cb198-4"><a href="13-Modeles-regression.html#cb198-4" tabindex="-1"></a>                         <span class="at">upper=</span><span class="st">&quot;couple ~ age +  immigres + sexe + emploi + chômage + diplome&quot;</span>),</span>
<span id="cb198-5"><a href="13-Modeles-regression.html#cb198-5" tabindex="-1"></a>                         <span class="at">direction=</span><span class="st">&quot;forward&quot;</span>)</span></code></pre></div>
<pre><code>Start:  AIC=689534.8
couple ~ 1

           Df Deviance    AIC
+ age       2   642942 642948
+ diplome   3   678639 678647
+ emploi    1   679583 679587
+ sexe      1   685236 685240
+ immigres  1   687388 687392
+ chômage   1   687893 687897
&lt;none&gt;          689533 689535

Step:  AIC=642948
couple ~ age

           Df Deviance    AIC
+ emploi    1   638621 638629
+ sexe      1   638732 638740
+ diplome   3   638796 638808
+ chômage   1   641243 641251
+ immigres  1   641987 641995
&lt;none&gt;          642942 642948

Step:  AIC=638628.6
couple ~ age + emploi

           Df Deviance    AIC
+ sexe      1   634890 634900
+ diplome   3   635784 635798
+ immigres  1   637363 637373
+ chômage   1   638502 638512
&lt;none&gt;          638621 638629

Step:  AIC=634900
couple ~ age + emploi + sexe

           Df Deviance    AIC
+ diplome   3   632176 632192
+ immigres  1   633584 633596
+ chômage   1   634711 634723
&lt;none&gt;          634890 634900

Step:  AIC=632192.4
couple ~ age + emploi + sexe + diplome

           Df Deviance    AIC
+ immigres  1   630139 630157
+ chômage   1   631990 632008
&lt;none&gt;          632176 632192

Step:  AIC=630157.4
couple ~ age + emploi + sexe + diplome + immigres

          Df Deviance    AIC
+ chômage  1   629873 629893
&lt;none&gt;         630139 630157

Step:  AIC=629892.9
couple ~ age + emploi + sexe + diplome + immigres + chômage</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="13-Modeles-regression.html#cb200-1" tabindex="-1"></a>logit_forward</span></code></pre></div>
<pre><code>
Call:  glm(formula = couple ~ age + emploi + sexe + diplome + immigres + 
    chômage, family = binomial(&quot;logit&quot;), data = dt_reg_train)

Coefficients:
      (Intercept)        age25-54ans     age55ansouplus    emploien_emploi  
         -2.23212            2.05737            2.20583            0.31617  
        sexefemme         diplomeBac   diplomeBac+2-3-4    diplomeBac+5ou+  
         -0.37080           -0.04229            0.19902            0.41998  
      immigresoui  chômageau-chômage  
          0.32927           -0.21312  

Degrees of Freedom: 497764 Total (i.e. Null);  497755 Residual
Null Deviance:      689500 
Residual Deviance: 629900   AIC: 629900</code></pre>
<p>Le taux d’AIC diminue à chaque variable ajoutée donc le meilleur modèle est bien celui avec l’ensemble des variables explicatives mises dans le modèle initial.</p>
</div>
<div id="le-modèle-final-et-linterprétation-des-résultats" class="section level3 hasAnchor" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> Le modèle final et l’interprétation des résultats<a href="13-Modeles-regression.html#le-modèle-final-et-linterprétation-des-résultats" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Finalement, dans une visée plus explicative que prédictive, on peut estimer notre modèle sur l’ensemble de la base et étudier plus précisément les résultats avec les <em>odds-ratios</em> ou rapports des côtes par exemple pour commenter plus directement les coefficients. Ces <em>odds-ratios</em> correspondent à l’exponentiel des coefficients initiaux de la régression. Ils se lisent par rapport à 1 : il est égale à 1 si les deux côtes sont identiques donc s’il n’y a pas de différence de probabilité d’être en couple selon qu’on est une femme ou un homme, il est supérieur à 1 si ici la femme a une probabilité supérieure à celle de l’homme d’être en couple, et il est inférieur à 1 si la femme a une probabilité inférieure à celle de l’homme d’être en couple.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="13-Modeles-regression.html#cb202-1" tabindex="-1"></a>logit_VF <span class="ot">&lt;-</span> <span class="fu">glm</span> (couple <span class="sc">~</span> ., <span class="at">data=</span>dt_reg, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="st">&quot;logit&quot;</span>))</span>
<span id="cb202-2"><a href="13-Modeles-regression.html#cb202-2" tabindex="-1"></a><span class="fu">summary</span>(logit_VF)</span></code></pre></div>
<pre><code>
Call:
glm(formula = couple ~ ., family = binomial(&quot;logit&quot;), data = dt_reg)

Coefficients:
                   Estimate Std. Error  z value Pr(&gt;|z|)    
(Intercept)       -2.237347   0.013000 -172.104  &lt; 2e-16 ***
age25-54ans        2.061241   0.011813  174.494  &lt; 2e-16 ***
age55ansouplus     2.206901   0.011861  186.059  &lt; 2e-16 ***
immigresoui        0.329940   0.006011   54.890  &lt; 2e-16 ***
sexefemme         -0.371608   0.005069  -73.316  &lt; 2e-16 ***
emploien_emploi    0.314977   0.006891   45.709  &lt; 2e-16 ***
chômageau-chômage -0.215868   0.010977  -19.665  &lt; 2e-16 ***
diplomeBac        -0.034625   0.008754   -3.955 7.64e-05 ***
diplomeBac+2-3-4   0.203998   0.007504   27.185  &lt; 2e-16 ***
diplomeBac+5ou+    0.427777   0.007093   60.313  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 985384  on 711319  degrees of freedom
Residual deviance: 899777  on 711310  degrees of freedom
AIC: 899797

Number of Fisher Scoring iterations: 4</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="13-Modeles-regression.html#cb204-1" tabindex="-1"></a><span class="co"># Résumé des résultats sous forme de tableau avec les odds-ratio</span></span>
<span id="cb204-2"><a href="13-Modeles-regression.html#cb204-2" tabindex="-1"></a><span class="co"># avec la librairie &quot;questionr&quot; d&#39;abord</span></span>
<span id="cb204-3"><a href="13-Modeles-regression.html#cb204-3" tabindex="-1"></a><span class="co">#install.packages(questionr)</span></span>
<span id="cb204-4"><a href="13-Modeles-regression.html#cb204-4" tabindex="-1"></a><span class="fu">library</span>(questionr)</span>
<span id="cb204-5"><a href="13-Modeles-regression.html#cb204-5" tabindex="-1"></a><span class="fu">odds.ratio</span>(logit_VF)</span></code></pre></div>
<pre><code># A tibble: 10 × 4
      OR `2.5 %` `97.5 %`         p
   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 0.107   0.104    0.109 0        
 2 7.86    7.68     8.04  0        
 3 9.09    8.88     9.30  0        
 4 1.39    1.37     1.41  0        
 5 0.690   0.683    0.697 0        
 6 1.37    1.35     1.39  0        
 7 0.806   0.789    0.823 4.29e- 86
 8 0.966   0.950    0.983 7.64e-  5
 9 1.23    1.21     1.24  9.64e-163
10 1.53    1.51     1.56  0        </code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="13-Modeles-regression.html#cb206-1" tabindex="-1"></a><span class="co"># puis avec la librarie &quot;forestmodel&quot; pour avoir un meilleur rendu</span></span>
<span id="cb206-2"><a href="13-Modeles-regression.html#cb206-2" tabindex="-1"></a><span class="co">#install.packages(&quot;forestmodel&quot;)</span></span>
<span id="cb206-3"><a href="13-Modeles-regression.html#cb206-3" tabindex="-1"></a><span class="fu">library</span>(forestmodel)</span>
<span id="cb206-4"><a href="13-Modeles-regression.html#cb206-4" tabindex="-1"></a><span class="fu">forest_model</span>(logit_VF)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-134-1.svg" width="672" /></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="13-Modeles-regression.html#cb207-1" tabindex="-1"></a><span class="co"># ou encore avec &quot;gt_summary&quot; pour avoir un autre rendu</span></span>
<span id="cb207-2"><a href="13-Modeles-regression.html#cb207-2" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb207-3"><a href="13-Modeles-regression.html#cb207-3" tabindex="-1"></a><span class="fu">theme_gtsummary_language</span>(<span class="st">&quot;fr&quot;</span>, <span class="at">decimal.mark =</span> <span class="st">&quot;,&quot;</span>, <span class="at">big.mark=</span><span class="st">&quot; &quot;</span>)</span>
<span id="cb207-4"><a href="13-Modeles-regression.html#cb207-4" tabindex="-1"></a>logit_VF <span class="sc">%&gt;%</span> </span>
<span id="cb207-5"><a href="13-Modeles-regression.html#cb207-5" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(<span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb207-6"><a href="13-Modeles-regression.html#cb207-6" tabindex="-1"></a>  <span class="fu">add_global_p</span>(<span class="at">keep=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb207-7"><a href="13-Modeles-regression.html#cb207-7" tabindex="-1"></a>  <span class="fu">modify_header</span>(label <span class="sc">~</span> <span class="st">&quot;**Variable**&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb207-8"><a href="13-Modeles-regression.html#cb207-8" tabindex="-1"></a>  <span class="fu">modify_caption</span>(<span class="st">&quot;**Tableau de résultats. Variables expliquant le fait d&#39;être en couple à Paris**&quot;</span>)</span></code></pre></div>
<div id="qkgcjfqrpy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qkgcjfqrpy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qkgcjfqrpy thead, #qkgcjfqrpy tbody, #qkgcjfqrpy tfoot, #qkgcjfqrpy tr, #qkgcjfqrpy td, #qkgcjfqrpy th {
  border-style: none;
}

#qkgcjfqrpy p {
  margin: 0;
  padding: 0;
}

#qkgcjfqrpy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qkgcjfqrpy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qkgcjfqrpy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qkgcjfqrpy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qkgcjfqrpy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qkgcjfqrpy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qkgcjfqrpy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qkgcjfqrpy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qkgcjfqrpy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qkgcjfqrpy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qkgcjfqrpy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qkgcjfqrpy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qkgcjfqrpy .gt_spanner_row {
  border-bottom-style: hidden;
}

#qkgcjfqrpy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qkgcjfqrpy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qkgcjfqrpy .gt_from_md > :first-child {
  margin-top: 0;
}

#qkgcjfqrpy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qkgcjfqrpy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qkgcjfqrpy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qkgcjfqrpy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qkgcjfqrpy .gt_row_group_first td {
  border-top-width: 2px;
}

#qkgcjfqrpy .gt_row_group_first th {
  border-top-width: 2px;
}

#qkgcjfqrpy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qkgcjfqrpy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qkgcjfqrpy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qkgcjfqrpy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qkgcjfqrpy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qkgcjfqrpy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qkgcjfqrpy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qkgcjfqrpy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qkgcjfqrpy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qkgcjfqrpy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qkgcjfqrpy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qkgcjfqrpy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qkgcjfqrpy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qkgcjfqrpy .gt_left {
  text-align: left;
}

#qkgcjfqrpy .gt_center {
  text-align: center;
}

#qkgcjfqrpy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qkgcjfqrpy .gt_font_normal {
  font-weight: normal;
}

#qkgcjfqrpy .gt_font_bold {
  font-weight: bold;
}

#qkgcjfqrpy .gt_font_italic {
  font-style: italic;
}

#qkgcjfqrpy .gt_super {
  font-size: 65%;
}

#qkgcjfqrpy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qkgcjfqrpy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qkgcjfqrpy .gt_indent_1 {
  text-indent: 5px;
}

#qkgcjfqrpy .gt_indent_2 {
  text-indent: 10px;
}

#qkgcjfqrpy .gt_indent_3 {
  text-indent: 15px;
}

#qkgcjfqrpy .gt_indent_4 {
  text-indent: 20px;
}

#qkgcjfqrpy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <caption><span id="tab:unnamed-chunk-134">Table 14.1: </span><strong>Tableau de résultats. Variables expliquant le fait d’être en couple à Paris</strong></caption>
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Variable&lt;/strong&gt;"><strong>Variable</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;OR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>OR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;95% IC&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>95% IC</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;p-valeur&lt;/strong&gt;"><strong>p-valeur</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">age</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    18-24ans</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    25-54ans</td>
<td headers="estimate" class="gt_row gt_center">7,86</td>
<td headers="ci" class="gt_row gt_center">7,68 – 8,04</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    55ansouplus</td>
<td headers="estimate" class="gt_row gt_center">9,09</td>
<td headers="ci" class="gt_row gt_center">8,88 – 9,30</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">immigres</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    non</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    oui</td>
<td headers="estimate" class="gt_row gt_center">1,39</td>
<td headers="ci" class="gt_row gt_center">1,37 – 1,41</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">sexe</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    homme</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    femme</td>
<td headers="estimate" class="gt_row gt_center">0,69</td>
<td headers="ci" class="gt_row gt_center">0,68 – 0,70</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">emploi</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    non_emploi</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    en_emploi</td>
<td headers="estimate" class="gt_row gt_center">1,37</td>
<td headers="ci" class="gt_row gt_center">1,35 – 1,39</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">chômage</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    non_chômage</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    au-chômage</td>
<td headers="estimate" class="gt_row gt_center">0,81</td>
<td headers="ci" class="gt_row gt_center">0,79 – 0,82</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">diplome</td>
<td headers="estimate" class="gt_row gt_center"><br /></td>
<td headers="ci" class="gt_row gt_center"><br /></td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Peu_pas_dipl</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br /></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Bac</td>
<td headers="estimate" class="gt_row gt_center">0,97</td>
<td headers="ci" class="gt_row gt_center">0,95 – 0,98</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Bac+2-3-4</td>
<td headers="estimate" class="gt_row gt_center">1,23</td>
<td headers="ci" class="gt_row gt_center">1,21 – 1,24</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Bac+5ou+</td>
<td headers="estimate" class="gt_row gt_center">1,53</td>
<td headers="ci" class="gt_row gt_center">1,51 – 1,56</td>
<td headers="p.value" class="gt_row gt_center"><0,001</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> OR = rapport de cotes, IC = intervalle de confiance</td>
    </tr>
  </tfoot>
</table>
</div>
<p>On privilégiera plutôt les deux derniers types de tableaux : ainsi, on note que la probabilité d’être en couple est 7,86 fois plus élevée si on a entre 25 et 54 ans et 9,09 fois plus élevée si on a 55 ans ou plus ; c’est donc l’âge le principal déterminant dans ce modèle du fait d’être en couple. Les autres variables sont néanmoins aussi significatives mais d’un ordre de grandeur moindre : la probabilité d’être en couple est 1,39 fois plus élevée si on est immigré, elle est 1,37 fois plus élevée si on est en emploi, ou encore elle est plus élevée plus on est diplômé au-delà du bac Dit autrement, la probabilité d’être en couple augmente de 39% ((1.39-1)*100) si on est immigré par rapport au fait de ne pas l’être. En revanche, la probabilité d’être en couple est plus faible si on est au chômage de 0.81 fois, autrement dit elle diminue de 19% (1-0.81), elle l’est également si on est une femme (0.69, soit -31%), ou si on a le bac par rapport à ne pas avoir de diplôme (0.97, soit -3%).</p>
<p>On peut aussi vouloir visualiser ces résultats, on peut pour cela utiliser la librarie <strong><code>GGally</code></strong> et la fonction <code>ggcoef_model()</code>.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="13-Modeles-regression.html#cb208-1" tabindex="-1"></a><span class="co"># Résumé des résultats sous forme graphqiue</span></span>
<span id="cb208-2"><a href="13-Modeles-regression.html#cb208-2" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb208-3"><a href="13-Modeles-regression.html#cb208-3" tabindex="-1"></a><span class="fu">ggcoef_model</span>(logit_VF, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb208-4"><a href="13-Modeles-regression.html#cb208-4" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Varibles expliquant le fait d&#39;être en couple à Paris&quot;</span>) </span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-135-1.svg" width="672" />
C’est peut-être le meilleur rendu…</p>
</div>
</div>
<div id="un-modèle-à-visée-principale-prédictive-labre-de-décision" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Un modèle à visée principale prédictive : l’abre de décision<a href="13-Modeles-regression.html#un-modèle-à-visée-principale-prédictive-labre-de-décision" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On va procéder à la même analyse en cherchant, cette fois, à prédire si un individu sera en couple ou non à partir des variables sélectionnées précédemment.<br />
On repart donc des deux tables créées et on va utiliser un modèle dit d’apprentissage supervisé, l’abre de décision. Sa construction repose sur un partitionnement récursif des observations qui se fait à partir de noeuds coupés, ces coupures pourront répondre à des règles et des conditions à spécifier ou faire varier pour avoir un meilleur modèle.<br />
Ici on va utiliser un arbre de classification puisque notre variable est qualitative (binaire).</p>
<p>C’est le package <strong><code>rpart</code></strong> qui est spécialisé dans les modèles d’arbres de décision, à installer donc d’abord puis à appeler dans la librairie ; le package <strong><code>rpart.plot</code></strong> permet, lui, d’avoir un arbre plus esthétique et informatif.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="13-Modeles-regression.html#cb209-1" tabindex="-1"></a><span class="co"># install.packages(&quot;rpart&quot;)</span></span>
<span id="cb209-2"><a href="13-Modeles-regression.html#cb209-2" tabindex="-1"></a><span class="co"># install.packages(&quot;rpart.plot&quot;)</span></span>
<span id="cb209-3"><a href="13-Modeles-regression.html#cb209-3" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb209-4"><a href="13-Modeles-regression.html#cb209-4" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span></code></pre></div>
<div id="le-modèle-initial-1" class="section level3 hasAnchor" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> Le modèle initial<a href="13-Modeles-regression.html#le-modèle-initial-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>La spécification du modèle est assez simple, on précise la variable d’intérêt, les éventuelles variables explicatives ou toutes celles qui sont dans la table avec le <code>.</code> (comme précédemment pour le modèle logit), la base de données sur laquelle appliquer le modèle, et dans l’argument <code>method=</code> on spécifie le type de modèle, soit “class” pour une variable d’intérêt qualitative ou binaire, soit “anova” pour une variable d’intérêt quantitative ou continue.</p>
<p>On va d’abord appliquer le modèle sur notre échantillon d’apprentissage ou d’entraînement :</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="13-Modeles-regression.html#cb210-1" tabindex="-1"></a>arbre_1 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(couple <span class="sc">~</span> ., <span class="at">data=</span>dt_reg_train, <span class="at">method=</span><span class="st">&quot;class&quot;</span>)</span>
<span id="cb210-2"><a href="13-Modeles-regression.html#cb210-2" tabindex="-1"></a>arbre_1</span></code></pre></div>
<pre><code>n= 497765 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 497765 240870 non (0.5160970 0.4839030)  
   2) age=18-24ans 62622   6706 non (0.8929130 0.1070870) *
   3) age=25-54ans,55ansouplus 435143 200979 oui (0.4618689 0.5381311)  
     6) sexe=femme 232444 113694 non (0.5108757 0.4891243)  
      12) age=55ansouplus 95021  39614 non (0.5831027 0.4168973) *
      13) age=25-54ans 137423  63343 oui (0.4609345 0.5390655) *
     7) sexe=homme 202699  82229 oui (0.4056705 0.5943295)  
      14) chômage=au-chômage 15861   6672 non (0.5793456 0.4206544) *
      15) chômage=non_chômage 186838  73040 oui (0.3909269 0.6090731) *</code></pre>
<p>Le modèle nous donne d’abord les résultats en format texte, ce sont des indications sur les différentes “noeuds” puis “branches” de l’arbre, etc. : “node” pour noeud et son numéro, “split” pour la condition de coupure/le critère de décision, “n” pour le nombre total d’observations dans un noeud, “loss” le nombre d’observations qui n’appartient pas à la modalité prédite, “yval” la modalité prédite pour les individus présents à l’étape du noeud, et “yprob” la proportion d’observations pour les individus présents à l’étape du noeud qui prend la valeur prédite en seconde position. Le petit astérix “*” précise que le noeud est une feuille (“terminal”).</p>
<p>Par exemple, ici le premier noeud indiqué “root” représente l’ensemble de l’échantillon (c’est la “racine” de l’arbre), soit 497 765 observations, et comme la modalité prédite est “non”, il y a 51,7% d’observations qui ne sont pas en couple, contre 48% qui le sont soit 240 358 observations (celles qu’on perd à cette étape donc). La première variable discriminante est l’âge : ceux ayant entre 18 et 24 ans forment une première branche et un groupe qui n’est pas en couple, alors que les plus de 25 ans forment l’autre branche et un groupe qui est en couple. Ensuite, pour ce dernier groupe, une autre division se forme selon le sexe : être une femme va former un autre groupe qui ne sera pas en couple, lui-même se divisera encore en deux groupes selon l’âge avec la tranche des 55 ans ou plus qui ne seront pas en couple. Etc.</p>
<p>On peut regarder quelles sont les variables les plus importantes dans le modèle par ordre :</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="13-Modeles-regression.html#cb212-1" tabindex="-1"></a>arbre_1<span class="sc">$</span>variable.importance</span></code></pre></div>
<pre><code>       age       sexe    chômage     emploi    diplome 
22019.5780  2396.8610  1038.0589   720.2897   352.7738 </code></pre>
<p>Le diplôme est la variable la plus discriminante, comme on l’avait supposé puisque c’était la première variable qui divisait notre échantillon, ensuite vient le fait d’être une femme ou un homme, etc., et en tout dernier le diplôme.</p>
<p>On va mieux étudier cela avec le résultat visuel.<br />
Pour avoir ainsi graphiquement l’arbre, il faut appeler la fonction <code>rpart.plot()</code> du même package, l’argument “extra” permettant de préciser le type de modèle : “106” pour des modèles en classes avec une variable qualitative et binaire, “104” pour des modèles en classes mais avec une variable d’intérêt qualitative avec plus de 2 modalités, et “100” pour les autres modèles.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="13-Modeles-regression.html#cb214-1" tabindex="-1"></a><span class="co"># On dessine l&#39;arbre</span></span>
<span id="cb214-2"><a href="13-Modeles-regression.html#cb214-2" tabindex="-1"></a><span class="fu">rpart.plot</span>(arbre_1, <span class="at">extra=</span><span class="dv">106</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-139-1.svg" width="672" /></p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="13-Modeles-regression.html#cb215-1" tabindex="-1"></a><span class="co"># ou avec la librarie `rattle`</span></span>
<span id="cb215-2"><a href="13-Modeles-regression.html#cb215-2" tabindex="-1"></a><span class="co"># install.packages(&quot;rattle&quot;)</span></span>
<span id="cb215-3"><a href="13-Modeles-regression.html#cb215-3" tabindex="-1"></a><span class="co"># library(rattle)</span></span>
<span id="cb215-4"><a href="13-Modeles-regression.html#cb215-4" tabindex="-1"></a><span class="co"># fancyRpartPlot(arbre_1)</span></span></code></pre></div>
<p>Au sommet de l’arbre on a donc la racine (qui est le 1er noeud), puis il se divise en 2 branches pour aboutir à deux autres noeuds, etc.<br />
On voit donc que la branche partant sur la gauche, c’est le cas où la variable d’âge est égale à la modalité “18-24 ans” car on voit le “yes” qui est encadré (et ça sera le cas à chaque fois même si ce n’est pas de nouveau inscrit, autrement dit la branche partant sur la gauche sera la modalité “oui” de la variable).<br />
Il y a chaque fois 3 données indiquées :</p>
<ul>
<li>d’abord, la modalité prédite par le modèle lorsqu’on est dans le groupe considéré, par exemple pour la feuille terminale à gauche, donc pour les 18-24 ans, la modalité prédite sera le “non” donc pas en couple, on pourra vérifier dans les données en récupérant la modalité prédite pour chaque observation, pour tous les individus de 18-24 ans la modalité prédite est “non” ;</li>
<li>ensuite, parmi les individus de ce groupe, donc les 18-24 ans, 11% sont en couple, ;</li>
<li>et enfin, les 18-24 ans représentent 13% de la population (de notre base d’apprentissage).<br />
Autrement dit, 13% des individus de notre population ont 18-24 ans avec une probabilité d’être en couple de 13%.</li>
</ul>
<p>L’autre branche indique les individidus qui prennent toutes les autres modalités de la variable, soit les 25 ans ou plus, pour lesquels la modalité prédite sera oui, ils ont 54% à être en couple et la probabilité prédite sera de 87%.<br />
Tout en bas, se trouvent les feuilles de l’arbre, c’est lorsqu’il n’y a plus aucune branche qui part du noeud en question.</p>
<p>Ainsi, 3% de la base (d’apprentissage) sont des individus de plus de 24 ans, hômmes et au chômage, qui ont une probabilité de 42% d’être en couple ; ou encore, 19% de notre population (base d’apprentissage) sont des femmes de 55 ans ou plus et qui ont une probabilité de 42% également d’être en couple.</p>
</div>
<div id="lévaluation-du-modèle" class="section level3 hasAnchor" number="14.3.2">
<h3><span class="header-section-number">14.3.2</span> L’évaluation du modèle<a href="13-Modeles-regression.html#lévaluation-du-modèle" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>De la même façon que précédemment, on peut vérifier la bonne (ou non) prédiction du modèle en l’appliquant sur l’échantillon dit test, puis en comparant les proportions prédites avec celles effectivement observées dans la base dans la matrice de confusion et enfin en calculant un taux de concordance ou au contraire un taux d’erreur à partir de cette une matrice de confusion :</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="13-Modeles-regression.html#cb216-1" tabindex="-1"></a><span class="co"># Modèle appliqué sur l&#39;échantillon test</span></span>
<span id="cb216-2"><a href="13-Modeles-regression.html#cb216-2" tabindex="-1"></a>predict_test <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_1, dt_reg_test, <span class="at">type=</span><span class="st">&quot;class&quot;</span>)</span>
<span id="cb216-3"><a href="13-Modeles-regression.html#cb216-3" tabindex="-1"></a></span>
<span id="cb216-4"><a href="13-Modeles-regression.html#cb216-4" tabindex="-1"></a><span class="co"># Comparaison des résultats - Matrice de confusion</span></span>
<span id="cb216-5"><a href="13-Modeles-regression.html#cb216-5" tabindex="-1"></a>mat_confusion <span class="ot">&lt;-</span> <span class="fu">table</span>(dt_reg_test<span class="sc">$</span>couple, predict_test)</span>
<span id="cb216-6"><a href="13-Modeles-regression.html#cb216-6" tabindex="-1"></a>mat_confusion</span></code></pre></div>
<pre><code>     predict_test
        non   oui
  non 51720 58320
  oui 22410 81105</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="13-Modeles-regression.html#cb218-1" tabindex="-1"></a><span class="co"># Taux de concordance : rapport entre la somme des éléments </span></span>
<span id="cb218-2"><a href="13-Modeles-regression.html#cb218-2" tabindex="-1"></a><span class="co"># de la diagonale principale et la somme des observations </span></span>
<span id="cb218-3"><a href="13-Modeles-regression.html#cb218-3" tabindex="-1"></a><span class="co"># totales (soit de la matrice)</span></span>
<span id="cb218-4"><a href="13-Modeles-regression.html#cb218-4" tabindex="-1"></a>tx_concordance <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">diag</span>(mat_confusion) <span class="sc">/</span> <span class="fu">sum</span>(mat_confusion))</span>
<span id="cb218-5"><a href="13-Modeles-regression.html#cb218-5" tabindex="-1"></a>tx_concordance <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 62.19709</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="13-Modeles-regression.html#cb220-1" tabindex="-1"></a><span class="co"># Taux d&#39;erreur</span></span>
<span id="cb220-2"><a href="13-Modeles-regression.html#cb220-2" tabindex="-1"></a>tx_erreur <span class="ot">&lt;-</span> (mat_confusion[<span class="dv">2</span>,<span class="dv">1</span>] <span class="sc">+</span> mat_confusion[<span class="dv">1</span>, <span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(mat_confusion)</span>
<span id="cb220-3"><a href="13-Modeles-regression.html#cb220-3" tabindex="-1"></a>tx_erreur <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 37.80291</code></pre>
<p>On peut regarder aussi ce que cela donne sur la base d’apprentissage.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="13-Modeles-regression.html#cb222-1" tabindex="-1"></a>predict_train <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_1, dt_reg_train, <span class="at">type=</span><span class="st">&quot;class&quot;</span>)</span>
<span id="cb222-2"><a href="13-Modeles-regression.html#cb222-2" tabindex="-1"></a>mat_confusion_1 <span class="ot">&lt;-</span> <span class="fu">table</span>(dt_reg_train<span class="sc">$</span>couple, predict_train)</span>
<span id="cb222-3"><a href="13-Modeles-regression.html#cb222-3" tabindex="-1"></a>mat_confusion_1</span></code></pre></div>
<pre><code>     predict_train
         non    oui
  non 120512 136383
  oui  52992 187878</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="13-Modeles-regression.html#cb224-1" tabindex="-1"></a>tx_erreur_1 <span class="ot">&lt;-</span> (mat_confusion_1[<span class="dv">2</span>,<span class="dv">1</span>] <span class="sc">+</span> mat_confusion_1[<span class="dv">1</span>, <span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(mat_confusion_1)</span>
<span id="cb224-2"><a href="13-Modeles-regression.html#cb224-2" tabindex="-1"></a>tx_erreur_1 <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>[1] 38.04506</code></pre>
<p>Dans les deux cas, les taux d’erreur sont assez élevés, d’environ 38%. Le modèle ne prédit pas hyper bien. On peut noter qu’on a pratiquement le même taux d’erreur que le modèle logit réalisé précédemment…</p>
<p>Vérifions si nous pouvons l’améliorer en modifiant les paramètres de construction de l’arbre, c’est-à-dire en jouant sur les conditions de coupure d’un noeud et sur les règles d’arrêt de ces coupures. On l’effectue avec la fonction <code>rpart.control()</code> avec les arguments suivants (règles d’arrêt principalement) : <code>minsplit=</code> donne le nombre minimum d’observations (individus) présentes à l’étape d’un noeud pour envisager une coupure ; <code>minbucket=</code> qui donne le nombre minimum d’observations/individus présentes à l’étape d’un noeud qu’engendrerait la coupure du noeud parent ; <code>maxdepth</code> qui donne la profondeur de l’arbre ; et <code>cp=</code> qui est un paramètre de complexité (plus il est petit, plus grand est l’arbre de régression).</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="13-Modeles-regression.html#cb226-1" tabindex="-1"></a><span class="co"># Définition des règles de décision</span></span>
<span id="cb226-2"><a href="13-Modeles-regression.html#cb226-2" tabindex="-1"></a>ajust_param <span class="ot">&lt;-</span> <span class="fu">rpart.control</span>(<span class="at">minsplit =</span> <span class="dv">50</span>, <span class="at">minbucket =</span> <span class="dv">50</span>, <span class="at">maxdepth =</span> <span class="dv">10</span>, <span class="at">cp=</span><span class="dv">0</span>)</span>
<span id="cb226-3"><a href="13-Modeles-regression.html#cb226-3" tabindex="-1"></a></span>
<span id="cb226-4"><a href="13-Modeles-regression.html#cb226-4" tabindex="-1"></a><span class="co"># Ajustement du modèle en indiquant le paramètre &quot;control&quot;</span></span>
<span id="cb226-5"><a href="13-Modeles-regression.html#cb226-5" tabindex="-1"></a>arbre_2 <span class="ot">&lt;-</span> <span class="fu">rpart</span>(couple <span class="sc">~</span> ., <span class="at">data=</span>dt_reg_train, <span class="at">method=</span><span class="st">&quot;class&quot;</span>, </span>
<span id="cb226-6"><a href="13-Modeles-regression.html#cb226-6" tabindex="-1"></a>                 <span class="at">control =</span> ajust_param)</span>
<span id="cb226-7"><a href="13-Modeles-regression.html#cb226-7" tabindex="-1"></a></span>
<span id="cb226-8"><a href="13-Modeles-regression.html#cb226-8" tabindex="-1"></a><span class="co"># On étudie de nouveau la matrice de confusion et </span></span>
<span id="cb226-9"><a href="13-Modeles-regression.html#cb226-9" tabindex="-1"></a><span class="co"># le taux d&#39;erreur associé au nouveau modèle sur la base test</span></span>
<span id="cb226-10"><a href="13-Modeles-regression.html#cb226-10" tabindex="-1"></a>predict_test_1 <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_2, dt_reg_test, <span class="at">type=</span><span class="st">&quot;class&quot;</span>)</span>
<span id="cb226-11"><a href="13-Modeles-regression.html#cb226-11" tabindex="-1"></a>mat_confusion_ajust <span class="ot">&lt;-</span> <span class="fu">table</span>(dt_reg_test<span class="sc">$</span>couple, predict_test_1)</span>
<span id="cb226-12"><a href="13-Modeles-regression.html#cb226-12" tabindex="-1"></a>mat_confusion_ajust</span></code></pre></div>
<pre><code>     predict_test_1
        non   oui
  non 56439 53601
  oui 24066 79449</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="13-Modeles-regression.html#cb228-1" tabindex="-1"></a>tx_erreur_1 <span class="ot">&lt;-</span> (mat_confusion_ajust[<span class="dv">2</span>,<span class="dv">1</span>] <span class="sc">+</span> mat_confusion_ajust[<span class="dv">1</span>, <span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(mat_confusion_ajust) <span class="sc">*</span><span class="dv">100</span></span>
<span id="cb228-2"><a href="13-Modeles-regression.html#cb228-2" tabindex="-1"></a>tx_erreur_1</span></code></pre></div>
<pre><code>[1] 36.36862</code></pre>
<p>On peut l’appliquer de même à l’échantillon d’apprentissage :</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="13-Modeles-regression.html#cb230-1" tabindex="-1"></a><span class="co"># Modèle appliqué sur l&#39;échantillon test</span></span>
<span id="cb230-2"><a href="13-Modeles-regression.html#cb230-2" tabindex="-1"></a>predict_train <span class="ot">&lt;-</span> <span class="fu">predict</span>(arbre_2, dt_reg_train, <span class="at">type=</span><span class="st">&quot;class&quot;</span>)</span>
<span id="cb230-3"><a href="13-Modeles-regression.html#cb230-3" tabindex="-1"></a></span>
<span id="cb230-4"><a href="13-Modeles-regression.html#cb230-4" tabindex="-1"></a><span class="co"># Comparaison des résultats - Matrice de confusion</span></span>
<span id="cb230-5"><a href="13-Modeles-regression.html#cb230-5" tabindex="-1"></a>mat_confusion_ajust1 <span class="ot">&lt;-</span> <span class="fu">table</span>(dt_reg_train<span class="sc">$</span>couple, predict_train)</span>
<span id="cb230-6"><a href="13-Modeles-regression.html#cb230-6" tabindex="-1"></a>mat_confusion_ajust1</span></code></pre></div>
<pre><code>     predict_train
         non    oui
  non 131538 125357
  oui  56703 184167</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="13-Modeles-regression.html#cb232-1" tabindex="-1"></a><span class="co"># Taux d&#39;erreur</span></span>
<span id="cb232-2"><a href="13-Modeles-regression.html#cb232-2" tabindex="-1"></a>tx_erreur_2 <span class="ot">&lt;-</span> (mat_confusion_ajust1[<span class="dv">2</span>,<span class="dv">1</span>] <span class="sc">+</span> mat_confusion_ajust1[<span class="dv">1</span>, <span class="dv">2</span>]) <span class="sc">/</span> <span class="fu">sum</span>(mat_confusion_ajust1)<span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb232-3"><a href="13-Modeles-regression.html#cb232-3" tabindex="-1"></a>tx_erreur_2 </span></code></pre></div>
<pre><code>[1] 36.57549</code></pre>
<p>Le taux d’erreur est un peu plus faible, la différence est légère, mais c’est toujours ça de pris !</p>
<p>L’arbre correspondant est le suivant:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="13-Modeles-regression.html#cb234-1" tabindex="-1"></a><span class="fu">rpart.plot</span>(arbre_2, <span class="at">extra=</span><span class="dv">106</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-144-1.svg" width="672" />
On voit qu’il est bien moins lisible car plus profond, mais il prédit mieux (mais peut-être trop bien - cf. risque de surapprentissage en <em>matching learning</em>).</p>
<!--Enfin, on peut chercher à minimiser l'erreur de prédiction de l'arbre afin de définir le niveau d'élagage optimal permettant ensuite de simplifier l'arbre.

```r
# 2 fonctions liées à l'argument "cp=" de notre modèle
printcp(arbre_1)
```

```

Classification tree:
rpart(formula = couple ~ ., data = dt_reg_train, method = "class")

Variables actually used in tree construction:
[1] age     chômage sexe   

Root node error: 240870/497765 = 0.4839

n= 497765 

        CP nsplit rel error  xerror      xstd
1 0.137771      0   1.00000 1.00000 0.0014638
2 0.032783      1   0.86223 0.86223 0.0014443
3 0.010450      3   0.79666 0.79666 0.0014256
4 0.010000      4   0.78621 0.78761 0.0014225
```

```r
plotcp(arbre_1)
```

<img src="Data-Mining_files/figure-html/unnamed-chunk-145-1.svg" width="672" />
Ici il faut donc indiquer la valeur 0.010 dans l'argument `cp=` pour minimiser l'erreur relative, c'est notre nouvelle règle d'arrêt. On va par conséquent reconstruire l'abre à partir de la fonction `prune()` en indiquant cette valeur optimale pour l'élaguer :  

```r
min(arbre_1$cptable[, "xerror"]) + (1*arbre_1$cptable[ which.min(arbre_1$cptable[, "xerror"]), "xstd"])
```

```
[1] 0.78903
```

```r
opt <- which.min(arbre_1$cptable[, "xerror"])
opt
```

```
4 
4 
```

```r
cp <- arbre_1$cptable[opt, "CP"]

arbre_VF <- prune(arbre_1, cp=cp)
rpart.plot(arbre_VF)
```

<img src="Data-Mining_files/figure-html/unnamed-chunk-146-1.svg" width="672" />
Cela ne change en réalité rien ici ! -->
<p>Vous pouvez réitérer l’exercice en introduisant d’autres variables dans l’analyse, en changeant la variable cible, etc.</p>
<p>Pour aller plus loin, on utilise maintenant beaucoup en analyse prédictive les forêts d’arbre de décision, qui constituent comme son nom l’indique, un ensemble d’arbres de régression, ce qui permet d’avoir un taux d’erreur global moindre, car la principale critique de l’arbre de décision est son potentiel d’erreur.</p>

</div>
</div>
</div>








<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="12-Clustering-application.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/Data-Mining-2024/master/13-Modeles-regression.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
