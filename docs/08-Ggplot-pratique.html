<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 8 Data Mining et Data Visualization en pratique | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 8 Data Mining et Data Visualization en pratique | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 8 Data Mining et Data Visualization en pratique | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="07-Ggplot-theorique.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération de la base de données</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>1.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="1.2" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#quelles-informations-intéressantes-dans-cette-base"><i class="fa fa-check"></i><b>1.2</b> Quelles informations intéressantes dans cette base ?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#sélectionner-un-champ-réduit-de-la-base-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Sélectionner un champ réduit de la base, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html"><i class="fa fa-check"></i><b>4</b> Récapitulatig séance 1 - Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#ce-quon-a-appris"><i class="fa fa-check"></i><b>4.1</b> Ce qu’on a appris</a></li>
<li class="chapter" data-level="4.2" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#enregistrement-des-tables"><i class="fa fa-check"></i><b>4.2</b> Enregistrement des tables</a></li>
</ul></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-résidant-à-paris"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la population résidant à Paris</a></li>
<li class="chapter" data-level="5.2" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-active-résidant-à-paris"><i class="fa fa-check"></i><b>5.2</b> Caractéristiques de la population active résidant à Paris</a></li>
<li class="chapter" data-level="5.3" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-des-logements-parisiens"><i class="fa fa-check"></i><b>5.3</b> Caractéristiques des logements parisiens</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-Fonctions.html"><a href="06-Fonctions.html#principes-généraux-dune-fonction"><i class="fa fa-check"></i><b>6.1</b> Principes généraux d’une fonction</a></li>
<li class="chapter" data-level="6.2" data-path="06-Fonctions.html"><a href="06-Fonctions.html#exemples-de-fonctions"><i class="fa fa-check"></i><b>6.2</b> Exemples de fonctions</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Data Mining - Data Visualization</b></span></li>
<li class="chapter" data-level="7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html"><i class="fa fa-check"></i><b>7</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>7.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>7.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="7.1.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>7.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="7.1.3" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>7.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="7.1.4" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>7.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="7.1.5" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>7.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="7.1.6" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>7.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="7.1.7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>7.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="7.1.8" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>7.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="7.1.9" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>7.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>7.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html"><i class="fa fa-check"></i><b>8</b> Data Mining et Data Visualization en pratique</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>8.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="8.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>8.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#distribution-du-prix-au-m2-pour-les-appartements-parisiens-selon-lannée"><i class="fa fa-check"></i><b>8.2.1</b> Distribution du prix au m2 pour les appartements parisiens, selon l’année</a></li>
<li class="chapter" data-level="8.2.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-arrondissement-de-paris"><i class="fa fa-check"></i><b>8.2.2</b> Comparaison des montants moyen et médian du prix au m2, par arrondissement de Paris</a></li>
<li class="chapter" data-level="8.2.3" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#evolution-du-prix-médian-au-m2-des-ventes-dappartements-à-paris"><i class="fa fa-check"></i><b>8.2.3</b> Evolution du prix médian au m2 des ventes d’appartements à Paris</a></li>
<li class="chapter" data-level="8.2.4" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-arrondissements"><i class="fa fa-check"></i><b>8.2.4</b> Top 5 du prix au m2 des ventes d’appartements selon les arrondissements</a></li>
<li class="chapter" data-level="8.2.5" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>8.2.5</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c08-Ggplot-pratique" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Section 8</span> Data Mining et Data Visualization en pratique<a href="08-Ggplot-pratique.html#c08-Ggplot-pratique" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<p>Reprenons la base de données sur les demandes de valeurs foncières sur laquelle nous avons travaillé dans la section 3, et commençons notre analyse descriptive des informations présentes dans cette base en construisant des graphiques pour répondre à certaines questions relatives aux prix auquels se sont vendus les appartements de la ville de Paris entre 2019 et 2022. On pourra ainsi étudier l’évolution dans le temps de ces prix.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="08-Ggplot-pratique.html#cb99-1" tabindex="-1"></a><span class="co"># Appelons la table si elle n&#39;est pas déjà dans votre environnement</span></span>
<span id="cb99-2"><a href="08-Ggplot-pratique.html#cb99-2" tabindex="-1"></a>dvf_Paris <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/dvf_Paris_1.Rdata&quot;</span>)</span>
<span id="cb99-3"><a href="08-Ggplot-pratique.html#cb99-3" tabindex="-1"></a></span>
<span id="cb99-4"><a href="08-Ggplot-pratique.html#cb99-4" tabindex="-1"></a><span class="co"># Rappel des variables présentes et de leurs noms</span></span>
<span id="cb99-5"><a href="08-Ggplot-pratique.html#cb99-5" tabindex="-1"></a><span class="fu">names</span>(dvf_Paris)</span></code></pre></div>
<pre><code> [1] &quot;id_mutation&quot;               &quot;date_mutation&quot;            
 [3] &quot;nature_mutation&quot;           &quot;valeur_fonciere&quot;          
 [5] &quot;code_postal&quot;               &quot;id_parcelle&quot;              
 [7] &quot;lot1_numero&quot;               &quot;lot1_surface_carrez&quot;      
 [9] &quot;lot2_numero&quot;               &quot;lot2_surface_carrez&quot;      
[11] &quot;nombre_lots&quot;               &quot;type_local&quot;               
[13] &quot;surface_reelle_bati&quot;       &quot;nombre_pieces_principales&quot;
[15] &quot;surface_terrain&quot;           &quot;px_m2&quot;                    
[17] &quot;annee&quot;                     &quot;date_moisan&quot;              </code></pre>
<div id="exemple-de-la-construction-dun-graphique-pas-à-pas" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Exemple de la construction d’un graphique pas à pas<a href="08-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On va chercher à représenter la distribution du prix du m2 des ventes d’appartements en fonction de l’année. Notre variable principale est donc <code>px_m2</code>, et la variable “secondaire” ou fonction de la première est <code>annee</code>.</p>
<p>Pour représenter la distribution d’une variable quantitative ou continue, on peut utiliser un histogramme (ou/et une courbe de densité), mais comme ici on veut la représenter selon une autre variable peut-être serait-il mieux d’utiliser une boîte à moustache qui donnera les principaux éléments de description de la distribution de cette variable.</p>
<p>Nous avons déjà vu ces deux graphiques précédemment, mais reprenons-les pour voir dans le détail comment nous les construisons !<br />
<strong>D’abord</strong>, on va créer une <strong>boîte à moustache pour représenter la distribution de la variable <code>px_m2</code></strong>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="08-Ggplot-pratique.html#cb101-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb101-2"><a href="08-Ggplot-pratique.html#cb101-2" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> px_m2) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-76-1.svg" width="672" /></p>
<p>Comme il reste des valeurs aberrantes (cf. section 3.2.3. de la séance 1 de ce cours), il faut faire un minimum d’élagage sur cette variable, ce qu’on n’avait pas fait à la fin de cette séance. On va ainsi supprimer les observations pour lesquelles le prix au m2 est supérieur au 1% de la distribution et inférieur au 99% de la distribution, mais en faisant attention à prendre la distribution selon l’année pour que cela soit plus précis. Voici comment faire :</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="08-Ggplot-pratique.html#cb102-1" tabindex="-1"></a><span class="co"># On peut d&#39;abord regarder quelles sont ces valeurs avec la ligne de code suivante : </span></span>
<span id="cb102-2"><a href="08-Ggplot-pratique.html#cb102-2" tabindex="-1"></a><span class="co"># dvf_Paris %&gt;% group_by(annee) %&gt;% mutate(p_1=quantile(px_m2, 0.01), </span></span>
<span id="cb102-3"><a href="08-Ggplot-pratique.html#cb102-3" tabindex="-1"></a><span class="co">#p_99=quantile(px_m2, 0.99)) %&gt;% select(annee, p_1, p_99) %&gt;% unique()</span></span>
<span id="cb102-4"><a href="08-Ggplot-pratique.html#cb102-4" tabindex="-1"></a></span>
<span id="cb102-5"><a href="08-Ggplot-pratique.html#cb102-5" tabindex="-1"></a><span class="co"># On crée 2 variables selon l&#39;année et on filtre ensuite, attention à utiliser le</span></span>
<span id="cb102-6"><a href="08-Ggplot-pratique.html#cb102-6" tabindex="-1"></a><span class="co"># &quot;ungroup()&quot; à la fin, en particulier parce qu&#39;on remplace la base.</span></span>
<span id="cb102-7"><a href="08-Ggplot-pratique.html#cb102-7" tabindex="-1"></a>dvf_Paris_1 <span class="ot">&lt;-</span> dvf_Paris <span class="sc">%&gt;%</span> </span>
<span id="cb102-8"><a href="08-Ggplot-pratique.html#cb102-8" tabindex="-1"></a>  <span class="fu">group_by</span>(annee) <span class="sc">%&gt;%</span> </span>
<span id="cb102-9"><a href="08-Ggplot-pratique.html#cb102-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_1=</span><span class="fu">quantile</span>(px_m2, <span class="fl">0.01</span>), <span class="at">p_99=</span><span class="fu">quantile</span>(px_m2, <span class="fl">0.99</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-10"><a href="08-Ggplot-pratique.html#cb102-10" tabindex="-1"></a>  <span class="fu">filter</span>(px_m2<span class="sc">&gt;</span>p_1 <span class="sc">&amp;</span> px_m2<span class="sc">&lt;</span>p_99) <span class="sc">%&gt;%</span> </span>
<span id="cb102-11"><a href="08-Ggplot-pratique.html#cb102-11" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb102-12"><a href="08-Ggplot-pratique.html#cb102-12" tabindex="-1"></a></span>
<span id="cb102-13"><a href="08-Ggplot-pratique.html#cb102-13" tabindex="-1"></a><span class="co"># Vérifions les statistiques maintenant :</span></span>
<span id="cb102-14"><a href="08-Ggplot-pratique.html#cb102-14" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(annee) <span class="sc">%&gt;%</span> <span class="fu">get_summary_stats</span>(px_m2)</span></code></pre></div>
<pre><code># A tibble: 4 × 14
  annee variable     n   min     max median    q1     q3   iqr   mad   mean
  &lt;chr&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1 2019  px_m2    25231  25.6 141429. 10000  8300  11897. 3597. 2648. 11530.
2 2020  px_m2    36150  37.1  99000  10714. 9048. 12667. 3619. 2648. 11934.
3 2021  px_m2    47692  35.7 145344. 11000  9388. 12917. 3529. 2567. 12617.
4 2022  px_m2    36414  50   293651. 10912. 9338. 12963. 3625. 2607. 13089.
# ℹ 3 more variables: sd &lt;dbl&gt;, se &lt;dbl&gt;, ci &lt;dbl&gt;</code></pre>
<p>Cela semble plus propre, et on a supprimé 2 981 observations.<br />
On va pouvoir maintenant créer nos graphiques.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="08-Ggplot-pratique.html#cb104-1" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> px_m2) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-78-1.svg" width="672" />
Il y a toujours pas mal de valeurs aberrantes ce qui ne rend pas très lisible le graphique. Pour éviter de supprimer encore des observations, on va <strong>utiliser une option pour mettre une échelle moins grande en abcisse</strong>. Plusieurs manières de faire existent, mais l’une d’entre elles équivaut à supprimer les valeurs, alors qu’une autre permet de les garder et juste de ne pas les faire apparaître sur le graphique, cela peut-être important si ensuite nous voulons ajoutons des statistiques comme la moyenne sur le boxplot, comme nous allons le voir.</p>
<p>La première manière est d’utiliser l’argument <code>scale_x_continuous()</code> et l’option <code>limits=c()</code> pour indiquer les nouvelles valeurs de l’échelle, par exemple ici entre 3 000 et 21 000, mais un avertissement est alors donné : 13 652 lignes ont donc été supprimées (sur 145 487 initiales), si nous ajoutons ensuite la moyenne, elle sera calculée sans ces 13 652 observations, cela peut donc changer les indicateurs de moyenne, voire de médiane, ce n’est donc pas rigoureux.</p>
<p>Utilisons plutôt la seconde méthode maintenant, avec l’option <code>xlim()</code> à intégrer dans la fonction <code>coord_cartesian()</code> qui fait l’équivalent d’un zoom sur le graphique :</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="08-Ggplot-pratique.html#cb105-1" tabindex="-1"></a><span class="co"># 1ère méthode :</span></span>
<span id="cb105-2"><a href="08-Ggplot-pratique.html#cb105-2" tabindex="-1"></a><span class="co"># dvf_Paris_1 %&gt;% ggplot() + aes(x = px_m2) + geom_boxplot() </span></span>
<span id="cb105-3"><a href="08-Ggplot-pratique.html#cb105-3" tabindex="-1"></a><span class="co"># + scale_x_continuous(limits = c(3000, 21000))</span></span>
<span id="cb105-4"><a href="08-Ggplot-pratique.html#cb105-4" tabindex="-1"></a></span>
<span id="cb105-5"><a href="08-Ggplot-pratique.html#cb105-5" tabindex="-1"></a><span class="co"># 2nde méthode plus rigoureuse :</span></span>
<span id="cb105-6"><a href="08-Ggplot-pratique.html#cb105-6" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> px_m2) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb105-7"><a href="08-Ggplot-pratique.html#cb105-7" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-79-1.svg" width="672" /></p>
<p><strong>Ensuite</strong>, nous souhaitons <strong>représenter la distribution de cette variable selon l’année</strong>) : nous allons pour cela ajouter dans l’<code>aes()</code> une variable <code>y=</code> qui doit, attention, être définie en factor, sinon les niveaux/modalités de la variable ne sont pas reconnu(e)s ; et nous allons en profiter pour préciser un peu l’échelle des abscisses (réduire le “pas” avec l’option <code>breaks=seq()</code>) :</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="08-Ggplot-pratique.html#cb106-1" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> px_m2, <span class="at">y=</span>annee) <span class="sc">+</span> <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb106-2"><a href="08-Ggplot-pratique.html#cb106-2" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>))  <span class="sc">+</span> </span>
<span id="cb106-3"><a href="08-Ggplot-pratique.html#cb106-3" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">21000</span>,<span class="dv">2000</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-80-1.svg" width="672" />
On voit une augmentation de la médiane entre 2019 et 2021 puis une très légère baisse ou quasi-stagnation en 2022.</p>
<p>Nous pouvons <strong>également ajouter la moyenne</strong>, puisqu’ici nous voyons de gauche à droite, le minimum, le 1er quartile, la médiane, le 3ème quartile, le maximum et les “outliers” (points aberrants selon les statistiques de la boxplot). Pour cela, il faut utiliser la “couche” <em>statistique</em> de <code>ggplot()</code> avec la fonction <code>stat_summary()</code> et les options <code>fun = mean</code> pour la moyenne, <code>geom = point</code> pour qu’elle soit représentée par un point, <code>color="gray50"</code> pour qu’elle se différencie des autres points et soit en gris, et éventuellement <code>size=2</code> pour jouer sur la taille du point.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="08-Ggplot-pratique.html#cb107-1" tabindex="-1"></a><span class="co"># Pour infos, les options de `geom =` dans `stat_summary()` sont par exemple :  </span></span>
<span id="cb107-2"><a href="08-Ggplot-pratique.html#cb107-2" tabindex="-1"></a><span class="co"># &quot;point&quot;, &quot;pointrange&quot;, &quot;crossbar&quot;, &quot;bar&quot; (cell-ci à ne pas utiliser ici néanmoins !)</span></span>
<span id="cb107-3"><a href="08-Ggplot-pratique.html#cb107-3" tabindex="-1"></a></span>
<span id="cb107-4"><a href="08-Ggplot-pratique.html#cb107-4" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb107-5"><a href="08-Ggplot-pratique.html#cb107-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> px_m2, <span class="at">y=</span>annee) <span class="sc">+</span> </span>
<span id="cb107-6"><a href="08-Ggplot-pratique.html#cb107-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb107-7"><a href="08-Ggplot-pratique.html#cb107-7" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb107-8"><a href="08-Ggplot-pratique.html#cb107-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>)) <span class="sc">+</span> </span>
<span id="cb107-9"><a href="08-Ggplot-pratique.html#cb107-9" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">21000</span>,<span class="dv">2000</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-81-1.svg" width="672" />
On observe ainsi des différences entre la moyenne et la médiane, puisqu’ici la moyenne ne cesse d’augmenter y compris entre 2021 et 2022 ; la moyenne est toujours supérieure à la médiane puisque tirée par des valeurs plus souvent très élevées que très faibles (plus de points au-delà du maximum que l’inverse).</p>
<p>On peut aussi vouloir enlever les outliers avec l’option <code>outlier.shape</code> de <code>geom_boxplot()</code> comme ceci : <code>geom_boxplot(outlier.shape = NA)</code>.</p>
<p>On peut vouloir encore <strong>ordonner l’affichage des années par ordre décroissant de la médiane</strong> ou de <strong>la moyenne</strong> (ordre décroissant ici = valeur la plus élevée en haut du graphique). Nous pouvons, entre autres, utiliser pour cela la fonction <code>fct_reorder()</code> du package <strong><code>forcats</code></strong> déjà présenté dans la section 3.2 de ce cours (Séance 1) : nous pouvons alors directement l’intégrer dans l’<code>aes</code> de <strong>ggplot</strong> dans la variable en ordonnée <code>y=fct_reorder()</code>, il faut alors entre parenthèses mettre la variable utilisée en ordonnée, suivie de la variable par laquelle on ordonne (la même que celle utilisée dans <code>x=</code>). Utilisée dans un boxplot, cela ordonne par défaut selon la médiane ; si on veut que les régions soient ordonnées par la moyenne, il faut rajouter l’option <code>.fun=mean</code> dans la fonction <code>fct_reorder()</code>, cf. le code en-dessous.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="08-Ggplot-pratique.html#cb108-1" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="08-Ggplot-pratique.html#cb108-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb108-3"><a href="08-Ggplot-pratique.html#cb108-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> px_m2, <span class="at">y=</span><span class="fu">fct_reorder</span>(annee, px_m2)) <span class="sc">+</span> </span>
<span id="cb108-4"><a href="08-Ggplot-pratique.html#cb108-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb108-5"><a href="08-Ggplot-pratique.html#cb108-5" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb108-6"><a href="08-Ggplot-pratique.html#cb108-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>)) <span class="sc">+</span> </span>
<span id="cb108-7"><a href="08-Ggplot-pratique.html#cb108-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">21000</span>,<span class="dv">2000</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-82-1.svg" width="672" /></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="08-Ggplot-pratique.html#cb109-1" tabindex="-1"></a><span class="co"># dvf_Paris_1 %&gt;% </span></span>
<span id="cb109-2"><a href="08-Ggplot-pratique.html#cb109-2" tabindex="-1"></a><span class="co">#   ggplot() + </span></span>
<span id="cb109-3"><a href="08-Ggplot-pratique.html#cb109-3" tabindex="-1"></a><span class="co">#   aes(x = px_m2, y=fct_reorder(annee, px_m2), .fun=mean) + </span></span>
<span id="cb109-4"><a href="08-Ggplot-pratique.html#cb109-4" tabindex="-1"></a><span class="co">#   geom_boxplot() + </span></span>
<span id="cb109-5"><a href="08-Ggplot-pratique.html#cb109-5" tabindex="-1"></a><span class="co">#   stat_summary(fun=mean, geom=&quot;point&quot;, color=&quot;gray50&quot;, size=2) + </span></span>
<span id="cb109-6"><a href="08-Ggplot-pratique.html#cb109-6" tabindex="-1"></a><span class="co">#   coord_cartesian(xlim=c(3000,21000)) + </span></span>
<span id="cb109-7"><a href="08-Ggplot-pratique.html#cb109-7" tabindex="-1"></a><span class="co">#   scale_x_continuous(breaks=seq(3000,21000,2000))</span></span></code></pre></div>
<p>Attention, comme ici notre seconde variable est l’année, cela n’est pas forcément pertinent de modifier l’ordre du graphique pour le mettre selon la moyenne car cela pourrait perturber la lecture du graphique. On va revenir sur le graphique précédent donc.</p>
<p>Nous arrivons à un graphique intéressant, il faut <strong>maintenant améliorer la description autour</strong> : noms des axes, titres, légende informative sous le graphique (avec notamment un avertissement sur les valeurs non affichées sur le graphique), éventuellement un peu de couleur (avec <code>fill=</code> non pas dans l’<code>aes()</code> mais dans la fonction <code>geom_boxplot()</code> pour qu’elle soit identique quel que soit le département), etc.<br />
Cela se fait avec la fonction <code>labs()</code>, et ensuite la fonction <code>theme()</code>.<br />
Une petite astuce pour les titres pour qu’ils ne soient pas coupés sur le graphe : <code>\n</code> collé à un mot (sans espace) permet de mettre à la ligne à partir de ce mot !</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="08-Ggplot-pratique.html#cb110-1" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="08-Ggplot-pratique.html#cb110-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb110-3"><a href="08-Ggplot-pratique.html#cb110-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> px_m2, <span class="at">y=</span><span class="fu">fct_reorder</span>(annee, px_m2)) <span class="sc">+</span> </span>
<span id="cb110-4"><a href="08-Ggplot-pratique.html#cb110-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="at">fill=</span><span class="st">&quot;khaki&quot;</span>) <span class="sc">+</span> </span>
<span id="cb110-5"><a href="08-Ggplot-pratique.html#cb110-5" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span>mean, <span class="at">geom=</span><span class="st">&quot;point&quot;</span>, <span class="at">color=</span><span class="st">&quot;gray50&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb110-6"><a href="08-Ggplot-pratique.html#cb110-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>)) <span class="sc">+</span> </span>
<span id="cb110-7"><a href="08-Ggplot-pratique.html#cb110-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">3000</span>,<span class="dv">21000</span>,<span class="dv">2000</span>)) <span class="sc">+</span></span>
<span id="cb110-8"><a href="08-Ggplot-pratique.html#cb110-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du prix au m2 des ventes d&#39;appartements dans Paris sur la période 2019-2022&quot;</span>, </span>
<span id="cb110-9"><a href="08-Ggplot-pratique.html#cb110-9" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Prix au m2&quot;</span>, <span class="at">y=</span><span class="st">&quot;Année&quot;</span>,</span>
<span id="cb110-10"><a href="08-Ggplot-pratique.html#cb110-10" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs en-dessous de 3 000€ et au-dessus de 21 000€ au m2 ne sont pas affichées ; les points </span><span class="sc">\n</span><span class="st">au-delà du minimum et maximum non plus ; les points en gris représentent la moyenne. </span><span class="sc">\n</span><span class="st">Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb110-11"><a href="08-Ggplot-pratique.html#cb110-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb110-12"><a href="08-Ggplot-pratique.html#cb110-12" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">11.5</span>),</span>
<span id="cb110-13"><a href="08-Ggplot-pratique.html#cb110-13" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb110-14"><a href="08-Ggplot-pratique.html#cb110-14" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-83-1.svg" width="672" /></p>
<p>Voilà un premier graphique construit avec la grammaire de <code>ggplot()</code>. À vous maintenant de construire vous-mêmes les graphiques qui vous sont suggérés dans la section suivante !</p>
</div>
<div id="dautres-exemples-à-travers-des-exercices" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> D’autres exemples à travers des exercices<a href="08-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="distribution-du-prix-au-m2-pour-les-appartements-parisiens-selon-lannée" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Distribution du prix au m2 pour les appartements parisiens, selon l’année<a href="08-Ggplot-pratique.html#distribution-du-prix-au-m2-pour-les-appartements-parisiens-selon-lannée" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Construisez le même type de graphique mais cette fois à partir d’une densité de distribution selon de même l’année. N’hésitez pas à changer les options pour le mettre à votre goût !!</p>
<img src="Data-Mining_files/figure-html/unnamed-chunk-84-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="08-Ggplot-pratique.html#cb111-1" tabindex="-1"></a>dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="08-Ggplot-pratique.html#cb111-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb111-3"><a href="08-Ggplot-pratique.html#cb111-3" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> px_m2, <span class="at">fill=</span>annee) <span class="sc">+</span> </span>
<span id="cb111-4"><a href="08-Ggplot-pratique.html#cb111-4" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color=</span><span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb111-5"><a href="08-Ggplot-pratique.html#cb111-5" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">3000</span>,<span class="dv">21000</span>)) <span class="sc">+</span> </span>
<span id="cb111-6"><a href="08-Ggplot-pratique.html#cb111-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribution du prix au m2 des ventes d&#39;appartements dans Paris sur la période 2019-2022&quot;</span>, </span>
<span id="cb111-7"><a href="08-Ggplot-pratique.html#cb111-7" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Prix au m2&quot;</span>, <span class="at">y=</span><span class="st">&quot; &quot;</span>, <span class="at">fill=</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb111-8"><a href="08-Ggplot-pratique.html#cb111-8" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Remarques : Les valeurs en-dessous de 3 000€ et au-dessus de 21 000€ au m2 ne sont pas affichées. </span><span class="sc">\n</span><span class="st">Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>) <span class="sc">+</span></span>
<span id="cb111-9"><a href="08-Ggplot-pratique.html#cb111-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>),</span>
<span id="cb111-10"><a href="08-Ggplot-pratique.html#cb111-10" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb111-11"><a href="08-Ggplot-pratique.html#cb111-11" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb111-12"><a href="08-Ggplot-pratique.html#cb111-12" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>))</span></code></pre></div>
</div>
</div>
<div id="comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-arrondissement-de-paris" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Comparaison des montants moyen et médian du prix au m2, par arrondissement de Paris<a href="08-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-arrondissement-de-paris" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Construisez maintenant un graphique mettant l’un en-dessous de l’autre deux graphes en bâtons représentant respectivement le prix au m2 moyen et le prix au m2 médian des ventes d’appartements par <em>arrondissement</em>.</p>
<p>Pour vous aider si besoin, réfléchissez par étapes :</p>
<ul>
<li>non obligatoire, mais il est bien de commencer par créer une variable avec les noms réduit des arrondissements et non le code postal ;</li>
<li>créer un premier graphe que vous assignerez à un nouvel objet et qui représentera celui de la moyenne par arrondissement ;</li>
<li>vous pouvez pour cela créer une nouvelle variable qui constituera la moyenne pour chaque département (un conseil : arrondir à l’unité) ;</li>
<li>sélectionnez les variables qui seront utilisées dans le graphique et vérifier (ou corriger sinon) qu’il n’y ait pas des doublons (lignes identiques) car cela peut fausser le graphique ensuite ;</li>
<li>construisez le graphique avec <code>ggplot()</code> et la bonne fonction <code>geom_***()</code>, les données doivent être affichées par ordre décroissant ;</li>
<li>faîtes de même pour la médiane par arrondissement ;</li>
<li>vous pouvez ensuite mettre ces graphiques côte à côté avec le package <strong><code>patchwork</code></strong> (qu’il vous faudra probablement installer si c’est la première fois que vous l’utilisez), recherchez sur internet comment faire ensuite (c’est très simple !), puis ajoutez un titre et une légende générale avec la fonction <code>plot_annotation()</code>.</li>
</ul>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="08-Ggplot-pratique.html#cb112-1" tabindex="-1"></a>dvf_Paris_1 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="08-Ggplot-pratique.html#cb112-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nom_arrdt=</span><span class="fu">as.factor</span>(<span class="fu">case_when</span>(code_postal<span class="sc">==</span><span class="dv">75001</span> <span class="sc">~</span> <span class="st">&quot;1er arrdt&quot;</span>,</span>
<span id="cb112-3"><a href="08-Ggplot-pratique.html#cb112-3" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75002</span> <span class="sc">~</span> <span class="st">&quot;2e arrdt&quot;</span>,</span>
<span id="cb112-4"><a href="08-Ggplot-pratique.html#cb112-4" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75003</span> <span class="sc">~</span> <span class="st">&quot;3e arrdt&quot;</span>,</span>
<span id="cb112-5"><a href="08-Ggplot-pratique.html#cb112-5" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75004</span> <span class="sc">~</span> <span class="st">&quot;4e arrdt&quot;</span>,</span>
<span id="cb112-6"><a href="08-Ggplot-pratique.html#cb112-6" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75005</span> <span class="sc">~</span> <span class="st">&quot;5e arrdt&quot;</span>,</span>
<span id="cb112-7"><a href="08-Ggplot-pratique.html#cb112-7" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75006</span> <span class="sc">~</span> <span class="st">&quot;6e arrdt&quot;</span>,</span>
<span id="cb112-8"><a href="08-Ggplot-pratique.html#cb112-8" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75007</span> <span class="sc">~</span> <span class="st">&quot;7e arrdt&quot;</span>,</span>
<span id="cb112-9"><a href="08-Ggplot-pratique.html#cb112-9" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75008</span> <span class="sc">~</span> <span class="st">&quot;8e arrdt&quot;</span>,</span>
<span id="cb112-10"><a href="08-Ggplot-pratique.html#cb112-10" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75009</span> <span class="sc">~</span> <span class="st">&quot;9e arrdt&quot;</span>,</span>
<span id="cb112-11"><a href="08-Ggplot-pratique.html#cb112-11" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75010</span> <span class="sc">~</span> <span class="st">&quot;10e arrdt&quot;</span>,</span>
<span id="cb112-12"><a href="08-Ggplot-pratique.html#cb112-12" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75011</span> <span class="sc">~</span> <span class="st">&quot;11e arrdt&quot;</span>,</span>
<span id="cb112-13"><a href="08-Ggplot-pratique.html#cb112-13" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75012</span> <span class="sc">~</span> <span class="st">&quot;12e arrdt&quot;</span>,</span>
<span id="cb112-14"><a href="08-Ggplot-pratique.html#cb112-14" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75013</span> <span class="sc">~</span> <span class="st">&quot;13e arrdt&quot;</span>,</span>
<span id="cb112-15"><a href="08-Ggplot-pratique.html#cb112-15" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75014</span> <span class="sc">~</span> <span class="st">&quot;14e arrdt&quot;</span>,</span>
<span id="cb112-16"><a href="08-Ggplot-pratique.html#cb112-16" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75015</span> <span class="sc">~</span> <span class="st">&quot;15e arrdt&quot;</span>,</span>
<span id="cb112-17"><a href="08-Ggplot-pratique.html#cb112-17" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75016</span> <span class="sc">~</span> <span class="st">&quot;16e arrdt&quot;</span>,</span>
<span id="cb112-18"><a href="08-Ggplot-pratique.html#cb112-18" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75017</span> <span class="sc">~</span> <span class="st">&quot;17e arrdt&quot;</span>,</span>
<span id="cb112-19"><a href="08-Ggplot-pratique.html#cb112-19" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75018</span> <span class="sc">~</span> <span class="st">&quot;18e arrdt&quot;</span>,</span>
<span id="cb112-20"><a href="08-Ggplot-pratique.html#cb112-20" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75019</span> <span class="sc">~</span> <span class="st">&quot;19e arrdt&quot;</span>,</span>
<span id="cb112-21"><a href="08-Ggplot-pratique.html#cb112-21" tabindex="-1"></a>                                      code_postal<span class="sc">==</span><span class="dv">75020</span> <span class="sc">~</span> <span class="st">&quot;20e arrdt&quot;</span>)))</span></code></pre></div>
<img src="Data-Mining_files/figure-html/unnamed-chunk-87-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="08-Ggplot-pratique.html#cb113-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="08-Ggplot-pratique.html#cb113-2" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="08-Ggplot-pratique.html#cb113-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_prixm2 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="08-Ggplot-pratique.html#cb113-4" tabindex="-1"></a>  <span class="fu">select</span>(moy_prixm2, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb113-5"><a href="08-Ggplot-pratique.html#cb113-5" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb113-6"><a href="08-Ggplot-pratique.html#cb113-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(nom_arrdt, <span class="fu">desc</span>(moy_prixm2)), <span class="at">y =</span> moy_prixm2) <span class="sc">+</span></span>
<span id="cb113-7"><a href="08-Ggplot-pratique.html#cb113-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;honeydew&quot;</span>) <span class="sc">+</span> </span>
<span id="cb113-8"><a href="08-Ggplot-pratique.html#cb113-8" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> moy_prixm2), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="at">color=</span><span class="st">&quot;gray25&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb113-9"><a href="08-Ggplot-pratique.html#cb113-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Moyenne&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb113-10"><a href="08-Ggplot-pratique.html#cb113-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb113-11"><a href="08-Ggplot-pratique.html#cb113-11" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb113-12"><a href="08-Ggplot-pratique.html#cb113-12" tabindex="-1"></a></span>
<span id="cb113-13"><a href="08-Ggplot-pratique.html#cb113-13" tabindex="-1"></a></span>
<span id="cb113-14"><a href="08-Ggplot-pratique.html#cb113-14" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-15"><a href="08-Ggplot-pratique.html#cb113-15" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb113-16"><a href="08-Ggplot-pratique.html#cb113-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_prixm2 =</span> <span class="fu">round</span>(<span class="fu">median</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-17"><a href="08-Ggplot-pratique.html#cb113-17" tabindex="-1"></a>  <span class="fu">select</span>(median_prixm2, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb113-18"><a href="08-Ggplot-pratique.html#cb113-18" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb113-19"><a href="08-Ggplot-pratique.html#cb113-19" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(nom_arrdt, <span class="fu">desc</span>(median_prixm2)), <span class="at">y =</span> median_prixm2) <span class="sc">+</span></span>
<span id="cb113-20"><a href="08-Ggplot-pratique.html#cb113-20" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;honeydew&quot;</span>) <span class="sc">+</span> </span>
<span id="cb113-21"><a href="08-Ggplot-pratique.html#cb113-21" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> median_prixm2), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="at">color=</span><span class="st">&quot;gray25&quot;</span>, <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb113-22"><a href="08-Ggplot-pratique.html#cb113-22" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Médiane&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb113-23"><a href="08-Ggplot-pratique.html#cb113-23" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb113-24"><a href="08-Ggplot-pratique.html#cb113-24" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.5</span>))</span>
<span id="cb113-25"><a href="08-Ggplot-pratique.html#cb113-25" tabindex="-1"></a></span>
<span id="cb113-26"><a href="08-Ggplot-pratique.html#cb113-26" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb113-27"><a href="08-Ggplot-pratique.html#cb113-27" tabindex="-1"></a>(p1 <span class="sc">/</span> p2) <span class="sc">+</span></span>
<span id="cb113-28"><a href="08-Ggplot-pratique.html#cb113-28" tabindex="-1"></a><span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Montants moyens et médians du prix au m2 des ventes d&#39;appartements sur Paris, selon </span><span class="sc">\n</span><span class="st">l&#39;arrondissement sur la période 2019-2022&quot;</span>, </span>
<span id="cb113-29"><a href="08-Ggplot-pratique.html#cb113-29" tabindex="-1"></a>                <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, </span>
<span id="cb113-30"><a href="08-Ggplot-pratique.html#cb113-30" tabindex="-1"></a>                <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb113-31"><a href="08-Ggplot-pratique.html#cb113-31" tabindex="-1"></a>                              <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)))</span></code></pre></div>
</div>
<p>On observe que les 4ème, 6ème, 7ème et 8ème arrondissements sont les plus chers, que ce soit en moyenne ou en médiane, même si le classement change légèrement selon les deux indicateurs.<br />
Il faut vraiment se demander quel type de public serait visé par ces informations, si c’est le grand public, la moyenne et la médiane suffisent si l’on veut montrer qu’il y a quand même une certaine dispersion des valeurs selon les ventes, souvent seule la moyenne étant représentée.</p>
On aurait pu sinon utilser un “dot plot”, comme ci-dessous. Cherchez comment l’on peut construire ce type de graphique (rq : cela ne correspond par à une fonction en tant que telle). Le début du code est le même, ce sont les fonctions <code>geom_***</code> qui changent…<br />
<img src="Data-Mining_files/figure-html/unnamed-chunk-89-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="08-Ggplot-pratique.html#cb114-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggrepel&quot;</span>)</span>
<span id="cb114-2"><a href="08-Ggplot-pratique.html#cb114-2" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="08-Ggplot-pratique.html#cb114-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="08-Ggplot-pratique.html#cb114-4" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb114-5"><a href="08-Ggplot-pratique.html#cb114-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">moy_prixm2 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-6"><a href="08-Ggplot-pratique.html#cb114-6" tabindex="-1"></a>  <span class="fu">select</span>(moy_prixm2, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb114-7"><a href="08-Ggplot-pratique.html#cb114-7" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb114-8"><a href="08-Ggplot-pratique.html#cb114-8" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_prixm2,</span>
<span id="cb114-9"><a href="08-Ggplot-pratique.html#cb114-9" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">fct_reorder</span>(nom_arrdt, moy_prixm2)) <span class="sc">+</span></span>
<span id="cb114-10"><a href="08-Ggplot-pratique.html#cb114-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;burlywood4&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb114-11"><a href="08-Ggplot-pratique.html#cb114-11" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">xend=</span>moy_prixm2, </span>
<span id="cb114-12"><a href="08-Ggplot-pratique.html#cb114-12" tabindex="-1"></a>                   <span class="at">y=</span><span class="fu">fct_reorder</span>(nom_arrdt, moy_prixm2),</span>
<span id="cb114-13"><a href="08-Ggplot-pratique.html#cb114-13" tabindex="-1"></a>                   <span class="at">yend=</span><span class="fu">fct_reorder</span>(nom_arrdt, moy_prixm2)),</span>
<span id="cb114-14"><a href="08-Ggplot-pratique.html#cb114-14" tabindex="-1"></a>               <span class="at">color=</span><span class="st">&quot;snow4&quot;</span>) <span class="sc">+</span></span>
<span id="cb114-15"><a href="08-Ggplot-pratique.html#cb114-15" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> moy_prixm2), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb114-16"><a href="08-Ggplot-pratique.html#cb114-16" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Prix au m2 moyen&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb114-17"><a href="08-Ggplot-pratique.html#cb114-17" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb114-18"><a href="08-Ggplot-pratique.html#cb114-18" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>))</span>
<span id="cb114-19"><a href="08-Ggplot-pratique.html#cb114-19" tabindex="-1"></a></span>
<span id="cb114-20"><a href="08-Ggplot-pratique.html#cb114-20" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb114-21"><a href="08-Ggplot-pratique.html#cb114-21" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span></span>
<span id="cb114-22"><a href="08-Ggplot-pratique.html#cb114-22" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb114-23"><a href="08-Ggplot-pratique.html#cb114-23" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_prixm2 =</span> <span class="fu">round</span>(<span class="fu">median</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb114-24"><a href="08-Ggplot-pratique.html#cb114-24" tabindex="-1"></a>  <span class="fu">select</span>(median_prixm2, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb114-25"><a href="08-Ggplot-pratique.html#cb114-25" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb114-26"><a href="08-Ggplot-pratique.html#cb114-26" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> median_prixm2,</span>
<span id="cb114-27"><a href="08-Ggplot-pratique.html#cb114-27" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">fct_reorder</span>(nom_arrdt, median_prixm2)) <span class="sc">+</span></span>
<span id="cb114-28"><a href="08-Ggplot-pratique.html#cb114-28" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">&quot;burlywood4&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb114-29"><a href="08-Ggplot-pratique.html#cb114-29" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">0</span>, <span class="at">xend=</span>median_prixm2, </span>
<span id="cb114-30"><a href="08-Ggplot-pratique.html#cb114-30" tabindex="-1"></a>                   <span class="at">y=</span><span class="fu">fct_reorder</span>(nom_arrdt, median_prixm2),</span>
<span id="cb114-31"><a href="08-Ggplot-pratique.html#cb114-31" tabindex="-1"></a>                   <span class="at">yend=</span><span class="fu">fct_reorder</span>(nom_arrdt, median_prixm2)),</span>
<span id="cb114-32"><a href="08-Ggplot-pratique.html#cb114-32" tabindex="-1"></a>               <span class="at">color=</span><span class="st">&quot;snow4&quot;</span>) <span class="sc">+</span></span>
<span id="cb114-33"><a href="08-Ggplot-pratique.html#cb114-33" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> median_prixm2), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb114-34"><a href="08-Ggplot-pratique.html#cb114-34" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Prix au m2 médian&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb114-35"><a href="08-Ggplot-pratique.html#cb114-35" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb114-36"><a href="08-Ggplot-pratique.html#cb114-36" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>))</span>
<span id="cb114-37"><a href="08-Ggplot-pratique.html#cb114-37" tabindex="-1"></a></span>
<span id="cb114-38"><a href="08-Ggplot-pratique.html#cb114-38" tabindex="-1"></a>(p3 <span class="sc">+</span> p4) <span class="sc">+</span></span>
<span id="cb114-39"><a href="08-Ggplot-pratique.html#cb114-39" tabindex="-1"></a><span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">&quot;Montants moyens et médians du prix au m2 des ventes d&#39;appartements sur Paris, selon </span><span class="sc">\n</span><span class="st">l&#39;arrondissement sur la période 2019-2022&quot;</span>, </span>
<span id="cb114-40"><a href="08-Ggplot-pratique.html#cb114-40" tabindex="-1"></a>                <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, </span>
<span id="cb114-41"><a href="08-Ggplot-pratique.html#cb114-41" tabindex="-1"></a>                <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb114-42"><a href="08-Ggplot-pratique.html#cb114-42" tabindex="-1"></a>                              <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)))</span></code></pre></div>
</div>
</div>
<div id="evolution-du-prix-médian-au-m2-des-ventes-dappartements-à-paris" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Evolution du prix médian au m2 des ventes d’appartements à Paris<a href="08-Ggplot-pratique.html#evolution-du-prix-médian-au-m2-des-ventes-dappartements-à-paris" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Changeons un peu de perspective et construisez cette fois un graphique montrant l’évolution du prix médian au m2 des ventes d’appartements à Paris, de manière générale et ensuite selon 6 arrondissements choisis selon leur prix médian mis en avant un peu plus haut : les 3 ayant les prix les plus élevés (6ème, 7ème et 4ème arrondissement), et les 3 ayant les prix les moins élevés (13ème, 19ème et 20ème arrdt).<br />
On peut voir le rendre interactif de telle sorte que l’utilisateur puisse voir les valeurs des points en passant la souris dessus : pour cela, il faut installer et charge le package <strong><code>plotly</code></strong> puis utiliserla fonction <code>ggplotly()</code> ; cela nécessite de stocker le graphique dans un objet.</p>
<p>De même, il faut procéder par étapes :</p>
<ul>
<li>créer ensuite la variable de prix médian au m2 selon l’année ;</li>
<li>ne garder que ces variables, supprimer les lignes doublons le cas échéant ;</li>
<li>construir un graphique sous forme de courbes avec des points représentants les valeurs en le stockant dans un objet ;</li>
<li>appeler la fonction <code>ggplotly()</code> en utilisant l’argument <code>tooltip()</code> pour que seule la valeur des “y” soit affichée..</li>
</ul>
<div class="plotly html-widget html-fill-item" id="htmlwidget-a4d1bd21fb8330ad7e6c" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-a4d1bd21fb8330ad7e6c">{"x":{"data":[{"x":[4,2,1,3],"y":[10912,10714,10000,11000],"text":["med_prixm2: 10912","med_prixm2: 10714","med_prixm2: 10000","med_prixm2: 11000"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[10000,10714,11000,10912],"text":["med_prixm2: 10000","med_prixm2: 10714","med_prixm2: 11000","med_prixm2: 10912"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":50,"r":50,"b":80,"l":50},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Evolution du prix médian au m2 des appartements vendus à Paris","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402241},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,4.5999999999999996],"tickmode":"array","ticktext":["2019","2020","2021","2022"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":" ","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[5700,12300],"tickmode":"array","ticktext":["6000","6500","7000","7500","8000","8500","9000","9500","10000","10500","11000","11500","12000"],"tickvals":[6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000],"categoryorder":"array","categoryarray":["6000","6500","7000","7500","8000","8500","9000","9500","10000","10500","11000","11500","12000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":" ","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative","annotations":[{"text":"Source : base 'demande de valeurs foncières', 2019-2022. <br />Calculs : Camille Signoretto. <br />Note : l'axe des ordonnées ne commence qu'à 6000€.","showarrow":false,"x":0,"y":-0.20000000000000001,"xref":"paper","yref":"paper","xanchor":"left","yanchor":"auto","xshift":0,"yshift":0,"font":{"size":10.5},"align":"left"}]},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"29c8a2d14d3":{"x":{},"y":{},"type":"scatter"},"29c811534569":{"x":{},"y":{}}},"cur_data":"29c8a2d14d3","visdat":{"29c8a2d14d3":["function (y) ","x"],"29c811534569":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div class="solution-exo">
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="08-Ggplot-pratique.html#cb115-1" tabindex="-1"></a>g_evo <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="08-Ggplot-pratique.html#cb115-2" tabindex="-1"></a>  <span class="fu">group_by</span>(annee) <span class="sc">%&gt;%</span> </span>
<span id="cb115-3"><a href="08-Ggplot-pratique.html#cb115-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">med_prixm2 =</span> <span class="fu">round</span>(<span class="fu">median</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-4"><a href="08-Ggplot-pratique.html#cb115-4" tabindex="-1"></a>  <span class="fu">select</span>(med_prixm2, annee) <span class="sc">%&gt;%</span> </span>
<span id="cb115-5"><a href="08-Ggplot-pratique.html#cb115-5" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-6"><a href="08-Ggplot-pratique.html#cb115-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(annee), <span class="at">y=</span>med_prixm2) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">group=</span><span class="dv">1</span>)  <span class="sc">+</span></span>
<span id="cb115-7"><a href="08-Ggplot-pratique.html#cb115-7" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">6000</span>,<span class="dv">12000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">6000</span>,<span class="dv">12000</span>,<span class="dv">500</span>)) <span class="sc">+</span></span>
<span id="cb115-8"><a href="08-Ggplot-pratique.html#cb115-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Evolution du prix médian au m2 des appartements vendus à Paris&quot;</span>, </span>
<span id="cb115-9"><a href="08-Ggplot-pratique.html#cb115-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb115-10"><a href="08-Ggplot-pratique.html#cb115-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>), </span>
<span id="cb115-11"><a href="08-Ggplot-pratique.html#cb115-11" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span>
<span id="cb115-12"><a href="08-Ggplot-pratique.html#cb115-12" tabindex="-1"></a></span>
<span id="cb115-13"><a href="08-Ggplot-pratique.html#cb115-13" tabindex="-1"></a><span class="co">#install.packages(&quot;plotly&quot;)</span></span>
<span id="cb115-14"><a href="08-Ggplot-pratique.html#cb115-14" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb115-15"><a href="08-Ggplot-pratique.html#cb115-15" tabindex="-1"></a><span class="fu">ggplotly</span>(g_evo, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">&quot;med_prixm2&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-16"><a href="08-Ggplot-pratique.html#cb115-16" tabindex="-1"></a> <span class="fu">layout</span>(<span class="at">margin =</span> <span class="fu">list</span>(<span class="at">l =</span> <span class="dv">50</span>, <span class="at">r =</span> <span class="dv">50</span>, <span class="at">b =</span> <span class="dv">80</span>, <span class="at">t =</span> <span class="dv">50</span>),</span>
<span id="cb115-17"><a href="08-Ggplot-pratique.html#cb115-17" tabindex="-1"></a>        <span class="at">annotations =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">&quot;Source : base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto. </span><span class="sc">\n</span><span class="st">Note : l&#39;axe des ordonnées ne commence qu&#39;à 6000€.&quot;</span>,</span>
<span id="cb115-18"><a href="08-Ggplot-pratique.html#cb115-18" tabindex="-1"></a>                           <span class="at">showarrow =</span> F, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>, </span>
<span id="cb115-19"><a href="08-Ggplot-pratique.html#cb115-19" tabindex="-1"></a>                           <span class="at">xref=</span><span class="st">&#39;paper&#39;</span>, <span class="at">yref=</span><span class="st">&#39;paper&#39;</span>, <span class="at">xanchor=</span><span class="st">&#39;left&#39;</span>, <span class="at">yanchor=</span><span class="st">&#39;auto&#39;</span>,  </span>
<span id="cb115-20"><a href="08-Ggplot-pratique.html#cb115-20" tabindex="-1"></a>                           <span class="at">xshift=</span><span class="dv">0</span>, <span class="at">yshift=</span><span class="dv">0</span>, <span class="at">font=</span><span class="fu">list</span>(<span class="at">size=</span><span class="fl">10.5</span>), <span class="at">align=</span><span class="st">&quot;left&quot;</span>))</span></code></pre></div>
</div>
<p>On retrouve un résultat que l’on avait observé précédemment avec la boxplot, à savoir que le prix médian au m2 des appartements vendus à Paris a augmenté entre 2019 et 2021, puis légèrement baissé.</p>
<p>Regardons maintenant selon quelques arrondissements de Paris (dans les 6 mentionnés au-dessus), pour étudier si cette évolution est différente selon la position de l’arrondissement dans l’échelle des prix médians.</p>
<div class="plotly html-widget html-fill-item" id="htmlwidget-e67e9a3fe89ef226a73a" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-e67e9a3fe89ef226a73a">{"x":{"data":[{"x":[1,2,3,4],"y":[14545,15017,15330,15360],"text":["med_prixm2: 14545","med_prixm2: 15017","med_prixm2: 15330","med_prixm2: 15360"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"6e arrdt","legendgroup":"6e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[13950,14786,14687,15200],"text":["med_prixm2: 13950","med_prixm2: 14786","med_prixm2: 14687","med_prixm2: 15200"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(183,159,0,1)","dash":"solid"},"hoveron":"points","name":"7e arrdt","legendgroup":"7e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[13031,13333,13269,13627],"text":["med_prixm2: 13031","med_prixm2: 13333","med_prixm2: 13269","med_prixm2: 13627"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"4e arrdt","legendgroup":"4e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[8703,9812,9926,9850],"text":["med_prixm2:  8703","med_prixm2:  9812","med_prixm2:  9926","med_prixm2:  9850"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"13e arrdt","legendgroup":"13e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[8750,9444,9616,9433],"text":["med_prixm2:  8750","med_prixm2:  9444","med_prixm2:  9616","med_prixm2:  9433"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"20e arrdt","legendgroup":"20e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1,2,3,4],"y":[8393,9267,9444,9231],"text":["med_prixm2:  8393","med_prixm2:  9267","med_prixm2:  9444","med_prixm2:  9231"],"type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(245,100,227,1)","dash":"solid"},"hoveron":"points","name":"19e arrdt","legendgroup":"19e arrdt","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":50,"r":50,"b":80,"l":50},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Evolution du prix médian au m2 des appartements vendus à Paris, dans les 3 arrondissements <br />ayant les prix les plus élevés et les 3 arrondissements ayant les prix les moins élevés","font":{"color":"rgba(0,0,0,1)","family":"","size":13.682025736820261},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,4.5999999999999996],"tickmode":"array","ticktext":["2019","2020","2021","2022"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["2019","2020","2021","2022"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":" ","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[5500,16500],"tickmode":"array","ticktext":["6000","7000","8000","9000","10000","11000","12000","13000","14000","15000","16000"],"tickvals":[6000,7000,8000,9000,10000,11000,12000,13000,14000,15000,16000],"categoryorder":"array","categoryarray":["6000","7000","8000","9000","10000","11000","12000","13000","14000","15000","16000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":" ","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Arrondissement","font":{"color":"rgba(0,0,0,1)","family":"","size":11.955168119551681}}},"hovermode":"closest","barmode":"relative","annotations":[{"text":"Source : Base 'demande de valeurs foncières', 2019-2022. <br />Calculs : Camille Signoretto. <br />Note : l'axe des ordonnées ne commence qu'à 6000€","showarrow":false,"x":0,"y":-0.20000000000000001,"xref":"paper","yref":"paper","xanchor":"left","yanchor":"auto","xshift":0,"yshift":0,"font":{"size":10.300000000000001},"align":"left"}]},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"29c841926d7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"29c841926d7","visdat":{"29c841926d7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div class="solution-exo">
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="08-Ggplot-pratique.html#cb116-1" tabindex="-1"></a>g_evo_pls <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="08-Ggplot-pratique.html#cb116-2" tabindex="-1"></a>  <span class="fu">filter</span>(nom_arrdt <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;4e arrdt&quot;</span>,<span class="st">&quot;6e arrdt&quot;</span>,<span class="st">&quot;7e arrdt&quot;</span>,<span class="st">&quot;13e arrdt&quot;</span>,<span class="st">&quot;19e arrdt&quot;</span>,<span class="st">&quot;20e arrdt&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-3"><a href="08-Ggplot-pratique.html#cb116-3" tabindex="-1"></a>  <span class="fu">group_by</span>(annee, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb116-4"><a href="08-Ggplot-pratique.html#cb116-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">med_prixm2 =</span> <span class="fu">round</span>(<span class="fu">median</span>(px_m2),<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-5"><a href="08-Ggplot-pratique.html#cb116-5" tabindex="-1"></a>  <span class="fu">select</span>(med_prixm2, annee, nom_arrdt) <span class="sc">%&gt;%</span> </span>
<span id="cb116-6"><a href="08-Ggplot-pratique.html#cb116-6" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb116-7"><a href="08-Ggplot-pratique.html#cb116-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nom_arrdt=</span><span class="fu">factor</span>(nom_arrdt, </span>
<span id="cb116-8"><a href="08-Ggplot-pratique.html#cb116-8" tabindex="-1"></a>                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;6e arrdt&quot;</span>, <span class="st">&quot;7e arrdt&quot;</span>, <span class="st">&quot;4e arrdt&quot;</span>,<span class="st">&quot;13e arrdt&quot;</span>,<span class="st">&quot;20e arrdt&quot;</span>,<span class="st">&quot;19e arrdt&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb116-9"><a href="08-Ggplot-pratique.html#cb116-9" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>annee, <span class="at">y=</span>med_prixm2, <span class="at">color=</span>nom_arrdt) <span class="sc">+</span> </span>
<span id="cb116-10"><a href="08-Ggplot-pratique.html#cb116-10" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group=</span>nom_arrdt), <span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb116-11"><a href="08-Ggplot-pratique.html#cb116-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">6000</span>,<span class="dv">16000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">6000</span>,<span class="dv">16000</span>,<span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb116-12"><a href="08-Ggplot-pratique.html#cb116-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Evolution du prix médian au m2 des appartements vendus à Paris, dans les 3 arrondissements </span><span class="sc">\n</span><span class="st">ayant les prix les plus élevés et les 3 arrondissements ayant les prix les moins élevés&quot;</span>, <span class="at">x =</span> <span class="st">&quot; &quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>, <span class="at">color=</span><span class="st">&quot;Arrondissement&quot;</span>) <span class="sc">+</span></span>
<span id="cb116-13"><a href="08-Ggplot-pratique.html#cb116-13" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="fl">10.3</span>),</span>
<span id="cb116-14"><a href="08-Ggplot-pratique.html#cb116-14" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb116-15"><a href="08-Ggplot-pratique.html#cb116-15" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span>
<span id="cb116-16"><a href="08-Ggplot-pratique.html#cb116-16" tabindex="-1"></a></span>
<span id="cb116-17"><a href="08-Ggplot-pratique.html#cb116-17" tabindex="-1"></a><span class="fu">ggplotly</span>(g_evo_pls, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">&quot;med_prixm2&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-18"><a href="08-Ggplot-pratique.html#cb116-18" tabindex="-1"></a> <span class="fu">layout</span>(<span class="at">margin =</span> <span class="fu">list</span>(<span class="at">l =</span> <span class="dv">50</span>, <span class="at">r =</span> <span class="dv">50</span>, <span class="at">b =</span> <span class="dv">80</span>, <span class="at">t =</span> <span class="dv">50</span>),</span>
<span id="cb116-19"><a href="08-Ggplot-pratique.html#cb116-19" tabindex="-1"></a>        <span class="at">annotations =</span> <span class="fu">list</span>(<span class="at">text =</span> <span class="st">&quot;Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto. </span><span class="sc">\n</span><span class="st">Note : l&#39;axe des ordonnées ne commence qu&#39;à 6000€&quot;</span>,</span>
<span id="cb116-20"><a href="08-Ggplot-pratique.html#cb116-20" tabindex="-1"></a>                           <span class="at">showarrow =</span> F, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.2</span>, </span>
<span id="cb116-21"><a href="08-Ggplot-pratique.html#cb116-21" tabindex="-1"></a>                           <span class="at">xref=</span><span class="st">&#39;paper&#39;</span>, <span class="at">yref=</span><span class="st">&#39;paper&#39;</span>, <span class="at">xanchor=</span><span class="st">&#39;left&#39;</span>, <span class="at">yanchor=</span><span class="st">&#39;auto&#39;</span>,  </span>
<span id="cb116-22"><a href="08-Ggplot-pratique.html#cb116-22" tabindex="-1"></a>                           <span class="at">xshift=</span><span class="dv">0</span>, <span class="at">yshift=</span><span class="dv">0</span>, <span class="at">font=</span><span class="fu">list</span>(<span class="at">size=</span><span class="fl">10.3</span>), <span class="at">align=</span><span class="st">&quot;left&quot;</span>))</span></code></pre></div>
</div>
<p>Pour tous les arrondissements, les prix médians au m2 sont à la hausse entre 2019 et 2020, mais connaissent ensuite parfois des stagnations, alors que d’autres continuent à augmenter (surtout pour le 6ème arronddisement), entre 2021 et 2022, deux arrondissements se démarquent - les 4ème et 7ème - car le prix médian continue à augmenter contrairement aux autres pour lesquels il diminue ou stagne.</p>
</div>
<div id="top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-arrondissements" class="section level3 hasAnchor" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> Top 5 du prix au m2 des ventes d’appartements selon les arrondissements<a href="08-Ggplot-pratique.html#top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-arrondissements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Enfin, construisez un graphique en bâtons indiquant les seuls 5 premiers arrondissements ayant les prix moyens au m2 des ventes d’appartements les plus élevés, puis les prix médians, et les mettre côte à côte.</p>
<img src="Data-Mining_files/figure-html/unnamed-chunk-95-1.svg" width="672" />
<div class="solution-exo">
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="08-Ggplot-pratique.html#cb117-1" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="08-Ggplot-pratique.html#cb117-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span></span>
<span id="cb117-3"><a href="08-Ggplot-pratique.html#cb117-3" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span>  </span>
<span id="cb117-4"><a href="08-Ggplot-pratique.html#cb117-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">moy_prixm2 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(px_m2))) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="08-Ggplot-pratique.html#cb117-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(moy_prixm2)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-6"><a href="08-Ggplot-pratique.html#cb117-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_prixm2, <span class="at">y =</span> <span class="fu">fct_reorder</span>(nom_arrdt, moy_prixm2))  <span class="sc">+</span> </span>
<span id="cb117-7"><a href="08-Ggplot-pratique.html#cb117-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;darkgoldenrod1&quot;</span>)  <span class="sc">+</span></span>
<span id="cb117-8"><a href="08-Ggplot-pratique.html#cb117-8" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>moy_prixm2), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust=</span><span class="fl">0.5</span>), <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb117-9"><a href="08-Ggplot-pratique.html#cb117-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Prix moyens&quot;</span>,</span>
<span id="cb117-10"><a href="08-Ggplot-pratique.html#cb117-10" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb117-11"><a href="08-Ggplot-pratique.html#cb117-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb117-12"><a href="08-Ggplot-pratique.html#cb117-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>, <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb117-13"><a href="08-Ggplot-pratique.html#cb117-13" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb117-14"><a href="08-Ggplot-pratique.html#cb117-14" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb117-15"><a href="08-Ggplot-pratique.html#cb117-15" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>))</span>
<span id="cb117-16"><a href="08-Ggplot-pratique.html#cb117-16" tabindex="-1"></a></span>
<span id="cb117-17"><a href="08-Ggplot-pratique.html#cb117-17" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> dvf_Paris_1 <span class="sc">%&gt;%</span> </span>
<span id="cb117-18"><a href="08-Ggplot-pratique.html#cb117-18" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(code_postal)) <span class="sc">%&gt;%</span></span>
<span id="cb117-19"><a href="08-Ggplot-pratique.html#cb117-19" tabindex="-1"></a>  <span class="fu">group_by</span>(nom_arrdt) <span class="sc">%&gt;%</span>  </span>
<span id="cb117-20"><a href="08-Ggplot-pratique.html#cb117-20" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">moy_prixm2 =</span> <span class="fu">round</span>(<span class="fu">mean</span>(px_m2))) <span class="sc">%&gt;%</span> </span>
<span id="cb117-21"><a href="08-Ggplot-pratique.html#cb117-21" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(moy_prixm2)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-22"><a href="08-Ggplot-pratique.html#cb117-22" tabindex="-1"></a>      <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> moy_prixm2, <span class="at">y =</span> <span class="fu">fct_reorder</span>(nom_arrdt, moy_prixm2))  <span class="sc">+</span> </span>
<span id="cb117-23"><a href="08-Ggplot-pratique.html#cb117-23" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">fill=</span><span class="st">&quot;coral1&quot;</span>)  <span class="sc">+</span></span>
<span id="cb117-24"><a href="08-Ggplot-pratique.html#cb117-24" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>moy_prixm2), <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust=</span><span class="fl">0.5</span>), </span>
<span id="cb117-25"><a href="08-Ggplot-pratique.html#cb117-25" tabindex="-1"></a>                <span class="at">size=</span><span class="fl">2.8</span>) <span class="sc">+</span></span>
<span id="cb117-26"><a href="08-Ggplot-pratique.html#cb117-26" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Prix médians&quot;</span>,</span>
<span id="cb117-27"><a href="08-Ggplot-pratique.html#cb117-27" tabindex="-1"></a>           <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot; &quot;</span>) <span class="sc">+</span></span>
<span id="cb117-28"><a href="08-Ggplot-pratique.html#cb117-28" tabindex="-1"></a>      <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb117-29"><a href="08-Ggplot-pratique.html#cb117-29" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>, <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">9</span>),</span>
<span id="cb117-30"><a href="08-Ggplot-pratique.html#cb117-30" tabindex="-1"></a>            <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb117-31"><a href="08-Ggplot-pratique.html#cb117-31" tabindex="-1"></a>            <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb117-32"><a href="08-Ggplot-pratique.html#cb117-32" tabindex="-1"></a>            <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>))</span>
<span id="cb117-33"><a href="08-Ggplot-pratique.html#cb117-33" tabindex="-1"></a></span>
<span id="cb117-34"><a href="08-Ggplot-pratique.html#cb117-34" tabindex="-1"></a>(p5 <span class="sc">+</span> p6) <span class="sc">+</span></span>
<span id="cb117-35"><a href="08-Ggplot-pratique.html#cb117-35" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span>  <span class="st">&quot;Top 5 des arrondissements ayant les prix au m2 des ventes d&#39;appartements les plus élevés&quot;</span>, </span>
<span id="cb117-36"><a href="08-Ggplot-pratique.html#cb117-36" tabindex="-1"></a>                <span class="at">caption =</span> <span class="st">&quot;Source : Base &#39;demande de valeurs foncières&#39;, 2019-2022. </span><span class="sc">\n</span><span class="st">Calculs : Camille Signoretto.&quot;</span>, </span>
<span id="cb117-37"><a href="08-Ggplot-pratique.html#cb117-37" tabindex="-1"></a>                <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))) <span class="sc">&amp;</span></span>
<span id="cb117-38"><a href="08-Ggplot-pratique.html#cb117-38" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
</div>
<p>On retrouve les mêmes résultats.</p>
</div>
<div id="à-vous-de-jouer" class="section level3 hasAnchor" number="8.2.5">
<h3><span class="header-section-number">8.2.5</span> À vous de “jouer” !<a href="08-Ggplot-pratique.html#à-vous-de-jouer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Bien sûr, vous pouvez créer des fonctions sur ces graphiques ; puis “jouez” avec d’autres variables, notamment la surface et le nombre de pièces ; ou encore construire des cartes sur le niveau commune ; utiliser d’autres types de graphiques ; etc. ; etc.</p>

</div>
</div>
</div>






<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="07-Ggplot-theorique.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/Data-Mining-2024/master/08-Ggplot-pratique.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
