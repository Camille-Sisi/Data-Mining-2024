<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 3 Manipulation des variables | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 3 Manipulation des variables | DATA MINING" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 3 Manipulation des variables | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Camille Signoretto, Maîtresse de conférences en économie, Université Paris Cité" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="02-Manipulation-base.html"/>
<link rel="next" href="04-Récapitulatif.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Mining :  <em>Camille Signoretto</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-Presentation.html"><a href="00-Presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="part"><span><b>Séance 1 : Data Wrangling</b></span></li>
<li class="chapter" data-level="1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html"><i class="fa fa-check"></i><b>1</b> Récupération de la base de données</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#les-données-du-recensement-de-la-population-rp"><i class="fa fa-check"></i><b>1.1</b> Les données du Recensement de la Population (RP)</a></li>
<li class="chapter" data-level="1.2" data-path="01-Base-de-donnees.html"><a href="01-Base-de-donnees.html#quelles-informations-intéressantes-dans-cette-base"><i class="fa fa-check"></i><b>1.2</b> Quelles informations intéressantes dans cette base ?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html"><i class="fa fa-check"></i><b>2</b> Manipulation de la base</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#format-des-données---wide-ou-long"><i class="fa fa-check"></i><b>2.1</b> Format des données - WIDE ou LONG</a></li>
<li class="chapter" data-level="2.2" data-path="02-Manipulation-base.html"><a href="02-Manipulation-base.html#sélectionner-un-champ-réduit-de-la-base-séparer-les-données"><i class="fa fa-check"></i><b>2.2</b> Sélectionner un champ réduit de la base, séparer les données</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html"><i class="fa fa-check"></i><b>3</b> Manipulation des variables</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives"><i class="fa fa-check"></i><b>3.1</b> Manipulation des variables qualitatives</a></li>
<li class="chapter" data-level="3.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives"><i class="fa fa-check"></i><b>3.2</b> Manipulation des variables quantitatives</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.1</b> Détecter et “visualiser” les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes"><i class="fa fa-check"></i><b>3.2.2</b> Gérer les valeurs manquantes</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes"><i class="fa fa-check"></i><b>3.2.3</b> Détecter et “visualiser” les valeurs aberrantes</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-Manipulation-variables.html"><a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative"><i class="fa fa-check"></i><b>3.2.4</b> Découper en classes une variable quantitative</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html"><i class="fa fa-check"></i><b>4</b> Récapitulatig séance 1 - Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#ce-quon-a-appris"><i class="fa fa-check"></i><b>4.1</b> Ce qu’on a appris</a></li>
<li class="chapter" data-level="4.2" data-path="04-Récapitulatif.html"><a href="04-Récapitulatif.html#enregistrement-des-tables"><i class="fa fa-check"></i><b>4.2</b> Enregistrement des tables</a></li>
</ul></li>
<li class="part"><span><b>Séance 2 : Data Mining - Analyse descriptive</b></span></li>
<li class="chapter" data-level="5" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html"><i class="fa fa-check"></i><b>5</b> Quelles questions intéressantes pour une “fouille de données” sur cette base ?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-résidant-à-paris"><i class="fa fa-check"></i><b>5.1</b> Caractéristiques de la population résidant à Paris</a></li>
<li class="chapter" data-level="5.2" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-de-la-population-active-résidant-à-paris"><i class="fa fa-check"></i><b>5.2</b> Caractéristiques de la population active résidant à Paris</a></li>
<li class="chapter" data-level="5.3" data-path="05-Questions-fouille-donnees.html"><a href="05-Questions-fouille-donnees.html#caractéristiques-des-logements-parisiens"><i class="fa fa-check"></i><b>5.3</b> Caractéristiques des logements parisiens</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06-Fonctions.html"><a href="06-Fonctions.html"><i class="fa fa-check"></i><b>6</b> Systématiser nos procédures : construire une fonction</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06-Fonctions.html"><a href="06-Fonctions.html#principes-généraux-dune-fonction"><i class="fa fa-check"></i><b>6.1</b> Principes généraux d’une fonction</a></li>
<li class="chapter" data-level="6.2" data-path="06-Fonctions.html"><a href="06-Fonctions.html#exemples-de-fonctions"><i class="fa fa-check"></i><b>6.2</b> Exemples de fonctions</a></li>
</ul></li>
<li class="part"><span><b>Séance 3 : Data Mining - Data Visualization</b></span></li>
<li class="chapter" data-level="7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html"><i class="fa fa-check"></i><b>7</b> Data Visualization et Ggplot2 : aspects théoriques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#présentation-générale-de-ggplot2"><i class="fa fa-check"></i><b>7.1</b> Présentation générale de Ggplot2</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-aesthetics-ou-arguments-esthétiques"><i class="fa fa-check"></i><b>7.1.1</b> Les “aesthetics” ou arguments esthétiques</a></li>
<li class="chapter" data-level="7.1.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-géométries"><i class="fa fa-check"></i><b>7.1.2</b> Les géométries</a></li>
<li class="chapter" data-level="7.1.3" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-facettes"><i class="fa fa-check"></i><b>7.1.3</b> Les facettes</a></li>
<li class="chapter" data-level="7.1.4" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-statistiques"><i class="fa fa-check"></i><b>7.1.4</b> Les statistiques</a></li>
<li class="chapter" data-level="7.1.5" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-coordonnées"><i class="fa fa-check"></i><b>7.1.5</b> Les coordonnées</a></li>
<li class="chapter" data-level="7.1.6" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-thèmes"><i class="fa fa-check"></i><b>7.1.6</b> Les thèmes</a></li>
<li class="chapter" data-level="7.1.7" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-autres-options-graphiques-titres-échelles-des-axes-etc."><i class="fa fa-check"></i><b>7.1.7</b> Les autres options graphiques : titres, échelles des axes, etc.</a></li>
<li class="chapter" data-level="7.1.8" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#code-minimal"><i class="fa fa-check"></i><b>7.1.8</b> Code minimal</a></li>
<li class="chapter" data-level="7.1.9" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#liens-utiles-pour-aller-plus-loin"><i class="fa fa-check"></i><b>7.1.9</b> Liens utiles pour aller plus loin</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07-Ggplot-theorique.html"><a href="07-Ggplot-theorique.html#les-grands-principes-de-data-visualization"><i class="fa fa-check"></i><b>7.2</b> Les grands principes de data visualization</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html"><i class="fa fa-check"></i><b>8</b> Data Mining et Data Visualization en pratique</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#exemple-de-la-construction-dun-graphique-pas-à-pas"><i class="fa fa-check"></i><b>8.1</b> Exemple de la construction d’un graphique pas à pas</a></li>
<li class="chapter" data-level="8.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#dautres-exemples-à-travers-des-exercices"><i class="fa fa-check"></i><b>8.2</b> D’autres exemples à travers des exercices</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#distribution-du-prix-au-m2-pour-les-appartements-parisiens-selon-lannée"><i class="fa fa-check"></i><b>8.2.1</b> Distribution du prix au m2 pour les appartements parisiens, selon l’année</a></li>
<li class="chapter" data-level="8.2.2" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#comparaison-des-montants-moyen-et-médian-du-prix-au-m2-par-arrondissement-de-paris"><i class="fa fa-check"></i><b>8.2.2</b> Comparaison des montants moyen et médian du prix au m2, par arrondissement de Paris</a></li>
<li class="chapter" data-level="8.2.3" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#evolution-du-prix-médian-au-m2-des-ventes-dappartements-à-paris"><i class="fa fa-check"></i><b>8.2.3</b> Evolution du prix médian au m2 des ventes d’appartements à Paris</a></li>
<li class="chapter" data-level="8.2.4" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#top-5-du-prix-au-m2-des-ventes-dappartements-selon-les-arrondissements"><i class="fa fa-check"></i><b>8.2.4</b> Top 5 du prix au m2 des ventes d’appartements selon les arrondissements</a></li>
<li class="chapter" data-level="8.2.5" data-path="08-Ggplot-pratique.html"><a href="08-Ggplot-pratique.html#à-vous-de-jouer"><i class="fa fa-check"></i><b>8.2.5</b> À vous de “jouer” !</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Séance 4 : Data Visualization - Introduction à ShinyApp</b></span></li>
<li class="chapter" data-level="9" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html"><i class="fa fa-check"></i><b>9</b> Les applications interactives avec Shiny App</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-structure-générale-dune-application-shiny"><i class="fa fa-check"></i><b>9.1</b> La structure générale d’une application Shiny</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-partie-ui"><i class="fa fa-check"></i><b>9.1.1</b> La partie “UI”</a></li>
<li class="chapter" data-level="9.1.2" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-partie-server"><i class="fa fa-check"></i><b>9.1.2</b> La partie “Server”</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#la-réactivité"><i class="fa fa-check"></i><b>9.2</b> La réactivité</a></li>
<li class="chapter" data-level="9.3" data-path="09-Intro-a-Shiny-theorique.html"><a href="09-Intro-a-Shiny-theorique.html#un-exemple-avec-le-code-du-script-par-défaut"><i class="fa fa-check"></i><b>9.3</b> Un exemple avec le code du script par défaut</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html"><i class="fa fa-check"></i><b>10</b> La création d’une application Shiny “pas à pas” avec l’une de nos bases de données</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#application-vide"><i class="fa fa-check"></i><b>10.1</b> Application vide</a></li>
<li class="chapter" data-level="10.2" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#ajout-dun-titre-et-dun-widget"><i class="fa fa-check"></i><b>10.2</b> Ajout d’un titre et d’un widget</a></li>
<li class="chapter" data-level="10.3" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#ajout-dun-graphique"><i class="fa fa-check"></i><b>10.3</b> Ajout d’un graphique</a></li>
<li class="chapter" data-level="10.4" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#modification-du-graphique-filtrer-selon-une-variable"><i class="fa fa-check"></i><b>10.4</b> Modification du graphique : filtrer selon une variable</a></li>
<li class="chapter" data-level="10.5" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#modification-du-graphique-selon-une-variable-au-choix-parmi-deux"><i class="fa fa-check"></i><b>10.5</b> Modification du graphique : selon une variable au choix parmi deux</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#applications-plus-poussées-sur-shiny"><i class="fa fa-check"></i><b>11</b> Applications plus poussées sur Shiny</a>
<ul>
<li class="chapter" data-level="11.1" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#application-avec-un-tableau-et-un-graphique-sur-une-autre-base-de-données"><i class="fa fa-check"></i><b>11.1</b> Application avec un tableau et un graphique sur une autre base de données</a></li>
<li class="chapter" data-level="11.2" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#introduction-dune-réactivité-appliquée-à-la-table-de-données"><i class="fa fa-check"></i><b>11.2</b> Introduction d’une réactivité appliquée à la table de données</a></li>
<li class="chapter" data-level="11.3" data-path="10-Intro-a-Shiny-exemples.html"><a href="10-Intro-a-Shiny-exemples.html#introduction-dune-réactivité-sur-les-inputs-contexte-réactif"><i class="fa fa-check"></i><b>11.3</b> Introduction d’une réactivité sur les inputs (contexte réactif)</a></li>
</ul></li>
<li class="part"><span><b>Séance 5 : Data Mining - Clustering</b></span></li>
<li class="chapter" data-level="12" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html"><i class="fa fa-check"></i><b>12</b> Clustering : aspects théoriques</a>
<ul>
<li class="chapter" data-level="12.1" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html#la-classification-ascendante-hiérarchique-cah"><i class="fa fa-check"></i><b>12.1</b> La classification ascendante hiérarchique (CAH)</a></li>
<li class="chapter" data-level="12.2" data-path="11-Clustering-theorique.html"><a href="11-Clustering-theorique.html#la-méthode-des-centres-mobiles-et-sa-variante-les-k-means"><i class="fa fa-check"></i><b>12.2</b> La méthode des centres mobiles et sa variante, <em>les K-means</em></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c03-Manipulation-variables" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Section 3</span> Manipulation des variables<a href="03-Manipulation-variables.html#c03-Manipulation-variables" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div align="justify">

<p>Dans la manipulation des variables, l’une des premières choses à réaliser est de les définir dans le bon format, variables quantitatives/continues ou variables qualitatives/catégorielles.</p>
<p>On l’a vu dans la section précédente, certaines variables sont encore codées comme des nombres entiers (“integer”) alors que ce sont des variables catégorielles. On va donc corriger cela en regardant d’abord quelles variables sont concernées, en les sélectionnant avec <code>select_if()</code> ou <code>select(where())</code> :</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="03-Manipulation-variables.html#cb16-1" tabindex="-1"></a>RP_final <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="03-Manipulation-variables.html#cb16-2" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="03-Manipulation-variables.html#cb16-3" tabindex="-1"></a>  <span class="fu">names</span>()</span></code></pre></div>
<pre><code> [1] &quot;AGED&quot;      &quot;AGER20&quot;    &quot;AGEREV&quot;    &quot;AGEREVQ&quot;   &quot;ANAI&quot;      &quot;CATPC&quot;    
 [7] &quot;COUPLE&quot;    &quot;CS1&quot;       &quot;DEPT&quot;      &quot;ETUD&quot;      &quot;IMMI&quot;      &quot;INAI&quot;     
[13] &quot;INATC&quot;     &quot;IPONDI&quot;    &quot;MOCO&quot;      &quot;MODV&quot;      &quot;NAIDT&quot;     &quot;ORIDT&quot;    
[19] &quot;REGION&quot;    &quot;SEXE&quot;      &quot;STAT_CONJ&quot; &quot;TACT&quot;      &quot;TACTD16&quot;  </code></pre>
<p>A part les variables d’âge <code>AGED</code> et <code>AGEREV</code>, de date de naissance <code>ANAI</code> et de pondération <code>IPONDI</code>, toutes les autres variables devraient en format “factor”. Deux façons de les transformer, soit vous changer les variables une à une en utilisant les fonctions <code>mutate()</code> et <code>as.factor()</code> ; soit vous créer une liste avec le nom des variables dont le format doit être transformer et vous utilisez la fonction <code>lapply()</code> en l’appliquant à cette liste de variables :</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="03-Manipulation-variables.html#cb18-1" tabindex="-1"></a>RP_final <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">AGER20=</span><span class="fu">as.factor</span>(AGER20),</span>
<span id="cb18-2"><a href="03-Manipulation-variables.html#cb18-2" tabindex="-1"></a>                                <span class="at">AGEREVQ=</span><span class="fu">as.factor</span>(AGEREVQ),</span>
<span id="cb18-3"><a href="03-Manipulation-variables.html#cb18-3" tabindex="-1"></a>                                <span class="at">CATPC=</span><span class="fu">as.factor</span>(CATPC),</span>
<span id="cb18-4"><a href="03-Manipulation-variables.html#cb18-4" tabindex="-1"></a>                                <span class="at">COUPLE=</span><span class="fu">as.factor</span>(COUPLE),</span>
<span id="cb18-5"><a href="03-Manipulation-variables.html#cb18-5" tabindex="-1"></a>                                <span class="at">CS1=</span><span class="fu">as.factor</span>(CS1),</span>
<span id="cb18-6"><a href="03-Manipulation-variables.html#cb18-6" tabindex="-1"></a>                                <span class="at">DEPT=</span><span class="fu">as.factor</span>(DEPT),</span>
<span id="cb18-7"><a href="03-Manipulation-variables.html#cb18-7" tabindex="-1"></a>                                <span class="at">ETUD=</span><span class="fu">as.factor</span>(ETUD),</span>
<span id="cb18-8"><a href="03-Manipulation-variables.html#cb18-8" tabindex="-1"></a>                                <span class="at">IMMI=</span><span class="fu">as.factor</span>(IMMI),</span>
<span id="cb18-9"><a href="03-Manipulation-variables.html#cb18-9" tabindex="-1"></a>                                <span class="at">INAI=</span><span class="fu">as.factor</span>(INAI),</span>
<span id="cb18-10"><a href="03-Manipulation-variables.html#cb18-10" tabindex="-1"></a>                                <span class="at">INATC=</span><span class="fu">as.factor</span>(INATC),</span>
<span id="cb18-11"><a href="03-Manipulation-variables.html#cb18-11" tabindex="-1"></a>                                <span class="at">MOCO=</span><span class="fu">as.factor</span>(MOCO),</span>
<span id="cb18-12"><a href="03-Manipulation-variables.html#cb18-12" tabindex="-1"></a>                                <span class="at">MODV=</span><span class="fu">as.factor</span>(MODV),</span>
<span id="cb18-13"><a href="03-Manipulation-variables.html#cb18-13" tabindex="-1"></a>                                <span class="at">NAIDT=</span><span class="fu">as.factor</span>(NAIDT),</span>
<span id="cb18-14"><a href="03-Manipulation-variables.html#cb18-14" tabindex="-1"></a>                                <span class="at">ORIDT=</span><span class="fu">as.factor</span>(ORIDT),</span>
<span id="cb18-15"><a href="03-Manipulation-variables.html#cb18-15" tabindex="-1"></a>                                <span class="at">REGION=</span><span class="fu">as.factor</span>(REGION),</span>
<span id="cb18-16"><a href="03-Manipulation-variables.html#cb18-16" tabindex="-1"></a>                                <span class="at">SEXE=</span><span class="fu">as.factor</span>(SEXE),</span>
<span id="cb18-17"><a href="03-Manipulation-variables.html#cb18-17" tabindex="-1"></a>                                <span class="at">STAT_CONJ=</span><span class="fu">as.factor</span>(STAT_CONJ),</span>
<span id="cb18-18"><a href="03-Manipulation-variables.html#cb18-18" tabindex="-1"></a>                                <span class="at">TACT=</span><span class="fu">as.factor</span>(TACT),</span>
<span id="cb18-19"><a href="03-Manipulation-variables.html#cb18-19" tabindex="-1"></a>                                <span class="at">TACTD16=</span><span class="fu">as.factor</span>(TACTD16))</span>
<span id="cb18-20"><a href="03-Manipulation-variables.html#cb18-20" tabindex="-1"></a></span>
<span id="cb18-21"><a href="03-Manipulation-variables.html#cb18-21" tabindex="-1"></a><span class="co"># 2nde méthode</span></span>
<span id="cb18-22"><a href="03-Manipulation-variables.html#cb18-22" tabindex="-1"></a><span class="co"># list_var &lt;- c(&quot;AGER20&quot;, &quot;AGEREVQ&quot;, &quot;CATPC&quot;, &quot;COUPLE&quot;, &quot;CS1&quot;, &quot;DEPT&quot;, &quot;ETUD&quot;, &quot;IMMI&quot;, &quot;INAI&quot;, &quot;INATC&quot;,</span></span>
<span id="cb18-23"><a href="03-Manipulation-variables.html#cb18-23" tabindex="-1"></a><span class="co">#               &quot;MOCO&quot;, &quot;MODV&quot;, &quot;NAIDT&quot;, &quot;REGION&quot;, &quot;SEXE&quot;, &quot;STAT_CONJ&quot;, &quot;TACT&quot;, &quot;TACTD16&quot;)</span></span>
<span id="cb18-24"><a href="03-Manipulation-variables.html#cb18-24" tabindex="-1"></a><span class="co"># RP_final[, list_var] &lt;- lapply(RP_final[, list_var], factor)</span></span></code></pre></div>
<p>On peut ensuite vérifier que ces variables sont bien des variables facteurs en regardant combien de modalités elles ont et quelles sont-elles. Par exemple, pour la variable <code>CATPC</code> :</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="03-Manipulation-variables.html#cb19-1" tabindex="-1"></a><span class="fu">nlevels</span>(RP_final<span class="sc">$</span>CATPC)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="03-Manipulation-variables.html#cb21-1" tabindex="-1"></a><span class="fu">levels</span>(RP_final<span class="sc">$</span>CATPC)</span></code></pre></div>
<pre><code>[1] &quot;0&quot; &quot;1&quot; &quot;2&quot;</code></pre>
<p>Si nous n’avions pas mis l’option transformant les variables caractères en variables facteurs lors du chargement des données, nous pourrions le faire maintenant en utilisant la fonction <code>mutate_if</code> ou la combinaison de <code>mutate</code> et <code>across(where())</code> comme ceci <code>RP %&gt;% mutate_if(is.character, as.factor)</code> ou <code>RP %&gt;% mutate(across(where(is.character), as.factor))</code>.</p>
<p>On peut enfin vérifier quelles sont les variables numériques qui restent :</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="03-Manipulation-variables.html#cb23-1" tabindex="-1"></a><span class="co"># RP_final %&gt;% select_if(is.numeric) %&gt;% head() %&gt;% gt()</span></span>
<span id="cb23-2"><a href="03-Manipulation-variables.html#cb23-2" tabindex="-1"></a>RP_final <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="orrqbhpyfn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#orrqbhpyfn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#orrqbhpyfn thead, #orrqbhpyfn tbody, #orrqbhpyfn tfoot, #orrqbhpyfn tr, #orrqbhpyfn td, #orrqbhpyfn th {
  border-style: none;
}

#orrqbhpyfn p {
  margin: 0;
  padding: 0;
}

#orrqbhpyfn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#orrqbhpyfn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#orrqbhpyfn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#orrqbhpyfn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#orrqbhpyfn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#orrqbhpyfn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orrqbhpyfn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#orrqbhpyfn .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#orrqbhpyfn .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#orrqbhpyfn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#orrqbhpyfn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#orrqbhpyfn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#orrqbhpyfn .gt_spanner_row {
  border-bottom-style: hidden;
}

#orrqbhpyfn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#orrqbhpyfn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#orrqbhpyfn .gt_from_md > :first-child {
  margin-top: 0;
}

#orrqbhpyfn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#orrqbhpyfn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#orrqbhpyfn .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#orrqbhpyfn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#orrqbhpyfn .gt_row_group_first td {
  border-top-width: 2px;
}

#orrqbhpyfn .gt_row_group_first th {
  border-top-width: 2px;
}

#orrqbhpyfn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#orrqbhpyfn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#orrqbhpyfn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#orrqbhpyfn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orrqbhpyfn .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#orrqbhpyfn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#orrqbhpyfn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#orrqbhpyfn .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#orrqbhpyfn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#orrqbhpyfn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#orrqbhpyfn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#orrqbhpyfn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#orrqbhpyfn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#orrqbhpyfn .gt_left {
  text-align: left;
}

#orrqbhpyfn .gt_center {
  text-align: center;
}

#orrqbhpyfn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#orrqbhpyfn .gt_font_normal {
  font-weight: normal;
}

#orrqbhpyfn .gt_font_bold {
  font-weight: bold;
}

#orrqbhpyfn .gt_font_italic {
  font-style: italic;
}

#orrqbhpyfn .gt_super {
  font-size: 65%;
}

#orrqbhpyfn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#orrqbhpyfn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#orrqbhpyfn .gt_indent_1 {
  text-indent: 5px;
}

#orrqbhpyfn .gt_indent_2 {
  text-indent: 10px;
}

#orrqbhpyfn .gt_indent_3 {
  text-indent: 15px;
}

#orrqbhpyfn .gt_indent_4 {
  text-indent: 20px;
}

#orrqbhpyfn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AGED">AGED</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AGEREV">AGEREV</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ANAI">ANAI</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="IPONDI">IPONDI</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="AGED" class="gt_row gt_right">72</td>
<td headers="AGEREV" class="gt_row gt_right">72</td>
<td headers="ANAI" class="gt_row gt_right">1944</td>
<td headers="IPONDI" class="gt_row gt_right">3.360730</td></tr>
    <tr><td headers="AGED" class="gt_row gt_right">59</td>
<td headers="AGEREV" class="gt_row gt_right">58</td>
<td headers="ANAI" class="gt_row gt_right">1958</td>
<td headers="IPONDI" class="gt_row gt_right">3.668459</td></tr>
    <tr><td headers="AGED" class="gt_row gt_right">30</td>
<td headers="AGEREV" class="gt_row gt_right">29</td>
<td headers="ANAI" class="gt_row gt_right">1987</td>
<td headers="IPONDI" class="gt_row gt_right">3.668459</td></tr>
    <tr><td headers="AGED" class="gt_row gt_right">82</td>
<td headers="AGEREV" class="gt_row gt_right">81</td>
<td headers="ANAI" class="gt_row gt_right">1938</td>
<td headers="IPONDI" class="gt_row gt_right">3.478821</td></tr>
    <tr><td headers="AGED" class="gt_row gt_right">86</td>
<td headers="AGEREV" class="gt_row gt_right">85</td>
<td headers="ANAI" class="gt_row gt_right">1934</td>
<td headers="IPONDI" class="gt_row gt_right">3.478821</td></tr>
    <tr><td headers="AGED" class="gt_row gt_right">1</td>
<td headers="AGEREV" class="gt_row gt_right">0</td>
<td headers="ANAI" class="gt_row gt_right">2019</td>
<td headers="IPONDI" class="gt_row gt_right">2.776887</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Plus généralement, il est souvent d’usage d’utiliser la fonction <code>summary()</code> pour donner un aperçu de l’ensemble des variables, soit de leur distribution pour les variables quantitatives, soit de leur répartition par modalités pour les variables qualitatives ; la fonction permet également de nous donner l’information sur l’existence et le nombre de valeurs manquantes pour chaque variable.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="03-Manipulation-variables.html#cb24-1" tabindex="-1"></a><span class="fu">summary</span>(RP_final)</span></code></pre></div>
<pre><code>   CANTVILLE           ACHLR            AEMMR              AGED       
 75ZZ   : 853167   3      :687155   9      :2032861   Min.   :  0.00  
 9296   :  47490   4      :656626   8      : 286192   1st Qu.: 21.00  
 9398   :  43375   2      :314367   7      : 146463   Median : 36.00  
 9399   :  43104   1      :303570   6      :  91377   Mean   : 38.44  
 9499   :  37585   6      :301595   Z      :  34562   3rd Qu.: 55.00  
 9299   :  36678   5      :270547   5      :  30169   Max.   :120.00  
 (Other):1574634   (Other):102173   (Other):  14409                   
     AGER20           AGEREV         AGEREVQ             ANAI     
 54     :515753   Min.   :  0.0   25     : 226438   Min.   :1896  
 39     :412404   1st Qu.: 20.0   30     : 214781   1st Qu.:1963  
 64     :273384   Median : 36.0   35     : 197623   Median :1981  
 79     :263157   Mean   : 37.5   20     : 186496   Mean   :1980  
 29     :226438   3rd Qu.: 54.0   40     : 181466   3rd Qu.:1997  
 24     :186496   Max.   :119.0   0      : 177322   Max.   :2020  
 (Other):758401                   (Other):1451907                 
     ANEMR             APAF             ARM          ASCEN       BAIN       
 01     :655689   3      :777547   ZZZZZ  :1782866   1:1460332   X:  34562  
 03     :564056   0      :643516   75115  :  90717   2:1141139   Z:2601471  
 02     :542791   2      :620004   75118  :  78739   Z:  34562              
 00     :317238   1      :539040   75120  :  75863                          
 04     :256066   Z      : 34562   75119  :  73388                          
 05     :140210   6      :  8547   75113  :  70196                          
 (Other):159983   (Other): 12817   (Other): 464264                          
 BATI        CATIRIS     CATL        CATPC       CHAU        CHFL       
 X:  34562   A:  29884   1:2601471   0:2601471   X:  34562   1:1370090  
 Z:2601471   D:   1488   Z:  34562   1:  26328   Z:2601471   2: 654195  
             H:2597963               2:   8234               3: 563224  
             X:    988                                       4:  13962  
             Z:   5710                                       X:  34562  
                                                                        
                                                                        
 CHOS        CLIM        CMBL        COUPLE           CS1         CUIS       
 X:  34562   X:  34562   1: 583799   1:1091726   8      :903563   X:  34562  
 Z:2601471   Z:2601471   2:1060384   2:1544307   3      :457534   Z:2601471  
                         3: 117844               7      :374763              
                         4: 764429               5      :343737              
                         5:   7861               4      :323394              
                         6:  67154               6      :162434              
                         X:  34562               (Other): 70608              
 DEPT             DIPL             DNAI        EAU         EGOUL      
 75:853167   18     :486255   99     :716703   X:  34562   X:  34562  
 92:621663   ZZ     :465748   75     :538277   Z:2601471   Z:2601471  
 93:629049   17     :280471   92     :262709                          
 94:532154   13     :252762   93     :241894                          
             14     :252350   94     :185218                          
             16     :197267   78     : 37782                          
             (Other):701180   (Other):653450                          
 ELEC             EMPL         ETUD        GARL        HLML       
 X:  34562   ZZ     :1432384   1: 689558   1:1286127   1: 784089  
 Z:2601471   16     : 913146   2:1946475   2:1315344   2:1817382  
             15     : 104235               Z:  34562   Z:  34562  
             21     :  86275                                      
             22     :  48699                                      
             11     :  25485                                      
             (Other):  25809                                      
     ILETUD             ILT          IMMI        INAI       INATC      
 Z      :1946475   Z      :1432384   1: 614842   1:738724   1:2180430  
 1      : 484682   3      : 533246   2:2021191   2:614762   2: 455603  
 3      : 114507   1      : 449857               3:518740              
 2      :  76273   2      : 204924               4: 45574              
 4      :  13812   4      :  12853               5:  1530              
 5      :    167   7      :   2524               6:716703              
 (Other):    117   (Other):    245                                     
     IPONDI            IRAN                IRIS         LPRF      
 Min.   : 0.000   1      :2305666   920120303:   6961   0:643516  
 1st Qu.: 1.103   2      : 112053   ZZZZZZZZZ:   5710   1:654441  
 Median : 2.933   4      :  69107   930700109:   5523   2:517420  
 Mean   : 2.596   3      :  40599   751187110:   4104   3:762238  
 3rd Qu.: 3.404   Z      :  38020   920360501:   3818   4: 17410  
 Max.   :30.057   5      :  34401   751176714:   3807   5:  6446  
                  (Other):  36187   (Other)  :2606110   Z: 34562  
      LPRM         METRODOM         MOCO             MODV       
 1      :1209833   M:2636033   22     :585580   32     :585580  
 3      : 763890               11     :569579   11     :569579  
 2      : 513339               32     :526421   50     :321174  
 8      :  38136               21     :449260   40     :291436  
 Z      :  34562               12     :216515   12     :216515  
 6      :  32123               23     :137021   20     :205247  
 (Other):  44150               (Other):151657   (Other):446502  
      NA17         NA5              NAIDT              NBPI       
 ZZ     :1432384   AZ:    626   0      :1872226   03     :773582  
 OQ     : 316215   BE:  68660   30     : 716703   04     :628152  
 MN     : 223963   FZ:  50464   11     :  18616   02     :491816  
 GZ     : 129585   GU: 767684   12     :  16979   05     :284228  
 JZ     : 101100   OQ: 316215   14     :   5933   01     :263674  
 KZ     :  78928   ZZ:1432384   13     :   3526   06     : 97433  
 (Other): 353858                (Other):   2050   (Other): 97148  
     ORIDT         RECH        REGION       SANI        SANIDOM     
 0      :2570233   0: 595136   11:2636033   0:  17248   XX:  34562  
 11     :  26547   1:  99394                1: 148161   ZZ:2601471  
 12     :  23668   2:  81634                2:2436062               
 14     :   8155   9: 189296                X:  34562               
 13     :   4671   Z:1670573                                        
 18     :    908                                                    
 (Other):   1851                                                    
 SEXE        STAT_CONJ   STATR       STOCD            SURF        TACT        
 1:1263098   1: 806273   1:1067681   10:992691   4      :736488   11:1203649  
 2:1372935   2:  90782   2: 135968   21:627380   3      :583150   12: 179713  
             3: 229555   Z:1432384   22:757862   5      :440798   21: 382445  
             4: 101992               23:151152   1      :239343   22: 240715  
             5: 137488               30: 72386   2      :233363   23: 465748  
             6:1269943               ZZ: 34562   6      :189749   24:  64030  
                                                 (Other):213142   25:  99733  
    TACTD16        TP          TRANS           TRIRIS        TYPC       
 111    :1127202   1:1026823   1:  39223   ZZZZZZ :  47639   1: 259226  
 230    : 465748   2: 176826   2: 102898   931411 :  10563   2: 194433  
 210    : 382445   Z:1432384   3:  40772   920331 :   8408   3:2124270  
 220    : 240715               4:  44362   931071 :   8032   4:  22451  
 122    : 127564               5: 311836   940721 :   7834   5:   1091  
 250    :  99733               6: 664558   921011 :   7686   Z:  34562  
 (Other): 192626               Z:1432384   (Other):2545871              
 TYPL        WC              COM           
 1: 330946   X:  34562   Length:2636033    
 2:2220098   Z:2601471   Class :character  
 3:  25394               Mode  :character  
 4:  15607                                 
 5:   1942                                 
 6:   7484                                 
 Z:  34562                                 </code></pre>
<p>Mais attention, le problème ici est que cela nous donne des fréquences non pondérées pour l’ensemble de nos variables qualitatives, donc qui n’ont finalement pas grand sens.</p>
<div id="manipulation-des-variables-qualitatives" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Manipulation des variables qualitatives<a href="03-Manipulation-variables.html#manipulation-des-variables-qualitatives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On peut d’abord travailler sur les variables qualitatives qui correspondent ici à l’essentiel de nos variables.</p>
<p>Comme on le sait, on peut regarder les différents niveaux pour chacune d’entre elles, avec la fonction <code>levels()</code>. Si on veut appliquer la fonction à l’ensemble de nos variables facteurs sans avoir donc à les indiquer une par une, on peut avoir recours à la fonction <code>sapply()</code> qui permet d’appliquer la fonction indiquée entre parenthèses (ici <code>levels()</code>) à tous les éléments de notre table de données.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="03-Manipulation-variables.html#cb26-1" tabindex="-1"></a><span class="co"># Pour info, ici cela s&#39;écrirait : </span></span>
<span id="cb26-2"><a href="03-Manipulation-variables.html#cb26-2" tabindex="-1"></a>RP_final <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(levels)</span>
<span id="cb26-3"><a href="03-Manipulation-variables.html#cb26-3" tabindex="-1"></a><span class="co"># on peut même se passer de la sélection sur les variables :</span></span>
<span id="cb26-4"><a href="03-Manipulation-variables.html#cb26-4" tabindex="-1"></a><span class="co"># RP %&gt;% sapply(levels)</span></span></code></pre></div>
<p>On peut ensuite vouloir retravailler les modalités de ces variables, car par exemple les modalités ne sont pas parlantes puisque nommées par des codes chiffres, ou parce que les modalités sont trop nombreuses et qu’on souhaiterait les rassembler pour une analyse ultérieure.</p>
<p>Par exemple, si l’on veut étudier la répartition de la population francilienne selon leur statut d’activité, on peut utiliser la variable <code>TACT</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="03-Manipulation-variables.html#cb27-1" tabindex="-1"></a><span class="fu">levels</span>(RP_final<span class="sc">$</span>TACT)</span></code></pre></div>
<pre><code>[1] &quot;11&quot; &quot;12&quot; &quot;21&quot; &quot;22&quot; &quot;23&quot; &quot;24&quot; &quot;25&quot;</code></pre>
<p>Mais le moins qu’on puisse dire c’est que les 7 modalités de cette variable ne sont pas parlantes, on peut donc recoder les modalités de cette variable dans une étape préalable <em>DATA</em> comme ici ; on pourra bien sûr enchaîner plus tard les lignes de codes et réaliser cette étape dans une même procédure avec le tableau ou le graphique représentant cette variable.<br />
Commençons ici par l’étape <em>DATA</em> :</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="03-Manipulation-variables.html#cb29-1" tabindex="-1"></a><span class="co"># On cherche à quoi correspondent les modalités chiffrées de cette variable</span></span>
<span id="cb29-2"><a href="03-Manipulation-variables.html#cb29-2" tabindex="-1"></a><span class="co"># dans le fichier &quot;meta&quot;</span></span>
<span id="cb29-3"><a href="03-Manipulation-variables.html#cb29-3" tabindex="-1"></a>meta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(COD_VAR<span class="sc">==</span><span class="st">&quot;TACT&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(COD_MOD, LIB_MOD)</span></code></pre></div>
<pre><code># A tibble: 7 × 2
  COD_MOD LIB_MOD                                                               
  &lt;fct&gt;   &lt;fct&gt;                                                                 
1 11      Actifs ayant un emploi, y compris sous apprentissage ou en stage rému…
2 12      Chômeurs                                                              
3 21      Retraités ou préretraités                                             
4 22      Élèves, étudiants, stagiaires non rémunéré de 14 ans ou plus          
5 23      Moins de 14 ans                                                       
6 24      Femmes ou hommes au foyer                                             
7 25      Autres inactifs                                                       </code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="03-Manipulation-variables.html#cb31-1" tabindex="-1"></a><span class="co"># On recode à partir de ces libellés, tout en regroupant certaines modalités</span></span>
<span id="cb31-2"><a href="03-Manipulation-variables.html#cb31-2" tabindex="-1"></a><span class="co"># qui sont très spécifiques et nous intéressent moins :</span></span>
<span id="cb31-3"><a href="03-Manipulation-variables.html#cb31-3" tabindex="-1"></a>RP_final <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">TACT_moda =</span> <span class="fu">as.factor</span>(</span>
<span id="cb31-4"><a href="03-Manipulation-variables.html#cb31-4" tabindex="-1"></a>  <span class="fu">case_when</span>(TACT <span class="sc">==</span> <span class="st">&quot;11&quot;</span> <span class="sc">~</span> <span class="st">&quot;Actifs en emploi&quot;</span>,</span>
<span id="cb31-5"><a href="03-Manipulation-variables.html#cb31-5" tabindex="-1"></a>            TACT <span class="sc">==</span> <span class="st">&quot;12&quot;</span> <span class="sc">~</span> <span class="st">&quot;Chômeurs&quot;</span>,</span>
<span id="cb31-6"><a href="03-Manipulation-variables.html#cb31-6" tabindex="-1"></a>            TACT <span class="sc">==</span> <span class="st">&quot;21&quot;</span> <span class="sc">~</span> <span class="st">&quot;Retraités&quot;</span>,</span>
<span id="cb31-7"><a href="03-Manipulation-variables.html#cb31-7" tabindex="-1"></a>            TACT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;22&quot;</span>,<span class="st">&quot;23&quot;</span>,<span class="st">&quot;24&quot;</span>,<span class="st">&quot;25&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Autres inactifs&quot;</span>)))</span>
<span id="cb31-8"><a href="03-Manipulation-variables.html#cb31-8" tabindex="-1"></a><span class="fu">levels</span>(RP_final<span class="sc">$</span>TACT_moda)</span></code></pre></div>
<pre><code>[1] &quot;Actifs en emploi&quot; &quot;Autres inactifs&quot;  &quot;Chômeurs&quot;         &quot;Retraités&quot;       </code></pre>
<p>Si l’on veut changer l’ordre des modalités, qui s’afficheront comme ci-dessus dans un tableau ou un graphique, on peut utiliser la fonction <code>fct_relevel()</code> du package <strong><code>forcats</code></strong> (à installer avant puis à appeler avant de l’utiliser) :</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="03-Manipulation-variables.html#cb33-1" tabindex="-1"></a><span class="co"># install.package(&quot;forcats&quot;)</span></span>
<span id="cb33-2"><a href="03-Manipulation-variables.html#cb33-2" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb33-3"><a href="03-Manipulation-variables.html#cb33-3" tabindex="-1"></a>RP_final <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">TACT_moda =</span> </span>
<span id="cb33-4"><a href="03-Manipulation-variables.html#cb33-4" tabindex="-1"></a>                                  <span class="fu">fct_relevel</span>(TACT_moda, </span>
<span id="cb33-5"><a href="03-Manipulation-variables.html#cb33-5" tabindex="-1"></a>                                              <span class="fu">c</span>(<span class="st">&quot;Actifs en emploi&quot;</span>,<span class="st">&quot;Chômeurs&quot;</span>,</span>
<span id="cb33-6"><a href="03-Manipulation-variables.html#cb33-6" tabindex="-1"></a>                                                <span class="st">&quot;Retraités&quot;</span>, <span class="st">&quot;Autres inactifs&quot;</span>)))</span>
<span id="cb33-7"><a href="03-Manipulation-variables.html#cb33-7" tabindex="-1"></a><span class="fu">levels</span>(RP_final<span class="sc">$</span>TACT_moda)</span></code></pre></div>
<pre><code>[1] &quot;Actifs en emploi&quot; &quot;Chômeurs&quot;         &quot;Retraités&quot;        &quot;Autres inactifs&quot; </code></pre>
<p>Plus largement, pour travailler sur des variables qualitatives en particulier lorsqu’elles sont en format facteur, le package <strong><code>forcats</code></strong> est très utile. Outre une fonction de transformation d’une variable caractère en facteur (<code>as_factor()</code> proche de la version de baseR <code>as.factor()</code> utilisée en début de section), elle contient plein d’autres fonctions : <code>fct_collapse()</code> utilisée pour renommer ou regrouper des modalités d’une variable (au lieu de la double fonction <code>as.factor()</code> et <code>case_when()</code>) ; <code>fct_relevel()</code> utilisée également au-dessus pour trier les modalités comme on le souhaite ; <code>fct_drop()</code> pour enlever des niveaux de facteurs vides/sans effectifs ; <code>fct_explicit_na()</code> pour rendre les NA explicites en créant une modalité “(missing)” ; <code>fct_reorder()</code> et <code>fct_reorder2()</code> pour réordonner les modalités d’une variable, très utile pour les graphiques car utilisables directement dans <code>ggplot()</code> ; <code>fct_lump()</code> pour regrouper les modalités les plus communes (ou au contraire les moins communes) en lui indiquant entre parenthèses le nombre <code>n=</code> de modalités souhaitées ou la proportion minimum souhaitée <code>prop=</code>, et en sélectionnant la variable avec la fonction <code>pull()</code> avant car elle doit être en format vecteur et non data.frame ; ou encore <code>fct_recode()</code> pour changer le niveau des facteurs ; <code>fct_other()</code> ; <code>fct_infreq()</code> et <code>fct_inorder()</code> ; etc. Un bon récapitulatif de ces fonctions est présenté <a href="https://thinkr.fr/forcats-forcats-vous-avez-dit-forcats/" target="_blank">ici</a>.</p>
</div>
<div id="manipulation-des-variables-quantitatives" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Manipulation des variables quantitatives<a href="03-Manipulation-variables.html#manipulation-des-variables-quantitatives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Comme nous l’avons vu plus haut, il y a peu de variables quantitatives dans cette base et l’une d’entre elles est la pondération, donc on va regarder plus précisément la variable <code>AGED</code>. Cependant, celle-ci aussi est particulière car c’est une variable numérique constituée d’entiers naturels (et non de valeurs réelles) qui vont de 0 à 120 ; dans le fichier des métadonnées (ou le dictionnaire des variables disponible également sur le site de l’Insee), on se rend compte que la variable a été pensée comme catégorielle avec des modalités d’abord codées comme “000”, “001”, etc.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="03-Manipulation-variables.html#cb35-1" tabindex="-1"></a>meta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(COD_VAR<span class="sc">==</span><span class="st">&quot;AGED&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(COD_MOD, LIB_MOD) <span class="sc">%&gt;%</span> <span class="fu">tail</span>()</span></code></pre></div>
<pre><code># A tibble: 6 × 2
  COD_MOD LIB_MOD
  &lt;fct&gt;   &lt;fct&gt;  
1 115     115 ans
2 116     116 ans
3 117     117 ans
4 118     118 ans
5 119     119 ans
6 120     120 ans</code></pre>
<p>On peut alors regarder rapidement la distribution de cette variable.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="03-Manipulation-variables.html#cb37-1" tabindex="-1"></a><span class="fu">summary</span>(RP_final<span class="sc">$</span>AGED)</span></code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00   21.00   36.00   38.44   55.00  120.00 </code></pre>
<p>On peut aussi construire des variables continues en agrégeant certaines informations au niveau des communes par exemple. Reprenons la variable d’activité dont nous avons recoder et regrouper les modalités et calculons-là pour avoir le nombre de chaque modalité par commune. Il faut pour cela créer la variable de commune, qu’on appelera <code>COM</code>, à partir de l’IRIS :</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="03-Manipulation-variables.html#cb39-1" tabindex="-1"></a>RP_final <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">COM=</span><span class="fu">substr</span>(IRIS, <span class="dv">1</span>, <span class="dv">5</span>))</span></code></pre></div>
<p>On va ensuite sommer chaque modalité de la variable <code>TACT_moda</code> en utilisant la pondération en groupant par commune.</p>
<p><strong>EXERCICE</strong> :<br />
Créer donc un tableau qui aura 3 colonnes <code>COM</code>, <code>TACT_moda</code> et <code>n</code>. Vous pouvez utiliser les fonctions <code>group_by</code> suivi soit de <code>count</code>, soit de <code>summarise</code> ; on cherchera finalement à arrondir ces valeurs à l’unité avec la fonction <code>round()</code>. Vous devez obtenir le tableau suivant :</p>
<div class="solution-exo">
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="03-Manipulation-variables.html#cb40-1" tabindex="-1"></a>Tab_com_TACT <span class="ot">&lt;-</span> RP_final <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(COM) <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="03-Manipulation-variables.html#cb40-2" tabindex="-1"></a>  <span class="fu">count</span>(TACT_moda, <span class="at">wt=</span>IPONDI) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="03-Manipulation-variables.html#cb40-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n=</span><span class="fu">round</span>(n))</span>
<span id="cb40-4"><a href="03-Manipulation-variables.html#cb40-4" tabindex="-1"></a></span>
<span id="cb40-5"><a href="03-Manipulation-variables.html#cb40-5" tabindex="-1"></a><span class="co"># RP_final %&gt;% group_by(COM, TACT_moda) %&gt;% </span></span>
<span id="cb40-6"><a href="03-Manipulation-variables.html#cb40-6" tabindex="-1"></a><span class="co">#   summarise(n=sum(IPONDI)) %&gt;% </span></span>
<span id="cb40-7"><a href="03-Manipulation-variables.html#cb40-7" tabindex="-1"></a><span class="co">#   mutate(n=round(n))</span></span></code></pre></div>
</div>
<p>On voit qu’on a un tableau dans un format “long” puisqu’il y a plusieurs observations pour une seule commune. On va utiliser la fonction <code>pivot_wider()</code> mentionnée précédemment pour n’avoir qu’une ligne par commune et en colonne les types de statut avec leur nombre respectif.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="03-Manipulation-variables.html#cb41-1" tabindex="-1"></a>Tab_com_TACT <span class="ot">&lt;-</span> Tab_com_TACT <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="03-Manipulation-variables.html#cb41-2" tabindex="-1"></a>                   <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> TACT_moda, <span class="at">values_from =</span> n)</span>
<span id="cb41-3"><a href="03-Manipulation-variables.html#cb41-3" tabindex="-1"></a>Tab_com_TACT</span></code></pre></div>
<pre><code># A tibble: 137 × 5
   COM   `Actifs en emploi` Chômeurs Retraités `Autres inactifs`
   &lt;chr&gt;              &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;             &lt;dbl&gt;
 1 75101               8366      941      2630              3979
 2 75102              13118     1378      2148              4964
 3 75103              19239     2085      4589              8123
 4 75104              15227     1863      4508              7513
 5 75105              27378     2611     10607             17618
 6 75106              18073     1842      8180             12176
 7 75107              23394     2165      9573             13735
 8 75108              18254     1565      5297             10534
 9 75109              34155     3482      7264             15125
10 75110              46454     6343     10645             23078
# ℹ 127 more rows</code></pre>
<div id="détecter-et-visualiser-les-valeurs-manquantes" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Détecter et “visualiser” les valeurs manquantes<a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-manquantes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pour travailler sur les valeurs manquantes et valeurs aberrantes de variables quantitatives, on va s’appuyer sur une autre base de données, plus pertinente pour cela. Vous la trouverez sur l’espace de cours sur Moodle : il s’agit d’une extraction de la base des données de valeurs foncières pour le seul département de Paris et la vente d’appartements entre 2019 et 2022.</p>
<p>Une fois copiée dans le dossier “data/” de notre projet, ouvrons cette base de données et commençons l’exploration des variables de cette base et de leurs valeurs manquantes :</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="03-Manipulation-variables.html#cb43-1" tabindex="-1"></a>dvf_Paris <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="at">file =</span><span class="st">&quot;data/dvf_Paris.Rdata&quot;</span>)</span>
<span id="cb43-2"><a href="03-Manipulation-variables.html#cb43-2" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="zbiuztjmnb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zbiuztjmnb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zbiuztjmnb thead, #zbiuztjmnb tbody, #zbiuztjmnb tfoot, #zbiuztjmnb tr, #zbiuztjmnb td, #zbiuztjmnb th {
  border-style: none;
}

#zbiuztjmnb p {
  margin: 0;
  padding: 0;
}

#zbiuztjmnb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zbiuztjmnb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zbiuztjmnb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zbiuztjmnb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zbiuztjmnb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbiuztjmnb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbiuztjmnb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zbiuztjmnb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zbiuztjmnb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zbiuztjmnb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zbiuztjmnb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zbiuztjmnb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zbiuztjmnb .gt_spanner_row {
  border-bottom-style: hidden;
}

#zbiuztjmnb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zbiuztjmnb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zbiuztjmnb .gt_from_md > :first-child {
  margin-top: 0;
}

#zbiuztjmnb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zbiuztjmnb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zbiuztjmnb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zbiuztjmnb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zbiuztjmnb .gt_row_group_first td {
  border-top-width: 2px;
}

#zbiuztjmnb .gt_row_group_first th {
  border-top-width: 2px;
}

#zbiuztjmnb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbiuztjmnb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zbiuztjmnb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zbiuztjmnb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbiuztjmnb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbiuztjmnb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zbiuztjmnb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zbiuztjmnb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zbiuztjmnb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zbiuztjmnb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbiuztjmnb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbiuztjmnb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zbiuztjmnb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zbiuztjmnb .gt_left {
  text-align: left;
}

#zbiuztjmnb .gt_center {
  text-align: center;
}

#zbiuztjmnb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zbiuztjmnb .gt_font_normal {
  font-weight: normal;
}

#zbiuztjmnb .gt_font_bold {
  font-weight: bold;
}

#zbiuztjmnb .gt_font_italic {
  font-style: italic;
}

#zbiuztjmnb .gt_super {
  font-size: 65%;
}

#zbiuztjmnb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zbiuztjmnb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zbiuztjmnb .gt_indent_1 {
  text-indent: 5px;
}

#zbiuztjmnb .gt_indent_2 {
  text-indent: 10px;
}

#zbiuztjmnb .gt_indent_3 {
  text-indent: 15px;
}

#zbiuztjmnb .gt_indent_4 {
  text-indent: 20px;
}

#zbiuztjmnb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="id_mutation">id_mutation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="date_mutation">date_mutation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="nature_mutation">nature_mutation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="valeur_fonciere">valeur_fonciere</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="code_postal">code_postal</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="id_parcelle">id_parcelle</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot1_numero">lot1_numero</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot1_surface_carrez">lot1_surface_carrez</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot2_numero">lot2_numero</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot2_surface_carrez">lot2_surface_carrez</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot3_numero">lot3_numero</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot3_surface_carrez">lot3_surface_carrez</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot4_numero">lot4_numero</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot4_surface_carrez">lot4_surface_carrez</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot5_numero">lot5_numero</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lot5_surface_carrez">lot5_surface_carrez</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nombre_lots">nombre_lots</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="type_local">type_local</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="surface_reelle_bati">surface_reelle_bati</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nombre_pieces_principales">nombre_pieces_principales</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="surface_terrain">surface_terrain</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="px_m2">px_m2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="annee">annee</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="date_moisan">date_moisan</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621602</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-04</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">580000</td>
<td headers="code_postal" class="gt_row gt_right">75018</td>
<td headers="id_parcelle" class="gt_row gt_left">75118000BR0026</td>
<td headers="lot1_numero" class="gt_row gt_right">55</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">61.00</td>
<td headers="lot2_numero" class="gt_row gt_right">58</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot3_numero" class="gt_row gt_right">8</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">3</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">25</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">23200.00</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621602</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-04</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">580000</td>
<td headers="code_postal" class="gt_row gt_right">75018</td>
<td headers="id_parcelle" class="gt_row gt_left">75118000BR0026</td>
<td headers="lot1_numero" class="gt_row gt_right">25</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot2_numero" class="gt_row gt_right">56</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">61.00</td>
<td headers="lot3_numero" class="gt_row gt_right">NA</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">2</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">20</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">29000.00</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621603</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-06</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">605000</td>
<td headers="code_postal" class="gt_row gt_right">75003</td>
<td headers="id_parcelle" class="gt_row gt_left">75103000AH0072</td>
<td headers="lot1_numero" class="gt_row gt_right">7</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">40.66</td>
<td headers="lot2_numero" class="gt_row gt_right">NA</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot3_numero" class="gt_row gt_right">NA</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">1</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">42</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">3</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">14404.76</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621606</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-05</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">716250</td>
<td headers="code_postal" class="gt_row gt_right">75009</td>
<td headers="id_parcelle" class="gt_row gt_left">75109000AC0148</td>
<td headers="lot1_numero" class="gt_row gt_right">24</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot2_numero" class="gt_row gt_right">3</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">66.26</td>
<td headers="lot3_numero" class="gt_row gt_right">38</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">3</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">69</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">3</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">10380.43</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621607</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-05</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">320000</td>
<td headers="code_postal" class="gt_row gt_right">75010</td>
<td headers="id_parcelle" class="gt_row gt_left">75110000AG0047</td>
<td headers="lot1_numero" class="gt_row gt_right">27</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot2_numero" class="gt_row gt_right">92</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">35.19</td>
<td headers="lot3_numero" class="gt_row gt_right">NA</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">2</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">33</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">9696.97</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
    <tr><td headers="id_mutation" class="gt_row gt_right">2022-1621608</td>
<td headers="date_mutation" class="gt_row gt_right">2022-01-07</td>
<td headers="nature_mutation" class="gt_row gt_left">Vente</td>
<td headers="valeur_fonciere" class="gt_row gt_right">320000</td>
<td headers="code_postal" class="gt_row gt_right">75020</td>
<td headers="id_parcelle" class="gt_row gt_left">75120000AX0021</td>
<td headers="lot1_numero" class="gt_row gt_right">298</td>
<td headers="lot1_surface_carrez" class="gt_row gt_right">32.52</td>
<td headers="lot2_numero" class="gt_row gt_right">50</td>
<td headers="lot2_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot3_numero" class="gt_row gt_right">NA</td>
<td headers="lot3_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot4_numero" class="gt_row gt_right">NA</td>
<td headers="lot4_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="lot5_numero" class="gt_row gt_right">NA</td>
<td headers="lot5_surface_carrez" class="gt_row gt_right">NA</td>
<td headers="nombre_lots" class="gt_row gt_right">2</td>
<td headers="type_local" class="gt_row gt_left">Appartement</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">29</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">1</td>
<td headers="surface_terrain" class="gt_row gt_right">NA</td>
<td headers="px_m2" class="gt_row gt_right">11034.48</td>
<td headers="annee" class="gt_row gt_right">2022</td>
<td headers="date_moisan" class="gt_row gt_right">2022-01</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="03-Manipulation-variables.html#cb44-1" tabindex="-1"></a><span class="fu">summary</span>(dvf_Paris)</span></code></pre></div>
<pre><code> id_mutation        date_mutation        nature_mutation    valeur_fonciere    
 Length:178526      Min.   :2019-01-02   Length:178526      Min.   :        0  
 Class :character   1st Qu.:2020-05-18   Class :character   1st Qu.:   285000  
 Mode  :character   Median :2021-06-11   Mode  :character   Median :   480000  
                    Mean   :2021-03-14                      Mean   :  1966869  
                    3rd Qu.:2021-12-30                      3rd Qu.:   887825  
                    Max.   :2022-10-27                      Max.   :606210300  
                                                            NA&#39;s   :2183       
  code_postal    id_parcelle         lot1_numero       lot1_surface_carrez
 Min.   :75001   Length:178526      Min.   :     1.0   Min.   :   0.50    
 1st Qu.:75011   Class :character   1st Qu.:    14.0   1st Qu.:  26.00    
 Median :75014   Mode  :character   Median :    29.0   Median :  40.33    
 Mean   :75013                      Mean   :   155.2   Mean   :  70.41    
 3rd Qu.:75017                      3rd Qu.:   104.0   3rd Qu.:  64.52    
 Max.   :75020                      Max.   :100226.0   Max.   :9532.00    
 NA&#39;s   :2                          NA&#39;s   :15112      NA&#39;s   :85770      
  lot2_numero      lot2_surface_carrez  lot3_numero      lot3_surface_carrez
 Min.   :    2.0   Min.   :   0.61     Min.   :    2.0   Min.   :  1.00     
 1st Qu.:   23.0   1st Qu.:  34.04     1st Qu.:   21.0   1st Qu.: 40.59     
 Median :   48.0   Median :  51.50     Median :   42.0   Median : 68.18     
 Mean   :  222.7   Mean   :  61.06     Mean   :  108.6   Mean   : 84.22     
 3rd Qu.:  111.0   3rd Qu.:  75.00     3rd Qu.:   77.0   3rd Qu.:114.67     
 Max.   :21037.0   Max.   :7392.00     Max.   :11218.0   Max.   :685.00     
 NA&#39;s   :88589     NA&#39;s   :151775      NA&#39;s   :165304    NA&#39;s   :176278     
  lot4_numero      lot4_surface_carrez  lot5_numero      lot5_surface_carrez
 Min.   :   2.00   Min.   :  1.30      Min.   :   2.00   Min.   : 10.52     
 1st Qu.:  21.00   1st Qu.: 44.91      1st Qu.:  24.00   1st Qu.: 50.75     
 Median :  44.00   Median : 67.39      Median :  45.00   Median : 74.10     
 Mean   :  99.02   Mean   : 82.44      Mean   :  90.05   Mean   : 95.80     
 3rd Qu.:  78.00   3rd Qu.:108.13      3rd Qu.:  77.00   3rd Qu.:121.34     
 Max.   :7815.00   Max.   :427.60      Max.   :4262.00   Max.   :345.26     
 NA&#39;s   :174098    NA&#39;s   :178049      NA&#39;s   :176870    NA&#39;s   :178411     
  nombre_lots      type_local        surface_reelle_bati
 Min.   : 0.000   Length:178526      Min.   :  1.0      
 1st Qu.: 1.000   Class :character   1st Qu.: 28.0      
 Median : 2.000   Mode  :character   Median : 42.0      
 Mean   : 1.537                      Mean   : 53.1      
 3rd Qu.: 2.000                      3rd Qu.: 67.0      
 Max.   :27.000                      Max.   :861.0      
                                     NA&#39;s   :1          
 nombre_pieces_principales surface_terrain      px_m2         
 Min.   : 0.00             Min.   :  19.0   Min.   :       0  
 1st Qu.: 1.00             1st Qu.: 231.0   1st Qu.:    9219  
 Median : 2.00             Median : 395.0   Median :   11040  
 Mean   : 2.41             Mean   : 820.7   Mean   :   45437  
 3rd Qu.: 3.00             3rd Qu.: 615.0   3rd Qu.:   13750  
 Max.   :22.00             Max.   :6173.0   Max.   :46631562  
 NA&#39;s   :1                 NA&#39;s   :163485   NA&#39;s   :2184      
    annee           date_moisan       
 Length:178526      Length:178526     
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      
                                      </code></pre>
<p>La fonction <code>summary()</code> permet en effet de donner une première information sur les valeurs manquantes des différentes variables. Pour se concentrer sur cette seule information, on peut compter le nombre de valeurs manquantes <code>NA</code> pour chacune des variables avec la fonction <code>colSums()</code> ; pour les avoir en proportion du nombre total d’observations (lignes), on peut utiliser la fonction <code>colMeans()</code> ; sinon ; on peut utiliser la fonction <code>summarise</code> combinée avec <code>across(where()), )</code> :</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="03-Manipulation-variables.html#cb46-1" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(dvf_Paris))</span></code></pre></div>
<pre><code>              id_mutation             date_mutation           nature_mutation 
                        0                         0                         0 
          valeur_fonciere               code_postal               id_parcelle 
                     2183                         2                         0 
              lot1_numero       lot1_surface_carrez               lot2_numero 
                    15112                     85770                     88589 
      lot2_surface_carrez               lot3_numero       lot3_surface_carrez 
                   151775                    165304                    176278 
              lot4_numero       lot4_surface_carrez               lot5_numero 
                   174098                    178049                    176870 
      lot5_surface_carrez               nombre_lots                type_local 
                   178411                         0                         0 
      surface_reelle_bati nombre_pieces_principales           surface_terrain 
                        1                         1                    163485 
                    px_m2                     annee               date_moisan 
                     2184                         0                         0 </code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="03-Manipulation-variables.html#cb48-1" tabindex="-1"></a><span class="co"># Pour les avoir en proportion par rapport au nombre total d&#39;observations</span></span>
<span id="cb48-2"><a href="03-Manipulation-variables.html#cb48-2" tabindex="-1"></a><span class="co"># et arrondies à 2 chiffres après la virgule :</span></span>
<span id="cb48-3"><a href="03-Manipulation-variables.html#cb48-3" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">colMeans</span>(<span class="fu">is.na</span>(dvf_Paris)<span class="sc">*</span><span class="dv">100</span>), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>              id_mutation             date_mutation           nature_mutation 
                     0.00                      0.00                      0.00 
          valeur_fonciere               code_postal               id_parcelle 
                     1.22                      0.00                      0.00 
              lot1_numero       lot1_surface_carrez               lot2_numero 
                     8.46                     48.04                     49.62 
      lot2_surface_carrez               lot3_numero       lot3_surface_carrez 
                    85.02                     92.59                     98.74 
              lot4_numero       lot4_surface_carrez               lot5_numero 
                    97.52                     99.73                     99.07 
      lot5_surface_carrez               nombre_lots                type_local 
                    99.94                      0.00                      0.00 
      surface_reelle_bati nombre_pieces_principales           surface_terrain 
                     0.00                      0.00                     91.57 
                    px_m2                     annee               date_moisan 
                     1.22                      0.00                      0.00 </code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="03-Manipulation-variables.html#cb50-1" tabindex="-1"></a><span class="co"># Ou en langage tidyverse sur les seules variables numériques :</span></span>
<span id="cb50-2"><a href="03-Manipulation-variables.html#cb50-2" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span></code></pre></div>
<pre><code># A tibble: 1 × 17
  valeur_fonciere code_postal lot1_numero lot1_surface_carrez lot2_numero
            &lt;int&gt;       &lt;int&gt;       &lt;int&gt;               &lt;int&gt;       &lt;int&gt;
1            2183           2       15112               85770       88589
# ℹ 12 more variables: lot2_surface_carrez &lt;int&gt;, lot3_numero &lt;int&gt;,
#   lot3_surface_carrez &lt;int&gt;, lot4_numero &lt;int&gt;, lot4_surface_carrez &lt;int&gt;,
#   lot5_numero &lt;int&gt;, lot5_surface_carrez &lt;int&gt;, nombre_lots &lt;int&gt;,
#   surface_reelle_bati &lt;int&gt;, nombre_pieces_principales &lt;int&gt;,
#   surface_terrain &lt;int&gt;, px_m2 &lt;int&gt;</code></pre>
<p>Le moins qu’on puisse dire c’est qu’il y a des valeurs manquantes, mais dont le nombre et la proportion (par rapport au nombre total d’observations) varie énormément.</p>
<p>Pour en faire une analyse plus poussée, différents packages existent pour détecter et visualiser ces données manquantes. L’un d’entre eux est le package <strong><code>naniar</code></strong> : quelques fonctions permettent d’abord de décrire la base selon ses valeurs manquantes. Cela donne un aperçu global et rapide, mais cela n’est vraiment pas suffisant pour comprendre l’origine et les enjeux (possibles problèmes) de ces valeurs manquantes.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="03-Manipulation-variables.html#cb52-1" tabindex="-1"></a><span class="fu">library</span>(naniar)</span></code></pre></div>
<pre><code>Warning: le package &#39;naniar&#39; a été compilé avec la version R 4.3.3</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="03-Manipulation-variables.html#cb54-1" tabindex="-1"></a><span class="co"># Ci-dessous : nombre de cellules du tableau ou de n_ij d&#39;une matrice </span></span>
<span id="cb54-2"><a href="03-Manipulation-variables.html#cb54-2" tabindex="-1"></a><span class="co"># qui correspondent à des valeurs manquantes :</span></span>
<span id="cb54-3"><a href="03-Manipulation-variables.html#cb54-3" tabindex="-1"></a><span class="fu">n_miss</span>(dvf_Paris) </span></code></pre></div>
<pre><code>[1] 1558112</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="03-Manipulation-variables.html#cb56-1" tabindex="-1"></a><span class="co"># Pour les avoir en proportion du nombre total de cellules du tableau</span></span>
<span id="cb56-2"><a href="03-Manipulation-variables.html#cb56-2" tabindex="-1"></a><span class="co"># et non des seules lignes comme précédemment, </span></span>
<span id="cb56-3"><a href="03-Manipulation-variables.html#cb56-3" tabindex="-1"></a><span class="co"># le résultat est déjà en pourcentage, sinon utiliser `prop_miss(RP)`)</span></span>
<span id="cb56-4"><a href="03-Manipulation-variables.html#cb56-4" tabindex="-1"></a><span class="fu">pct_miss</span>(dvf_Paris) </span></code></pre></div>
<pre><code>[1] 36.3652</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="03-Manipulation-variables.html#cb58-1" tabindex="-1"></a><span class="co"># Ci-dessous : nombre de cellules du tableau ou de n_ij d&#39;une matrice </span></span>
<span id="cb58-2"><a href="03-Manipulation-variables.html#cb58-2" tabindex="-1"></a><span class="co"># qui correspondent à des valeurs renseignées :</span></span>
<span id="cb58-3"><a href="03-Manipulation-variables.html#cb58-3" tabindex="-1"></a><span class="fu">n_complete</span>(dvf_Paris) </span></code></pre></div>
<pre><code>[1] 2726512</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="03-Manipulation-variables.html#cb60-1" tabindex="-1"></a><span class="co">#en proportion</span></span>
<span id="cb60-2"><a href="03-Manipulation-variables.html#cb60-2" tabindex="-1"></a><span class="fu">pct_complete</span>(dvf_Paris) </span></code></pre></div>
<pre><code>[1] 63.6348</code></pre>
<p>On peut ensuite visualiser le nombre de valeurs manquantes par variable, avec la fonction <code>gg_miss_var()</code> du même package. On peut également demander dans <code>gg_miss_var()</code> à ce que les valeurs soient en pourcentage, avec l’argument <code>show_pct=TRUE</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="03-Manipulation-variables.html#cb62-1" tabindex="-1"></a><span class="co"># 1er type de visualisation des valeurs manquantes</span></span>
<span id="cb62-2"><a href="03-Manipulation-variables.html#cb62-2" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span>  <span class="fu">gg_miss_var</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-39-1.svg" width="672" /></p>
<p>On peut aussi réaliser des graphiques montrant le nombre de valeurs manquantes pour l’ensemble des variables numériques de la base, en fonction d’une autre variable (y compris de nature ‘factor’), avec l’argument <code>fct=</code> dans <code>gg_miss_fct()</code>. Cela est intéressant pour voir si certaines valeurs manquantes des variables sont liées à des valeurs observées d’autres variables, qu’elles soient quantitatives ou qualitatives (et dans ce cas, est-ce que les valeurs manquantes se retrouvent davantage dans certaines modalités plus que d’autres ?). Par exemple, ici, selon le type de lots, ou la surface du logement :</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="03-Manipulation-variables.html#cb63-1" tabindex="-1"></a><span class="co"># on filtre sur les variables numériques car on ne veut pas que la sortie nous affiche </span></span>
<span id="cb63-2"><a href="03-Manipulation-variables.html#cb63-2" tabindex="-1"></a><span class="co"># des variables comme le code postal.</span></span>
<span id="cb63-3"><a href="03-Manipulation-variables.html#cb63-3" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric), nombre_lots) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="03-Manipulation-variables.html#cb63-4" tabindex="-1"></a>  <span class="fu">gg_miss_fct</span>(<span class="at">fct =</span> nombre_lots)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-40-1.svg" width="672" /></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="03-Manipulation-variables.html#cb64-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric), <span class="sc">-</span>(code_postal)) <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="03-Manipulation-variables.html#cb64-2" tabindex="-1"></a>  <span class="fu">filter</span>(surface_reelle_bati<span class="sc">&lt;</span><span class="dv">250</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="03-Manipulation-variables.html#cb64-3" tabindex="-1"></a>  <span class="fu">gg_miss_fct</span>(<span class="at">fct =</span> surface_reelle_bati)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-40-2.svg" width="672" /></p>
<p>On voit que les valeurs manquantes sont plus nombreuses pour les variables de numéro et surface carrez des lots 2, 3, 4 et 5 en proportion du nombre de lots, ou encore on observe qu’il y a un petit peu de valeurs manquantes pour les variables de prix au m2 ou de valeur foncière quant le nombre de lots est égal à 0. Elles ne se distribuent donc pas de manière uniforme selon la variable du nombre de lots, mais c’est assez logique ici et on comprend mieux les nombreuses valeurs manquantes pour les variables indiqués “lot2”, “lot3”, etc, car s’il n’y a qu’un ou deux lots c’est normal qu’il n’y ait pas d’informations sur ces variables. En revanche, on note que même avec 0 lot, on peut avoir l’information sur la surface, le prix/la valeur foncière, puisque ce n’est pas toujours manquant.</p>
<p>Plus généralement, la fonction <code>gg_miss_upset()</code> de ce même package <strong><code>naniar</code></strong> permet de visualiser des dépendances entre les valeurs manquantes des variables :</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="03-Manipulation-variables.html#cb65-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> <span class="fu">gg_miss_upset</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-41-1.svg" width="672" /></p>
<p>Cela nous montre qu’il y a beaucoup d’observations où on a des valeurs manquantes pour 5 variables indiquées, qu’ensuite le cas le plus probable c’est des valeurs manquantes pour 4 de ces 5 variables, etc.</p>
<p>Enfin, il est possible d’appliquer la fonction <code>geom_miss_point()</code> à une fonction <code>ggplot</code>, dans ce cas les valeurs manquantes de la ou des variables sont remplacées par des valeurs 10% plus basses que la valeur minimum observée des variables, et cela afin de les visualiser.</p>
<p>Il existe bien sûr bien d’autres packages, comme <strong><code>funModeling</code></strong>, <strong><code>Amelia</code></strong> et sa fonction <code>missmap()</code>, ou encore <strong><code>visdat</code></strong> et sa fonction <code>vis_miss()</code>. Enfin, d’autres packages comme <strong><code>VIM</code></strong> ou <strong><code>MICE</code></strong> permettent, non seulement de visualiser ces valeurs manquantes, mais également de leur appliquer des techniques pour les “gérer”, c’est ce que l’on va voir maintenant en résumé.</p>
</div>
<div id="gérer-les-valeurs-manquantes" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Gérer les valeurs manquantes<a href="03-Manipulation-variables.html#gérer-les-valeurs-manquantes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Il est bien de connaître le nombre et la proportion de valeurs manquantes dans nos données, comment ces dernières se répartissent entre elles, etc., mais il faut aussi comprendre quel impact elles peuvent avoir sur des analyses statistiques, de régressions ou autres algorithmes.</p>
<p>Dans une base de données tirée d’une enquête, les valeurs manquantes peuvent provenir d’une non-réponse de la part de l’enquêté (que ce soit un individu ou une entreprise), cette non-réponse pouvant être “totale” (on a aucune donnée pour cet enquêté alors qu’il fait partie de l’échantillon) ou “partielle” (on a une partie des réponses mais pas à toutes les questions et donc des variables parfois avec des valeurs manquantes) ; ou bien encore elles peuvent être dues à une mauvaise saisie de l’information par l’enquêteur. La pondération, si elle est présente dans une enquête, peut permettre de corriger cette non-réponse totale, voire partielle.</p>
<p>Les conséquences des valeurs manquantes dans une base de données dépendent de plusieurs choses : on doit d’abord se demander si l’information perdue aurait été pertinente et/ou aurait apporté un élément particulier/supplémentaire. Ensuite, la perte éventuelle d’information est-elle importante, en nombre/en proportion. Et enfin (et surtout), peut-elle créer un biais lors de l’estimation et précision du phénomène que l’on souhaite observer, décrire, analyser, etc. Selon l’importance de ces conséquences, il faut traiter ces valeurs manquantes, c’est-à-dire utiliser une procédure la plus adaptée possible selon le potentiel biais repéré.</p>
<p>Traditionnellement dans la littérature, on distingue 3 types de valeurs manquantes :</p>
<ul>
<li>valeur manquante entièrement due au hasard (‘MCAR’ pour Missing completely at random) : il n’y a pas de lien entre la valeur manquante pour une variable donnée et les autres variables, dit autrement la probabilité pour une variable qu’elle ait une valeur manquante est constante dans les données, elle ne diffère pas selon d’autres caractéristiques des individus ;</li>
<li>valeur manquante due au hasard (‘MAR’ pour Missing at random) : il y a un lien entre la valeur manquante pour une variable donnée et les valeurs observées d’autres variables, c’est-à-dire que la probabilité pour une variable qu’elle ait une valeur manquante dépend d’autres variables (de leurs valeurs observées), elle ne sera donc pas la même selon les individus, c’est ce qu’on essayait de regarder lorsqu’on a utilisé plus haut la fonction <code>gg_miss_fct(fct=)</code> ;</li>
<li>valeur ne manquant pas au hasard (‘NMAR’ pour Non missing at random) : il y a un lien entre la valeur manquante pour une variable et les valeurs manquantes/non observées d’autres variables. Ce sont celles qui risquent d’entraîner des biais importants si on ne les traite pas, c’est ce qu’on essayait de regarder plus haut également avec la fonction <code>gg_miss_upset()</code> cette fois.</li>
</ul>
<p>Comment alors les gérer ? En pratique, il est d’usage lorsque la proportion de valeurs manquantes ne dépasse pas 5% des données de ne rien faire de particulier ou simplement de les supprimer (vous pouvez pour la savoir utiliser les premières fonctions du package <strong><code>naniar</code></strong> présentées précédemment). Sinon, on essaye d’appliquer plusieurs méthodes, simples ou plus complexes.</p>
<p>Dans le cas de valeurs manquantes entièrement dues au hasard (MCAR) et/ou d’une faible proportion des valeurs manquantes dans le total de la table de données, on peut décider de supprimer toutes les lignes qui contiennent au moins une valeur manquante, afin d’avoir une table de données complètes, on peut utiliser la fonction <code>na.omit()</code> ou <code>complete.cases()</code> ; attention à ne pas remplacer votre table de données initiale en réalisant cette procédure. On ne va pas s’essayer à le faire ici car on a vu au tout début de cette section que pour certaines variables cela concernait pratiquement toutes les observations (ici les ventes observées), la conséquence c’est qu’ici on va supprimer toutes les lignes car une ligne a forcément une valeur manquante dans une des variables. Le code serait celui-ci :</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="03-Manipulation-variables.html#cb66-1" tabindex="-1"></a>dvf_Paris_sansNA <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dvf_Paris)</span>
<span id="cb66-2"><a href="03-Manipulation-variables.html#cb66-2" tabindex="-1"></a><span class="co"># OU : </span></span>
<span id="cb66-3"><a href="03-Manipulation-variables.html#cb66-3" tabindex="-1"></a><span class="co"># dvf_Paris_sansNA &lt;- dvf_Paris[complete.cases(dvf_Paris), ]</span></span></code></pre></div>
<p>Des techniques d’imputation simple peuvent également être utilisées. On peut par exemple remplacer les valeurs manquantes d’une variable quantitative par sa moyenne ou sa médiane, pour cela on peut utiliser la fonction <code>replace_na()</code> du package <strong><code>tidyr</code></strong>, ou <code>impute()</code> du package <strong><code>Hmisc</code></strong>, ou encore <code>na.aggregate()</code> du package <strong><code>zoo</code></strong> On donne ainsi une valeur “artificielle” pour remplacer la valeur manquante. Dans le cas de variables qualitatives, on peut, de même, imputer la modalité dominante (avec la fonction <code>mode()</code> du package <strong><code>Hmisc</code></strong> ; ou avec l’argument <code>mode=</code> du package <strong><code>zoo</code></strong>). Par exemple, voici les codes pour remplacer les valeurs manquantes de la variable ‘pxm2’ par sa médiane (la base n’étant pas propre il vaut mieux utiliser la médiane que la moyenne) :</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="03-Manipulation-variables.html#cb67-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">px_m2_bis =</span> <span class="fu">replace_na</span>(px_m2, <span class="fu">median</span>(px_m2, <span class="at">na.rm=</span><span class="cn">TRUE</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="03-Manipulation-variables.html#cb67-2" tabindex="-1"></a>  <span class="fu">select</span>(px_m2, px_m2_bis) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(px_m2))</span>
<span id="cb67-3"><a href="03-Manipulation-variables.html#cb67-3" tabindex="-1"></a></span>
<span id="cb67-4"><a href="03-Manipulation-variables.html#cb67-4" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb67-5"><a href="03-Manipulation-variables.html#cb67-5" tabindex="-1"></a>dvf_Paris<span class="sc">$</span>px_m2_bis <span class="ot">&lt;-</span> <span class="fu">with</span>(dvf_Paris, <span class="fu">impute</span>(px_m2, median))</span>
<span id="cb67-6"><a href="03-Manipulation-variables.html#cb67-6" tabindex="-1"></a></span>
<span id="cb67-7"><a href="03-Manipulation-variables.html#cb67-7" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb67-8"><a href="03-Manipulation-variables.html#cb67-8" tabindex="-1"></a>dvf_Paris<span class="sc">$</span>px_m2_bis <span class="ot">&lt;-</span> <span class="fu">na.aggregate</span>(dvf_Paris<span class="sc">$</span> px_m2, <span class="at">FUN =</span> median)</span></code></pre></div>
<p>On peut néanmoins réaliser ce type d’imputation simple de manière un petit peu plus subtile. Par exemple, si la moyenne de la variable diffère sensiblement selon une autre variable (catégorielle), dans ce cas, on va plutôt remplacer les valeurs manquantes de la variable selon la moyenne associée à chaque modalité de cette autre variable en ajoutant un <code>group_by()</code> avant la fonction <code>mutate()</code> si on utilise la fonction <code>replace_na()</code> comme dans l’exemple précédent.</p>
<p>Si on ne veut pas supprimer ces lignes d’observations et perdre ainsi d’autres informations (celles des variables pour lesquelles la valeur était renseignée pour cette même observation), on peut simplement créer une variable indicatrice de valeur manquante, remplacer les <code>NA</code> par ‘999’ comme dans notre base de données actuelle pour des variables quantitatives, ou par une modalité ‘Manquant’ ou ‘Missing’ pour des variables qualitatives.</p>
<p>Plusieurs autres méthodes existent également dans le cas de valeurs manquantes dues au hasard (MAR), en voici la liste pour information et sans prétention d’exhaustivité : - analyse pondérée pour des valeurs MAR qui consiste à calculer la probabilité qu’une observation soit complète et ensuite à affecter à chacune des observations complètes, un poids inversement proportionnel à cette probabilité ; - imputation de la dernière observation pour des données temporelles ; - imputation “hot-deck” qui consiste à remplacer la valeur manquante par une valeur observée chez un autre individu ayant les mêmes caractéristiques, ou “cold-deck” (même démarche que précédement, sauf que la valeur imputée vient d’une autre source) ; - imputation par le “plus proche voisin” en utilisant une fonction de distance basée sur plusieurs autres variables/caractéristiques de l’individu ; - imputation par un modèle de régression où l’on va remplacer la valeur manquante par une valeur prédite obtenue par régression sur données complètes de la variable comportant des valeurs manquantes.</p>
<p>Il y a aussi des techniques plus complextes d’imputation multiple qui consiste à créer plusieurs valeurs possibles pour une valeur manquante d’une variable, cela peut être adaptée là aussi lorsque les valeurs manquantes sont dues au hasard (MAR).</p>
<p>Vous trouverez de multiples ressources sur internet dans des ouvrages libres d’accès, ou vous pouvez aller voir un des chapitres de l’ouvrage principal support du cours (Husson, 2018), avec des exemples d’utilisation.</p>
</div>
<div id="détecter-et-visualiser-les-valeurs-aberrantes" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Détecter et “visualiser” les valeurs aberrantes<a href="03-Manipulation-variables.html#détecter-et-visualiser-les-valeurs-aberrantes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On va continuer avec cette base de données en se concentrant sur les variables de valeur foncière, de surface, de nombre de pièces, etde prix au m2, en s’intéressant maintenant aux valeurs aberrantes.</p>
<p>On peut d’abord étudier la distribution de ces variables : la fonction <code>get_summary_stats()</code> du package <code>rstatix</code> permet de donner les statistiques de distribution des variables, on propose d’afficher les principales ici :</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="03-Manipulation-variables.html#cb68-1" tabindex="-1"></a><span class="fu">library</span>(rstatix)</span>
<span id="cb68-2"><a href="03-Manipulation-variables.html#cb68-2" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="03-Manipulation-variables.html#cb68-3" tabindex="-1"></a>  <span class="fu">get_summary_stats</span>(valeur_fonciere, nombre_pieces_principales, </span>
<span id="cb68-4"><a href="03-Manipulation-variables.html#cb68-4" tabindex="-1"></a>                    surface_reelle_bati, px_m2, nombre_lots,</span>
<span id="cb68-5"><a href="03-Manipulation-variables.html#cb68-5" tabindex="-1"></a>                    <span class="at">show=</span><span class="fu">c</span>(<span class="st">&quot;n&quot;</span>,<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;median&quot;</span>, <span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>,<span class="st">&quot;q1&quot;</span>, <span class="st">&quot;q3&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="ygcoldigfd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ygcoldigfd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ygcoldigfd thead, #ygcoldigfd tbody, #ygcoldigfd tfoot, #ygcoldigfd tr, #ygcoldigfd td, #ygcoldigfd th {
  border-style: none;
}

#ygcoldigfd p {
  margin: 0;
  padding: 0;
}

#ygcoldigfd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ygcoldigfd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ygcoldigfd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ygcoldigfd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ygcoldigfd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ygcoldigfd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ygcoldigfd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ygcoldigfd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ygcoldigfd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ygcoldigfd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ygcoldigfd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ygcoldigfd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ygcoldigfd .gt_spanner_row {
  border-bottom-style: hidden;
}

#ygcoldigfd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ygcoldigfd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ygcoldigfd .gt_from_md > :first-child {
  margin-top: 0;
}

#ygcoldigfd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ygcoldigfd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ygcoldigfd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ygcoldigfd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ygcoldigfd .gt_row_group_first td {
  border-top-width: 2px;
}

#ygcoldigfd .gt_row_group_first th {
  border-top-width: 2px;
}

#ygcoldigfd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ygcoldigfd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ygcoldigfd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ygcoldigfd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ygcoldigfd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ygcoldigfd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ygcoldigfd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ygcoldigfd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ygcoldigfd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ygcoldigfd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ygcoldigfd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ygcoldigfd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ygcoldigfd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ygcoldigfd .gt_left {
  text-align: left;
}

#ygcoldigfd .gt_center {
  text-align: center;
}

#ygcoldigfd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ygcoldigfd .gt_font_normal {
  font-weight: normal;
}

#ygcoldigfd .gt_font_bold {
  font-weight: bold;
}

#ygcoldigfd .gt_font_italic {
  font-style: italic;
}

#ygcoldigfd .gt_super {
  font-size: 65%;
}

#ygcoldigfd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ygcoldigfd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ygcoldigfd .gt_indent_1 {
  text-indent: 5px;
}

#ygcoldigfd .gt_indent_2 {
  text-indent: 10px;
}

#ygcoldigfd .gt_indent_3 {
  text-indent: 15px;
}

#ygcoldigfd .gt_indent_4 {
  text-indent: 20px;
}

#ygcoldigfd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="variable">variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean">mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="median">median</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="min">min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="max">max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="q1">q1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="q3">q3</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="variable" class="gt_row gt_center">valeur_fonciere</td>
<td headers="n" class="gt_row gt_right">176343</td>
<td headers="mean" class="gt_row gt_right">1966869.429</td>
<td headers="median" class="gt_row gt_right">480000.00</td>
<td headers="min" class="gt_row gt_right">0.150</td>
<td headers="max" class="gt_row gt_right">606210300</td>
<td headers="q1" class="gt_row gt_right">285000.00</td>
<td headers="q3" class="gt_row gt_right">887825</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">nombre_pieces_principales</td>
<td headers="n" class="gt_row gt_right">178525</td>
<td headers="mean" class="gt_row gt_right">2.410</td>
<td headers="median" class="gt_row gt_right">2.00</td>
<td headers="min" class="gt_row gt_right">0.000</td>
<td headers="max" class="gt_row gt_right">22</td>
<td headers="q1" class="gt_row gt_right">1.00</td>
<td headers="q3" class="gt_row gt_right">3</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">surface_reelle_bati</td>
<td headers="n" class="gt_row gt_right">178525</td>
<td headers="mean" class="gt_row gt_right">53.100</td>
<td headers="median" class="gt_row gt_right">42.00</td>
<td headers="min" class="gt_row gt_right">1.000</td>
<td headers="max" class="gt_row gt_right">861</td>
<td headers="q1" class="gt_row gt_right">28.00</td>
<td headers="q3" class="gt_row gt_right">67</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">px_m2</td>
<td headers="n" class="gt_row gt_right">176342</td>
<td headers="mean" class="gt_row gt_right">45436.542</td>
<td headers="median" class="gt_row gt_right">11040.33</td>
<td headers="min" class="gt_row gt_right">0.004</td>
<td headers="max" class="gt_row gt_right">46631562</td>
<td headers="q1" class="gt_row gt_right">9218.75</td>
<td headers="q3" class="gt_row gt_right">13750</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">nombre_lots</td>
<td headers="n" class="gt_row gt_right">178526</td>
<td headers="mean" class="gt_row gt_right">1.537</td>
<td headers="median" class="gt_row gt_right">2.00</td>
<td headers="min" class="gt_row gt_right">0.000</td>
<td headers="max" class="gt_row gt_right">27</td>
<td headers="q1" class="gt_row gt_right">1.00</td>
<td headers="q3" class="gt_row gt_right">2</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Cela nous permet de comprendre qu’il y a probablement encore quelques filtres à effectuer pour avoir une base propre et cohérente, non seulement sur les valeurs aberrantes - on va y venir - mais aussi sur les valeurs minimum. Peut-on ainsi vendre un appartement avec 0 pièce principale ? Ou d’une surface d’1 m2 ? Ou pour 0€ ? On va donc filtrer la base sur ces éléments. De plus, comme on a vu qu’il y avait beaucoup de valeurs manquantes sur les variables reliées aux numéros de lot supérieur à 3, on va retenir dans la base les seules ventes avec des lots compris entre 1 et 2 (en gros, par exemple, un appartement - lot 1 - ou un appartement et une cave - lot 2).</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="03-Manipulation-variables.html#cb69-1" tabindex="-1"></a><span class="co"># Filtre pour réduire la base et la rendre plus propre, et sélection en supprimant les </span></span>
<span id="cb69-2"><a href="03-Manipulation-variables.html#cb69-2" tabindex="-1"></a><span class="co"># variables qui ne nous intéressents plus</span></span>
<span id="cb69-3"><a href="03-Manipulation-variables.html#cb69-3" tabindex="-1"></a>dvf_Paris <span class="ot">&lt;-</span> dvf_Paris <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="03-Manipulation-variables.html#cb69-4" tabindex="-1"></a>  <span class="fu">filter</span>(nombre_lots <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">&amp;</span> nombre_pieces_principales<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb69-5"><a href="03-Manipulation-variables.html#cb69-5" tabindex="-1"></a>           surface_reelle_bati<span class="sc">&gt;=</span><span class="dv">9</span> <span class="sc">&amp;</span> valeur_fonciere<span class="sc">&gt;</span><span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-6"><a href="03-Manipulation-variables.html#cb69-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(lot5_surface_carrez, lot5_numero, lot4_surface_carrez,</span>
<span id="cb69-7"><a href="03-Manipulation-variables.html#cb69-7" tabindex="-1"></a>            lot4_numero, lot3_surface_carrez, lot3_numero))</span></code></pre></div>
<p>On peut relancer nos statistiques précédentes, pour vérifier que c’est plus cohérent et aussi pour étudier maintenant les maximum de certaines variables, c’est en effet une première manière de voir de potentielles valeurs aberrantes.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="03-Manipulation-variables.html#cb70-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="03-Manipulation-variables.html#cb70-2" tabindex="-1"></a>  <span class="fu">get_summary_stats</span>(valeur_fonciere, nombre_pieces_principales, </span>
<span id="cb70-3"><a href="03-Manipulation-variables.html#cb70-3" tabindex="-1"></a>                    surface_reelle_bati, px_m2, </span>
<span id="cb70-4"><a href="03-Manipulation-variables.html#cb70-4" tabindex="-1"></a>                    <span class="at">show=</span><span class="fu">c</span>(<span class="st">&quot;n&quot;</span>,<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;median&quot;</span>, <span class="st">&quot;min&quot;</span>, <span class="st">&quot;max&quot;</span>,<span class="st">&quot;q1&quot;</span>, <span class="st">&quot;q3&quot;</span>,<span class="st">&quot;iqr&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="03-Manipulation-variables.html#cb70-5" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="03-Manipulation-variables.html#cb70-6" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">sep_mark =</span> <span class="st">&quot; &quot;</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code></pre></div>
<div id="mfvprnenyq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mfvprnenyq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mfvprnenyq thead, #mfvprnenyq tbody, #mfvprnenyq tfoot, #mfvprnenyq tr, #mfvprnenyq td, #mfvprnenyq th {
  border-style: none;
}

#mfvprnenyq p {
  margin: 0;
  padding: 0;
}

#mfvprnenyq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mfvprnenyq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mfvprnenyq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mfvprnenyq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mfvprnenyq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mfvprnenyq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mfvprnenyq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mfvprnenyq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mfvprnenyq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mfvprnenyq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mfvprnenyq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mfvprnenyq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mfvprnenyq .gt_spanner_row {
  border-bottom-style: hidden;
}

#mfvprnenyq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mfvprnenyq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mfvprnenyq .gt_from_md > :first-child {
  margin-top: 0;
}

#mfvprnenyq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mfvprnenyq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mfvprnenyq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mfvprnenyq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mfvprnenyq .gt_row_group_first td {
  border-top-width: 2px;
}

#mfvprnenyq .gt_row_group_first th {
  border-top-width: 2px;
}

#mfvprnenyq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mfvprnenyq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mfvprnenyq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mfvprnenyq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mfvprnenyq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mfvprnenyq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mfvprnenyq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mfvprnenyq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mfvprnenyq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mfvprnenyq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mfvprnenyq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mfvprnenyq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mfvprnenyq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mfvprnenyq .gt_left {
  text-align: left;
}

#mfvprnenyq .gt_center {
  text-align: center;
}

#mfvprnenyq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mfvprnenyq .gt_font_normal {
  font-weight: normal;
}

#mfvprnenyq .gt_font_bold {
  font-weight: bold;
}

#mfvprnenyq .gt_font_italic {
  font-style: italic;
}

#mfvprnenyq .gt_super {
  font-size: 65%;
}

#mfvprnenyq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mfvprnenyq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mfvprnenyq .gt_indent_1 {
  text-indent: 5px;
}

#mfvprnenyq .gt_indent_2 {
  text-indent: 10px;
}

#mfvprnenyq .gt_indent_3 {
  text-indent: 15px;
}

#mfvprnenyq .gt_indent_4 {
  text-indent: 20px;
}

#mfvprnenyq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="variable">variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="mean">mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="median">median</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="min">min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="max">max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="q1">q1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="q3">q3</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="iqr">iqr</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="variable" class="gt_row gt_center">valeur_fonciere</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="mean" class="gt_row gt_right">828 062.7</td>
<td headers="median" class="gt_row gt_right">436 000.0</td>
<td headers="min" class="gt_row gt_right">0.1</td>
<td headers="max" class="gt_row gt_right">318 200 000.0</td>
<td headers="q1" class="gt_row gt_right">270 000.0</td>
<td headers="q3" class="gt_row gt_right">730 000.0</td>
<td headers="iqr" class="gt_row gt_right">460000.000</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">nombre_pieces_principales</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="mean" class="gt_row gt_right">2.4</td>
<td headers="median" class="gt_row gt_right">2.0</td>
<td headers="min" class="gt_row gt_right">1.0</td>
<td headers="max" class="gt_row gt_right">22.0</td>
<td headers="q1" class="gt_row gt_right">1.0</td>
<td headers="q3" class="gt_row gt_right">3.0</td>
<td headers="iqr" class="gt_row gt_right">2.000</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">surface_reelle_bati</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="mean" class="gt_row gt_right">51.4</td>
<td headers="median" class="gt_row gt_right">42.0</td>
<td headers="min" class="gt_row gt_right">9.0</td>
<td headers="max" class="gt_row gt_right">861.0</td>
<td headers="q1" class="gt_row gt_right">27.0</td>
<td headers="q3" class="gt_row gt_right">65.0</td>
<td headers="iqr" class="gt_row gt_right">38.000</td></tr>
    <tr><td headers="variable" class="gt_row gt_center">px_m2</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="mean" class="gt_row gt_right">17 120.7</td>
<td headers="median" class="gt_row gt_right">10 740.7</td>
<td headers="min" class="gt_row gt_right">0.0</td>
<td headers="max" class="gt_row gt_right">10 606 666.7</td>
<td headers="q1" class="gt_row gt_right">9 038.5</td>
<td headers="q3" class="gt_row gt_right">12 758.9</td>
<td headers="iqr" class="gt_row gt_right">3720.472</td></tr>
  </tbody>
  
  
</table>
</div>
<p>On peut également faire quelques graphs sur cette pour mieux visualiser ces valeurs aberrantes, un histogramme, ou une “boîte à moustache” (seule ou en relation avec une autre variable) :</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="03-Manipulation-variables.html#cb71-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>px_m2) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>)</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-47-1.svg" width="672" /></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="03-Manipulation-variables.html#cb72-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> annee, <span class="at">y =</span> px_m2) <span class="sc">+</span>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb72-2"><a href="03-Manipulation-variables.html#cb72-2" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-47-2.svg" width="672" /></p>
<p>On voit bien que ce soit avec l’histogramme ou la boîte à moustâche des points aberrants qui “écrasent” les représentations graphiques, de telle sorte qu’on ne voit même pas la distribution, en particulier dans le Boxplot la “boîte” en elle-même.</p>
<p>Pour rappel, dans un boxplot, par défaut un point est affiché comme aberrant s’il est en dehors de l’intervalle suivant : <span class="math inline">\(I=[Q_{1}−1.5×IQR ; Q_{3}+1.5×IQR]\)</span>, <code>IQR</code> étant l’intervalle interquartile donc la différence entre <code>Q1</code> et <code>Q3</code>.</p>
<p>Mais s’agit-il de “vraies” valeurs aberrantes ? Combien d’observations concernent-elles ? La fonction <code>boxplot.stats()</code> permet de récupérer les valeurs des observations indiquées comme aberrantes, comme cela on peut créer ensuite une variable indiquant si oui ou non l’observation a une valeur “aberrante”. Faisons-cela pour la variable de valeur foncière.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="03-Manipulation-variables.html#cb73-1" tabindex="-1"></a><span class="co"># On récupère les valeurs de la partie &#39;out&#39; des sorties de la fonction</span></span>
<span id="cb73-2"><a href="03-Manipulation-variables.html#cb73-2" tabindex="-1"></a><span class="co"># &#39;boxplot.stats&#39;, qui correspondent aux valeurs de tout point de données</span></span>
<span id="cb73-3"><a href="03-Manipulation-variables.html#cb73-3" tabindex="-1"></a><span class="co"># qui se situe au-delà des extrêmes de la boxplot</span></span>
<span id="cb73-4"><a href="03-Manipulation-variables.html#cb73-4" tabindex="-1"></a>val_outliers <span class="ot">&lt;-</span> <span class="fu">boxplot.stats</span>(dvf_Paris<span class="sc">$</span>px_m2)<span class="sc">$</span>out </span>
<span id="cb73-5"><a href="03-Manipulation-variables.html#cb73-5" tabindex="-1"></a></span>
<span id="cb73-6"><a href="03-Manipulation-variables.html#cb73-6" tabindex="-1"></a><span class="co"># On crée une variable dans notre table d&#39;&quot;identification&quot; de ces outliers</span></span>
<span id="cb73-7"><a href="03-Manipulation-variables.html#cb73-7" tabindex="-1"></a><span class="co"># avec comme modalité &quot;vraie&quot; si l&#39;observation a une valeur &quot;outliers&quot;, </span></span>
<span id="cb73-8"><a href="03-Manipulation-variables.html#cb73-8" tabindex="-1"></a><span class="co"># sinon &quot;Faux&quot;</span></span>
<span id="cb73-9"><a href="03-Manipulation-variables.html#cb73-9" tabindex="-1"></a>dvf_Paris <span class="ot">&lt;-</span> dvf_Paris <span class="sc">%&gt;%</span> </span>
<span id="cb73-10"><a href="03-Manipulation-variables.html#cb73-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">px_m2_outliers =</span> </span>
<span id="cb73-11"><a href="03-Manipulation-variables.html#cb73-11" tabindex="-1"></a>           <span class="fu">case_when</span>(px_m2 <span class="sc">%in%</span> <span class="fu">c</span>(val_outliers) <span class="sc">~</span> <span class="st">&quot;Vrai&quot;</span>,</span>
<span id="cb73-12"><a href="03-Manipulation-variables.html#cb73-12" tabindex="-1"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Faux&quot;</span>))</span>
<span id="cb73-13"><a href="03-Manipulation-variables.html#cb73-13" tabindex="-1"></a></span>
<span id="cb73-14"><a href="03-Manipulation-variables.html#cb73-14" tabindex="-1"></a><span class="co"># Puis on regarde la répartition avec la fonction `tabyl()` du package `janitor()` </span></span>
<span id="cb73-15"><a href="03-Manipulation-variables.html#cb73-15" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb73-16"><a href="03-Manipulation-variables.html#cb73-16" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(px_m2_outliers) <span class="sc">%&gt;%</span> </span>
<span id="cb73-17"><a href="03-Manipulation-variables.html#cb73-17" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="utqmbuelxc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#utqmbuelxc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#utqmbuelxc thead, #utqmbuelxc tbody, #utqmbuelxc tfoot, #utqmbuelxc tr, #utqmbuelxc td, #utqmbuelxc th {
  border-style: none;
}

#utqmbuelxc p {
  margin: 0;
  padding: 0;
}

#utqmbuelxc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#utqmbuelxc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#utqmbuelxc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#utqmbuelxc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#utqmbuelxc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#utqmbuelxc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utqmbuelxc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#utqmbuelxc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#utqmbuelxc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#utqmbuelxc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#utqmbuelxc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#utqmbuelxc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#utqmbuelxc .gt_spanner_row {
  border-bottom-style: hidden;
}

#utqmbuelxc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#utqmbuelxc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#utqmbuelxc .gt_from_md > :first-child {
  margin-top: 0;
}

#utqmbuelxc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#utqmbuelxc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#utqmbuelxc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#utqmbuelxc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#utqmbuelxc .gt_row_group_first td {
  border-top-width: 2px;
}

#utqmbuelxc .gt_row_group_first th {
  border-top-width: 2px;
}

#utqmbuelxc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#utqmbuelxc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#utqmbuelxc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#utqmbuelxc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utqmbuelxc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#utqmbuelxc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#utqmbuelxc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#utqmbuelxc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#utqmbuelxc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#utqmbuelxc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#utqmbuelxc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#utqmbuelxc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#utqmbuelxc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#utqmbuelxc .gt_left {
  text-align: left;
}

#utqmbuelxc .gt_center {
  text-align: center;
}

#utqmbuelxc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#utqmbuelxc .gt_font_normal {
  font-weight: normal;
}

#utqmbuelxc .gt_font_bold {
  font-weight: bold;
}

#utqmbuelxc .gt_font_italic {
  font-style: italic;
}

#utqmbuelxc .gt_super {
  font-size: 65%;
}

#utqmbuelxc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#utqmbuelxc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#utqmbuelxc .gt_indent_1 {
  text-indent: 5px;
}

#utqmbuelxc .gt_indent_2 {
  text-indent: 10px;
}

#utqmbuelxc .gt_indent_3 {
  text-indent: 15px;
}

#utqmbuelxc .gt_indent_4 {
  text-indent: 20px;
}

#utqmbuelxc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="px_m2_outliers">px_m2_outliers</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="px_m2_outliers" class="gt_row gt_left">Faux</td>
<td headers="n" class="gt_row gt_right">128824</td>
<td headers="percent" class="gt_row gt_right">86.8%</td></tr>
    <tr><td headers="px_m2_outliers" class="gt_row gt_left">Vrai</td>
<td headers="n" class="gt_row gt_right">19644</td>
<td headers="percent" class="gt_row gt_right">13.2%</td></tr>
    <tr><td headers="px_m2_outliers" class="gt_row gt_left">Total</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="percent" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
<p>On y lit que pour cette variable, il y aurait près de 13,2% de valeurs aberrantes telles qu’indiquées par le boxplot, ce qui correspondant à 19 644 observations, c’est beaucoup ! On peut regarder plus précisément à quelles observations elles correspondent, en sélectionnant avec la variable créée et en triant par ordre croissant ou décroissant.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="03-Manipulation-variables.html#cb74-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(px_m2_outliers<span class="sc">==</span><span class="st">&#39;Vrai&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="03-Manipulation-variables.html#cb74-2" tabindex="-1"></a>  <span class="fu">select</span>(px_m2, nombre_pieces_principales, </span>
<span id="cb74-3"><a href="03-Manipulation-variables.html#cb74-3" tabindex="-1"></a>         surface_reelle_bati, valeur_fonciere)  <span class="sc">%&gt;%</span> </span>
<span id="cb74-4"><a href="03-Manipulation-variables.html#cb74-4" tabindex="-1"></a>  <span class="fu">arrange</span>(px_m2) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-5"><a href="03-Manipulation-variables.html#cb74-5" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="mwdnbzzfvb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mwdnbzzfvb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mwdnbzzfvb thead, #mwdnbzzfvb tbody, #mwdnbzzfvb tfoot, #mwdnbzzfvb tr, #mwdnbzzfvb td, #mwdnbzzfvb th {
  border-style: none;
}

#mwdnbzzfvb p {
  margin: 0;
  padding: 0;
}

#mwdnbzzfvb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mwdnbzzfvb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mwdnbzzfvb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mwdnbzzfvb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mwdnbzzfvb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwdnbzzfvb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwdnbzzfvb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mwdnbzzfvb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mwdnbzzfvb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mwdnbzzfvb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mwdnbzzfvb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mwdnbzzfvb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mwdnbzzfvb .gt_spanner_row {
  border-bottom-style: hidden;
}

#mwdnbzzfvb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mwdnbzzfvb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mwdnbzzfvb .gt_from_md > :first-child {
  margin-top: 0;
}

#mwdnbzzfvb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mwdnbzzfvb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mwdnbzzfvb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mwdnbzzfvb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mwdnbzzfvb .gt_row_group_first td {
  border-top-width: 2px;
}

#mwdnbzzfvb .gt_row_group_first th {
  border-top-width: 2px;
}

#mwdnbzzfvb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwdnbzzfvb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mwdnbzzfvb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mwdnbzzfvb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwdnbzzfvb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwdnbzzfvb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mwdnbzzfvb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mwdnbzzfvb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mwdnbzzfvb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mwdnbzzfvb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwdnbzzfvb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwdnbzzfvb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mwdnbzzfvb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mwdnbzzfvb .gt_left {
  text-align: left;
}

#mwdnbzzfvb .gt_center {
  text-align: center;
}

#mwdnbzzfvb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mwdnbzzfvb .gt_font_normal {
  font-weight: normal;
}

#mwdnbzzfvb .gt_font_bold {
  font-weight: bold;
}

#mwdnbzzfvb .gt_font_italic {
  font-style: italic;
}

#mwdnbzzfvb .gt_super {
  font-size: 65%;
}

#mwdnbzzfvb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mwdnbzzfvb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mwdnbzzfvb .gt_indent_1 {
  text-indent: 5px;
}

#mwdnbzzfvb .gt_indent_2 {
  text-indent: 10px;
}

#mwdnbzzfvb .gt_indent_3 {
  text-indent: 15px;
}

#mwdnbzzfvb .gt_indent_4 {
  text-indent: 20px;
}

#mwdnbzzfvb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="px_m2">px_m2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nombre_pieces_principales">nombre_pieces_principales</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="surface_reelle_bati">surface_reelle_bati</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="valeur_fonciere">valeur_fonciere</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="px_m2" class="gt_row gt_right">0.003750000</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">40</td>
<td headers="valeur_fonciere" class="gt_row gt_right">0.15</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">0.003906250</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">7</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">256</td>
<td headers="valeur_fonciere" class="gt_row gt_right">1.00</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">0.005128205</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">5</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">195</td>
<td headers="valeur_fonciere" class="gt_row gt_right">1.00</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">0.005128205</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">5</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">195</td>
<td headers="valeur_fonciere" class="gt_row gt_right">1.00</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">0.005882353</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">5</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">170</td>
<td headers="valeur_fonciere" class="gt_row gt_right">1.00</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="03-Manipulation-variables.html#cb75-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">filter</span>(px_m2_outliers<span class="sc">==</span><span class="st">&#39;Vrai&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="03-Manipulation-variables.html#cb75-2" tabindex="-1"></a>  <span class="fu">select</span>(px_m2, nombre_pieces_principales, </span>
<span id="cb75-3"><a href="03-Manipulation-variables.html#cb75-3" tabindex="-1"></a>         surface_reelle_bati, valeur_fonciere)  <span class="sc">%&gt;%</span> </span>
<span id="cb75-4"><a href="03-Manipulation-variables.html#cb75-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(px_m2)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="03-Manipulation-variables.html#cb75-5" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="enexrcsprg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#enexrcsprg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#enexrcsprg thead, #enexrcsprg tbody, #enexrcsprg tfoot, #enexrcsprg tr, #enexrcsprg td, #enexrcsprg th {
  border-style: none;
}

#enexrcsprg p {
  margin: 0;
  padding: 0;
}

#enexrcsprg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#enexrcsprg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#enexrcsprg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#enexrcsprg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#enexrcsprg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#enexrcsprg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#enexrcsprg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#enexrcsprg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#enexrcsprg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#enexrcsprg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#enexrcsprg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#enexrcsprg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#enexrcsprg .gt_spanner_row {
  border-bottom-style: hidden;
}

#enexrcsprg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#enexrcsprg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#enexrcsprg .gt_from_md > :first-child {
  margin-top: 0;
}

#enexrcsprg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#enexrcsprg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#enexrcsprg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#enexrcsprg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#enexrcsprg .gt_row_group_first td {
  border-top-width: 2px;
}

#enexrcsprg .gt_row_group_first th {
  border-top-width: 2px;
}

#enexrcsprg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#enexrcsprg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#enexrcsprg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#enexrcsprg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#enexrcsprg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#enexrcsprg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#enexrcsprg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#enexrcsprg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#enexrcsprg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#enexrcsprg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#enexrcsprg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#enexrcsprg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#enexrcsprg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#enexrcsprg .gt_left {
  text-align: left;
}

#enexrcsprg .gt_center {
  text-align: center;
}

#enexrcsprg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#enexrcsprg .gt_font_normal {
  font-weight: normal;
}

#enexrcsprg .gt_font_bold {
  font-weight: bold;
}

#enexrcsprg .gt_font_italic {
  font-style: italic;
}

#enexrcsprg .gt_super {
  font-size: 65%;
}

#enexrcsprg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#enexrcsprg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#enexrcsprg .gt_indent_1 {
  text-indent: 5px;
}

#enexrcsprg .gt_indent_2 {
  text-indent: 10px;
}

#enexrcsprg .gt_indent_3 {
  text-indent: 15px;
}

#enexrcsprg .gt_indent_4 {
  text-indent: 20px;
}

#enexrcsprg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="px_m2">px_m2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nombre_pieces_principales">nombre_pieces_principales</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="surface_reelle_bati">surface_reelle_bati</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="valeur_fonciere">valeur_fonciere</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="px_m2" class="gt_row gt_right">10606667</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">1</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">30</td>
<td headers="valeur_fonciere" class="gt_row gt_right">318200000</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">10606667</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">1</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">30</td>
<td headers="valeur_fonciere" class="gt_row gt_right">318200000</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">5582456</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">57</td>
<td headers="valeur_fonciere" class="gt_row gt_right">318200000</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">5582456</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">2</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">57</td>
<td headers="valeur_fonciere" class="gt_row gt_right">318200000</td></tr>
    <tr><td headers="px_m2" class="gt_row gt_right">2560494</td>
<td headers="nombre_pieces_principales" class="gt_row gt_right">4</td>
<td headers="surface_reelle_bati" class="gt_row gt_right">81</td>
<td headers="valeur_fonciere" class="gt_row gt_right">207400000</td></tr>
  </tbody>
  
  
</table>
</div>
<p>On voit donc qu’il y a des valeurs considérées comme aberrantes en bas de la distribution (valeurs trop faible) et en haut de la distribution ; ici sur les 5 premières valeurs, on a bien l’impression que ce sont des valeurs aberrantes. Pour être plus précis, on peut calculer les valeurs seuils bas et haut puisqu’on connaît la formule. Le seuil bas sera : 3457.7539401 et le seuil haut : 1.8339641^{4}. Ces seuils peuvent donc être vraisemblables en réalité. Il est donc important de comprendre ces valeurs aberrantes, cela peut parfois correspondre à des observations intéressantes à conserver, il ne s’agit pas juste de les identifier pour les exclure directement ensuite des analyses.</p>
<p>Il existe d’autres méthodes (méthode basée sur les percentiles ; méthode de Hampel), et d’autres tests : par exemple, le package <strong><code>outliers</code></strong> vous permet de tester si une valeur (max ou min) est bien une valeur aberrante avec la fonction <code>grubbs.test()</code> (attention bis : à utiliser avec grande précaution et beaucoup de parcimonie), ou avec le package <strong><code>EnvStats</code></strong> et la fonction <code>rosnerTest()</code> pour détecter plusieurs “outliers” à la fois.</p>
<p>Pour gérer ces variables aberrantes, on peut les supprimer bien sûr si l’on est sûr que la valeur de la variable n’est pas “normale”, par exemple si on a une variable de salaire avec des modalités inférieures à 0, oui dans ce cas ce sont des mauvais outliers (et d’ailleurs peut-être même pas identifiés comme tel statistiquement) et on peut les supprimer ; de même pour des variables de résultats économiques, on va souvent élaguer la distribution en retirant les 1% (par exemple) du bas et du haut de la distribution pour supprimer des potentiels outliers. On peut tenter cette méthode ici en filtrant les données avant de calculer la distribution de la variable.<br />
Sinon, on les isole en créant une variable dichotomique “0/1” ou “Faux/Vrai” ; ou on crée une variable qualitative avec plusieurs catégories (cf. sous-section suivante).</p>
<p>Dans les graphiques, en particulier les boîtes à moustache, on peut les supprimer visuellement avec l’option <code>outlier.shape = NA</code> et mettre ensuite une échelle plus réduite (avec <code>ylim=c( , )</code>) pour que le graphique soit plus lisible, mais il faut alors bien préciser dans la légende que certaines valeurs ne sont pas visibles sur le graphique car retirées ; attention à ne pas les supprimer de la base sur laquelle est réalisée la boxplot car sinon cela va modifier les indicateurs (en particulier de moyenne mais pas seulement). Dans un histogramme, on peut de même jouer sur l’échelle.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="03-Manipulation-variables.html#cb76-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">y =</span> px_m2) <span class="sc">+</span> </span>
<span id="cb76-2"><a href="03-Manipulation-variables.html#cb76-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb76-3"><a href="03-Manipulation-variables.html#cb76-3" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.01</span>),<span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.99</span>))) <span class="sc">+</span></span>
<span id="cb76-4"><a href="03-Manipulation-variables.html#cb76-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution des valeurs foncières en euros&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>, <span class="at">x=</span><span class="st">&quot;&quot;</span>, </span>
<span id="cb76-5"><a href="03-Manipulation-variables.html#cb76-5" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Rq : les valeurs en-dessous du 1% de la distribution et celles au-dessus du 99% de la distribution ne sont pas </span><span class="sc">\n</span><span class="st">affichées sur le graphique.&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-6"><a href="03-Manipulation-variables.html#cb76-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-50-1.svg" width="672" /></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="03-Manipulation-variables.html#cb77-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(px_m2) <span class="sc">+</span> </span>
<span id="cb77-2"><a href="03-Manipulation-variables.html#cb77-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">10000</span>) <span class="sc">+</span> <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.01</span>),</span>
<span id="cb77-3"><a href="03-Manipulation-variables.html#cb77-3" tabindex="-1"></a>                                                      <span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.99</span>))) <span class="sc">+</span></span>
<span id="cb77-4"><a href="03-Manipulation-variables.html#cb77-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution des valeurs foncières en euros&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>, <span class="at">x=</span><span class="st">&quot;Prix au m2&quot;</span>,</span>
<span id="cb77-5"><a href="03-Manipulation-variables.html#cb77-5" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Rq : les valeurs en-dessous du 1% de la distribution et celles au-dessus du 99% de la distribution ne sont pas </span><span class="sc">\n</span><span class="st">affichées sur le graphique.&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-6"><a href="03-Manipulation-variables.html#cb77-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-50-2.svg" width="672" /></p>
<p>C’est un peu mieux mais on voit que la boxplot est toujours écrasée… et sur l’histogramme on voit qu’il y a probablement encore un problème pour les valeurs faibles du prix au m2 qu’il faudrait “nettoyer”. On peut refaire le graphique en élaguant davantage en bas de la distribution par exemple :</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="03-Manipulation-variables.html#cb78-1" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(px_m2) <span class="sc">+</span> </span>
<span id="cb78-2"><a href="03-Manipulation-variables.html#cb78-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20000</span>) <span class="sc">+</span>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.05</span>),</span>
<span id="cb78-3"><a href="03-Manipulation-variables.html#cb78-3" tabindex="-1"></a>                                                       <span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2, <span class="fl">0.95</span>))) <span class="sc">+</span></span>
<span id="cb78-4"><a href="03-Manipulation-variables.html#cb78-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution des valeurs foncières en euros&quot;</span>, <span class="at">y=</span><span class="st">&quot;&quot;</span>, <span class="at">x=</span><span class="st">&quot;Prix au m2&quot;</span>,</span>
<span id="cb78-5"><a href="03-Manipulation-variables.html#cb78-5" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Rq : les valeurs en-dessous du 5% de la distribution et celles au-dessus </span></span>
<span id="cb78-6"><a href="03-Manipulation-variables.html#cb78-6" tabindex="-1"></a><span class="st">       du 95% de la distribution ne sont pas </span><span class="sc">\n</span><span class="st">affichées sur le graphique.&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-7"><a href="03-Manipulation-variables.html#cb78-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span><span class="dv">0</span>))</span></code></pre></div>
<p><img src="Data-Mining_files/figure-html/unnamed-chunk-51-1.svg" width="672" /></p>
</div>
<div id="découper-en-classes-une-variable-quantitative" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Découper en classes une variable quantitative<a href="03-Manipulation-variables.html#découper-en-classes-une-variable-quantitative" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On peut enfin découper en classes une variable quantitative et en faire donc une variable qualitative. On utilise pour cela la fonction <code>cut()</code> du langage de base de <code>R</code>. On peut par exemple découper la variable selon les principaux indicateurs de la distribution.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="03-Manipulation-variables.html#cb79-1" tabindex="-1"></a><span class="co">#dvf_Paris %&gt;% get_summary_stats(px_m2)</span></span>
<span id="cb79-2"><a href="03-Manipulation-variables.html#cb79-2" tabindex="-1"></a>dvf_Paris<span class="sc">$</span>px_m2_cat <span class="ot">&lt;-</span> <span class="fu">cut</span>(dvf_Paris<span class="sc">$</span>px_m2,  </span>
<span id="cb79-3"><a href="03-Manipulation-variables.html#cb79-3" tabindex="-1"></a>                           <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,</span>
<span id="cb79-4"><a href="03-Manipulation-variables.html#cb79-4" tabindex="-1"></a>                                      <span class="fu">quantile</span>(dvf_Paris<span class="sc">$</span>px_m2,<span class="fl">0.25</span>), </span>
<span id="cb79-5"><a href="03-Manipulation-variables.html#cb79-5" tabindex="-1"></a>                                      <span class="fu">mean</span>(dvf_Paris<span class="sc">$</span>px_m2),</span>
<span id="cb79-6"><a href="03-Manipulation-variables.html#cb79-6" tabindex="-1"></a>                                      <span class="fu">max</span>(dvf_Paris<span class="sc">$</span>px_m2)),</span>
<span id="cb79-7"><a href="03-Manipulation-variables.html#cb79-7" tabindex="-1"></a>                           <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;entre 0 et le Q1(9038€)&quot;</span>,</span>
<span id="cb79-8"><a href="03-Manipulation-variables.html#cb79-8" tabindex="-1"></a>                                    <span class="st">&quot;Entre le Q1 et la moyenne (17121€)&quot;</span>,</span>
<span id="cb79-9"><a href="03-Manipulation-variables.html#cb79-9" tabindex="-1"></a>                                    <span class="st">&quot;Entre la moyenne et le maximum&quot;</span>))</span>
<span id="cb79-10"><a href="03-Manipulation-variables.html#cb79-10" tabindex="-1"></a>dvf_Paris <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(px_m2_cat) <span class="sc">%&gt;%</span> <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb79-11"><a href="03-Manipulation-variables.html#cb79-11" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">gt</span>()</span></code></pre></div>
<div id="ldgfrldtdg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ldgfrldtdg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ldgfrldtdg thead, #ldgfrldtdg tbody, #ldgfrldtdg tfoot, #ldgfrldtdg tr, #ldgfrldtdg td, #ldgfrldtdg th {
  border-style: none;
}

#ldgfrldtdg p {
  margin: 0;
  padding: 0;
}

#ldgfrldtdg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ldgfrldtdg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ldgfrldtdg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ldgfrldtdg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ldgfrldtdg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ldgfrldtdg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldgfrldtdg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ldgfrldtdg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ldgfrldtdg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ldgfrldtdg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ldgfrldtdg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ldgfrldtdg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ldgfrldtdg .gt_spanner_row {
  border-bottom-style: hidden;
}

#ldgfrldtdg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ldgfrldtdg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ldgfrldtdg .gt_from_md > :first-child {
  margin-top: 0;
}

#ldgfrldtdg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ldgfrldtdg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ldgfrldtdg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ldgfrldtdg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ldgfrldtdg .gt_row_group_first td {
  border-top-width: 2px;
}

#ldgfrldtdg .gt_row_group_first th {
  border-top-width: 2px;
}

#ldgfrldtdg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldgfrldtdg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ldgfrldtdg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ldgfrldtdg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldgfrldtdg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldgfrldtdg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ldgfrldtdg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ldgfrldtdg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ldgfrldtdg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ldgfrldtdg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ldgfrldtdg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldgfrldtdg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ldgfrldtdg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ldgfrldtdg .gt_left {
  text-align: left;
}

#ldgfrldtdg .gt_center {
  text-align: center;
}

#ldgfrldtdg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ldgfrldtdg .gt_font_normal {
  font-weight: normal;
}

#ldgfrldtdg .gt_font_bold {
  font-weight: bold;
}

#ldgfrldtdg .gt_font_italic {
  font-style: italic;
}

#ldgfrldtdg .gt_super {
  font-size: 65%;
}

#ldgfrldtdg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ldgfrldtdg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ldgfrldtdg .gt_indent_1 {
  text-indent: 5px;
}

#ldgfrldtdg .gt_indent_2 {
  text-indent: 10px;
}

#ldgfrldtdg .gt_indent_3 {
  text-indent: 15px;
}

#ldgfrldtdg .gt_indent_4 {
  text-indent: 20px;
}

#ldgfrldtdg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="px_m2_cat">px_m2_cat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="percent">percent</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="px_m2_cat" class="gt_row gt_center">entre 0 et le Q1(9038€)</td>
<td headers="n" class="gt_row gt_right">37143</td>
<td headers="percent" class="gt_row gt_right">25.0%</td></tr>
    <tr><td headers="px_m2_cat" class="gt_row gt_center">Entre le Q1 et la moyenne (17121€)</td>
<td headers="n" class="gt_row gt_right">97086</td>
<td headers="percent" class="gt_row gt_right">65.4%</td></tr>
    <tr><td headers="px_m2_cat" class="gt_row gt_center">Entre la moyenne et le maximum</td>
<td headers="n" class="gt_row gt_right">14239</td>
<td headers="percent" class="gt_row gt_right">9.6%</td></tr>
    <tr><td headers="px_m2_cat" class="gt_row gt_center">Total</td>
<td headers="n" class="gt_row gt_right">148468</td>
<td headers="percent" class="gt_row gt_right">-</td></tr>
  </tbody>
  
  
</table>
</div>
<p>On a une classe majoritaire (du Q1 à la moyenne), mais cela nous permet de distinguer 2 classes pour lesquelles le montant du prix au m2 est soit plutôt faible, soit plutôt élevé.</p>
<p>À noter que si la variable quantitative en question a des valeurs manquantes, il faudra utiliser la fonction <code>fancycut()</code> ou <code>wafflecut()</code> du package <strong><code>fancycut</code></strong>, l’inconvénient est que cela nous oblige à indiquer les valeurs des différents indicateurs de la distribution.</p>
<!-- Pour trouver le même résultat que précédemment, le code serait alors le suivant : -->

</div>
</div>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="02-Manipulation-base.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="04-Récapitulatif.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Camille-Sisi/Data-Mining-2024/master/03-Manipulation-variables.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
